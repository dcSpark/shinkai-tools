{"type":"Python","content":[{"name":"iterm-write","tool_router_key":"local:::__official_shinkai:::iterm_write","homepage":null,"author":"@@official.shinkai","version":"1.0.0","mcp_enabled":null,"py_code":"# /// script\n# dependencies = [\n#   \"requests\",\n# ]\n# ///\n\nfrom typing import Dict, Any, Optional, List\nimport subprocess\nimport os\n\nclass CONFIG:\n    use_applescript: bool = True  # Whether to use AppleScript to write text to iTerm\n\nclass INPUTS:\n    command: str  # The command or text to write into the active iTerm session\n\nclass OUTPUT:\n    lines_output: int  # Number of new lines that appeared in iTerm after the command\n    success: bool  # Whether the command was successfully written\n    message: str  # Success or error message\n\ndef escape_for_applescript(text: str) -> str:\n    \"\"\"Escape special characters for AppleScript.\"\"\"\n    return text.replace('\\\\', '\\\\\\\\').replace('\"', '\\\\\"').replace(\"'\", \"'\\\\''\")\n\nasync def run(config: CONFIG, inputs: INPUTS) -> OUTPUT:\n    output = OUTPUT()\n    output.lines_output = 0\n    output.success = False\n    output.message = \"\"\n\n    if not inputs.command:\n        output.message = \"No command specified to write to the iTerm terminal\"\n        return output\n\n    try:\n        # Construct AppleScript command\n        script_cmd = f'''\n            tell application \"iTerm2\"\n                tell current session of current window\n                    write text \"{escape_for_applescript(inputs.command)}\"\n                end tell\n            end tell\n        '''\n\n        # Execute AppleScript\n        process = subprocess.Popen(\n            ['/usr/bin/osascript', '-e', script_cmd],\n            stdout=subprocess.PIPE,\n            stderr=subprocess.PIPE\n        )\n        stdout, stderr = process.communicate()\n\n        if process.returncode == 0:\n            output.success = True\n            output.message = \"Command successfully written to iTerm\"\n            output.lines_output = len(inputs.command.split('\\n'))  # Basic estimation\n        else:\n            output.message = f\"Failed to execute AppleScript: {stderr.decode()}\"\n    except Exception as e:\n        output.message = f\"Error writing to iTerm: {str(e)}\"\n\n    return output ","tools":[],"config":[{"BasicConfig":{"key_name":"use_applescript","description":"Whether to use AppleScript to write text to iTerm","required":false,"type":null,"key_value":null}}],"description":"Writes a command (or text) to the active iTerm terminal.","keywords":["iterm","terminal","automation","shinkai"],"input_args":{"type":"object","properties":{"command":{"type":"string","description":"The command or text to write into the active iTerm session"}},"required":["command"]},"output_arg":{"json":""},"activated":false,"embedding":[-0.34413788,0.37072194,-0.010329824,0.72341317,0.014348831,0.43265048,-1.0060279,0.34081107,0.330772,0.14195372,0.17399919,0.3952451,-0.2713395,0.13679881,0.15919784,-0.61916775,-0.77841145,-0.956754,-1.2558999,-0.27430198,0.061125066,0.39057377,-0.07114092,-0.25245547,0.033664837,-0.24120113,0.37278378,0.37329096,-1.4023892,-2.278543,-0.5355947,0.33913055,-0.059673734,0.06459497,-0.17992458,-0.5996964,0.20712338,0.19910353,-0.6012018,-0.6382112,0.33277643,0.2446504,-0.045385968,-0.062608905,0.40088695,0.32792255,0.021990683,-0.5801573,0.7189683,0.8484069,-0.24060486,-0.31494066,-0.32538384,0.1317271,0.08378262,-0.5532519,0.37533078,0.30178887,-0.19996047,0.27503973,0.10552255,0.93397164,-4.3415375,-0.46037975,0.70739156,-0.5067709,0.6075887,0.35040006,-0.3117094,0.030900583,-0.36668292,0.36977956,-0.27642122,0.07141017,0.5208622,-0.9733313,-0.12717272,0.3432605,0.7476521,-0.38422805,0.26031917,0.6363155,-0.3052717,0.081002116,-0.5564746,0.9087213,-0.59274685,-0.317868,0.111572735,0.0871213,-0.31539783,-0.35308865,-0.0027087536,-0.033480275,-0.43924522,0.5231021,-0.009912439,0.7539454,-0.009401113,3.1381943,0.71918523,0.7341652,0.10019303,-0.38624942,0.027228538,-0.5108726,-0.41230816,-0.73508,-0.6447293,-0.18716955,0.44673932,0.04399025,0.37164634,0.24558535,0.8014293,0.23023395,-0.83888364,-0.11340526,0.08500807,0.99196035,-0.41696525,0.010510514,-1.0656943,-0.10984459,-0.31200048,0.71129227,0.095661044,0.28091323,-0.022365436,-0.27113208,0.3458368,-0.021271825,-0.118774325,0.27971908,-0.1796157,0.6398946,0.18877618,-0.51078665,0.048445717,-0.31392223,0.6448129,-1.6555659,1.6554625,0.3063743,0.55853826,-0.23497131,0.1307509,0.16583836,0.10685426,-0.35726017,-0.35814992,-0.13721669,-0.07547753,0.45196202,0.6030403,-0.13126001,-0.27044195,0.13514246,-0.13691707,0.37711784,-0.3819718,-0.5486614,0.6117356,0.6011453,0.5135744,-0.2838798,-0.00945656,-0.31656647,-0.28454715,-0.12246312,0.08369224,-0.73657376,-0.02626558,0.27594593,-0.8390849,0.3360151,0.31381667,-0.14365739,0.26283845,-0.10253258,-0.08497542,0.62082744,-0.5798814,-0.15086134,0.10985109,-0.2828566,0.544178,0.3728799,0.26021218,0.83356535,-0.8567856,1.9185773,-0.23847185,0.27369133,-0.25492042,-0.21424572,0.054284364,0.7132519,0.081349604,-0.4717213,-0.57058346,0.32352638,-0.70140624,0.4347947,0.29922077,-0.44855595,0.43761066,0.6850051,-0.054701187,0.022332035,0.18265603,-0.7232559,0.62124336,0.63139373,0.8253834,-0.23115663,-0.21143913,-0.110133156,0.08116289,0.461819,0.29978296,0.39149594,-0.5269033,-0.4606738,-0.25956327,-0.1336422,0.28401566,0.30955875,-0.49138308,-0.6357133,0.37070256,0.8041537,0.676097,0.4616175,0.17565426,0.11211975,-0.19137707,0.23089363,0.3822723,-0.34084624,0.07832252,0.15378314,0.31580508,-0.20548007,-0.09186314,-0.49038422,-0.49904087,0.13754553,0.023064408,0.9538441,0.18621832,0.075044915,0.56964594,-0.19480477,-0.28262573,0.1728057,-1.6733267,-0.3714254,-0.66968894,0.594506,0.577056,0.1883193,0.37016338,0.69717044,-0.45198685,-0.58160555,-0.18044674,-0.17595908,-0.12514396,-0.021563262,-0.7437619,0.6284741,0.1378221,-0.18231097,0.23461424,-0.55614865,-0.20354728,-0.11750697,0.25968358,-0.44841224,-0.32833648,-0.23740003,0.3317543,-0.20710765,-0.43456534,-0.2560901,-0.5871482,-0.6226399,0.17210159,-0.10861706,0.52550393,-0.5766946,-0.15649092,0.575184,2.652148,0.76288426,-0.17843167,-0.0063225906,0.021663599,-0.06848654,0.72898704,-0.21825993,-0.54661167,0.2252061,-0.98893934,-0.59529823,0.010230619,-0.09682492,-0.21961367,0.68401253,-0.37325332,0.27959988,0.33170786,-0.21256575,0.80918306,0.21862006,-0.01371744,0.3926541,-0.20161472,-1.7238218,-0.31406122,-0.3198191,0.04836349,0.23238513,-0.28740522,0.44278514,-0.33046964,0.077336155,-0.12076661,0.39142329,0.91074705,-0.29902935,0.75540864,-0.10967253,0.73918235,0.1667536,0.4398627,0.09724261,0.044401504,-0.42866483,0.11310392,1.6696765,-0.11234813,0.033019494,0.500398,0.1763232,-0.99363667,-1.7254214,-0.047789775,-0.19584212,-0.66181415,0.70364213,-0.2466947,-0.6248008,0.106952906,1.0972686,0.18735564,-0.38169557,-0.78962636,1.6227399,0.211278,0.14926165,-0.16840777,0.31156063,-0.15109618,-0.07992968,0.57040936,-0.9236011,0.09658265,0.2944345,0.1540162,0.04457044,0.17772122,0.7338702,0.58750445,-0.12920916,-0.42588386,0.30571097,0.28911167,0.07407047,0.483948,0.054089937,-0.84751743,-0.11262973],"result":{"type":"object","properties":{"lines_output":{"description":"Number of new lines that appeared in iTerm after the command","type":"number"},"message":{"description":"Success or error message","type":"string"},"success":{"description":"Whether the command was successfully written","type":"boolean"}},"required":["lines_output","success","message"]},"sql_tables":[],"sql_queries":[],"file_inbox":null,"oauth":null,"assets":null,"runner":"any","operating_system":["linux","macos","windows"],"tool_set":""},false]}