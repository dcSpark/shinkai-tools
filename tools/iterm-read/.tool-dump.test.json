{"type":"Python","content":[{"version":"1.0.0","name":"iterm-read","homepage":null,"author":"@@official.shinkai","py_code":"# /// script\n# dependencies = [\n#   \"requests\",\n# ]\n# ///\n\nfrom typing import Dict, Any, Optional, List\nimport subprocess\nimport os\n\nclass CONFIG:\n    pass  # No specific configuration needed for reading\n\nclass INPUTS:\n    lines_of_output: int = 25  # Number of lines of terminal output to fetch\n\nclass OUTPUT:\n    terminal_output: str  # The last N lines of terminal output\n    success: bool  # Whether the read operation was successful\n    message: str  # Success or error message\n\nasync def run(config: CONFIG, inputs: INPUTS) -> OUTPUT:\n    output = OUTPUT()\n    output.terminal_output = \"\"\n    output.success = False\n    output.message = \"\"\n\n    try:\n        # Construct AppleScript command to get terminal content\n        script_cmd = f'''\n            tell application \"iTerm2\"\n                tell current session of current window\n                    get contents\n                end tell\n            end tell\n        '''\n\n        # Execute AppleScript\n        process = subprocess.Popen(\n            ['/usr/bin/osascript', '-e', script_cmd],\n            stdout=subprocess.PIPE,\n            stderr=subprocess.PIPE\n        )\n        stdout, stderr = process.communicate()\n\n        if process.returncode == 0:\n            # Get the terminal output and split into lines\n            all_lines = stdout.decode().split('\\n')\n            \n            # Get the last N lines based on input parameter\n            requested_lines = min(inputs.lines_of_output, len(all_lines))\n            output.terminal_output = '\\n'.join(all_lines[-requested_lines:])\n            \n            output.success = True\n            output.message = f\"Successfully read {requested_lines} lines from iTerm\"\n        else:\n            output.message = f\"Failed to read from iTerm: {stderr.decode()}\"\n    except Exception as e:\n        output.message = f\"Error reading from iTerm: {str(e)}\"\n\n    return output ","tools":[],"config":[],"description":"Reads output from the active iTerm terminal.","keywords":["iterm","terminal","read","automation","shinkai"],"input_args":{"type":"object","properties":{"lines_of_output":{"type":"number","description":"Number of lines of terminal output to fetch"}},"required":[]},"output_arg":{"json":""},"activated":false,"embedding":[-0.22957829,0.22635247,-0.3215977,0.40987766,-0.1368842,0.17635745,-0.6520287,0.4911505,0.054535527,-0.06140007,0.077487886,0.035005078,-0.10004104,-0.17299297,0.12755151,-0.23851976,-0.053667646,-0.73363423,-1.0852563,-0.20247748,0.3537299,0.37965354,-0.006039962,-0.13339746,-0.20685548,-0.03849,-0.06830484,0.32631534,-1.6951559,-2.3935206,-0.49252728,0.12567163,-0.21276782,0.060193688,-0.40173173,-0.8556714,0.115124606,-0.059054166,-0.8047851,-0.66600084,0.28697318,0.79973435,-0.05784482,-0.01619996,0.389717,0.27411813,-0.1065883,-0.87053514,0.72247857,0.6970907,-0.0010794513,-0.40112036,-0.033495132,0.036649793,-0.110157184,-0.70292246,0.6555196,0.080127254,-0.14101484,-0.05653894,0.17535493,0.8061957,-4.496131,-0.2889403,0.5096716,-0.3904212,0.23548417,0.5492396,0.020494424,-0.011630312,-0.46155286,0.15034945,-0.06489244,-0.015438378,0.29635555,-0.6133377,0.06956297,0.34818846,0.40836167,-0.38497987,-0.08283919,0.59284043,-0.39860493,0.21120782,-0.16903783,0.87565804,-0.78365254,-0.27421606,0.13483058,0.32324344,0.09421076,-0.35083637,-0.34842387,0.16369015,-0.35503086,0.20106176,0.018835474,0.8319693,0.083906,3.0546463,0.8613964,0.81999403,-0.24245262,-0.3496078,-0.10298639,-0.72950053,0.0085937865,-0.35219455,-0.13698538,-0.13035543,0.40150547,-0.35244992,0.7023711,0.39235818,0.6232072,0.046506107,-0.80942553,-0.30210868,0.3675568,0.44141757,-0.5116375,-0.045475367,-0.9029166,-0.47532868,-0.08046745,0.26581305,0.41587502,0.21020114,-0.21191947,-0.17351563,0.558619,-0.10584189,-0.29167473,0.034799673,0.07653007,0.6598865,0.11266271,-0.41588107,-0.046673574,-0.37395164,-0.24808758,-1.8308097,1.42177,0.119524516,0.51556295,0.002241794,0.34828714,0.6165847,0.15640439,0.16909781,-0.12593555,-0.050217986,0.02486263,0.47880685,0.5226082,-0.013918909,-0.30131865,0.19211678,-0.15854526,0.30973658,-0.49142176,-0.3327609,0.7180582,0.018322244,0.39401382,-0.17215872,-0.20015752,-0.09352928,0.4413729,-0.1623745,0.5784191,-0.71732366,-0.16926433,0.52854186,-0.71703047,0.20044091,-0.009378754,-0.15892985,0.07884979,-0.23664656,-0.16888207,0.6472145,-0.49344832,-0.072999306,-0.041202083,-0.33191988,0.74463564,0.13907436,0.5746264,1.2725383,-0.61484027,2.1359859,-0.6324833,0.028685436,-0.38822392,-0.5995446,-0.11218159,0.8158216,0.033667292,-0.15148963,-0.7139773,0.21057123,-0.43662298,0.31225884,0.055646487,-0.4142151,0.51981395,0.11660878,0.022645626,-0.2935256,0.035981692,-0.3632048,-0.21918464,0.47435048,0.4828312,0.048861813,-0.11044006,-0.2667667,-0.29771933,0.6347306,0.14299801,0.28774592,-0.7408407,-0.51839125,-0.2016756,0.29117018,0.10293961,0.14706771,-0.54042476,-0.28892902,0.048897706,0.23596875,0.7277885,0.51883316,0.3654718,0.30830547,-0.0986316,0.30571347,0.5026537,0.04917441,0.16303979,0.003156796,0.38532203,-0.28669685,0.17772654,-0.44180238,-0.30301392,0.29003248,0.077637166,1.1151646,0.6567704,0.020965237,0.58880776,0.19364902,-0.20887306,0.15860888,-1.2974468,-0.5755642,-0.55956227,0.5058279,0.41847956,-0.21439931,0.55556715,0.9743921,-0.21233207,-0.21181495,-0.39392903,-0.3337408,-0.012327135,0.13439423,-0.6169352,0.67622006,0.07238661,-0.49962246,0.17755602,-0.39176226,0.05058863,0.003127575,0.078358315,-0.057500593,-0.11222974,0.0039635748,0.6091613,-0.23220567,-0.13677666,-0.058827102,-0.69377184,-0.26514435,-0.47118324,-0.14321256,0.24515638,-0.5357779,-0.21572132,0.0021215081,2.3015056,0.33224916,-0.60098314,0.4347328,0.26829454,0.48180836,0.24073985,-0.33012548,-0.66602623,0.115940616,-0.8243942,-0.6011689,0.36189246,0.18568298,-0.3560828,0.7188558,-0.6571009,-0.18969518,0.2977341,-0.18629208,0.9247366,-0.07865451,-0.19522054,0.29162383,-0.15608007,-1.849126,-0.7246059,-0.48572895,0.11840643,0.26624402,-0.46071142,0.5143986,-0.6364104,0.17942071,-0.400549,0.51315147,0.90804625,-0.22826602,0.64107597,-0.2128416,0.96993554,0.45447424,0.24040274,-0.05739238,-0.2015993,-0.19784829,0.048106723,1.9531267,0.0733015,0.080389515,0.4787758,0.35555434,-0.85434145,-1.8237178,0.05734076,0.09569079,-0.16351533,0.9049572,-0.103293955,-0.6886367,0.4718669,0.9915546,0.2501216,0.0032512126,-0.9057409,1.5125098,-0.14955148,0.22668217,-0.47206417,0.37066168,0.025125451,-0.06796183,0.35794526,-0.66610307,0.3188907,0.7029942,0.048035525,0.29693854,0.21906166,0.7216922,0.7924102,-0.026041426,-0.20068045,0.14082368,0.08532241,0.21102221,0.5849206,0.09504147,-0.6577157,0.12573572],"result":{"type":"object","properties":{"message":{"description":"Success or error message","type":"string"},"success":{"description":"Whether the read operation was successful","type":"boolean"},"terminal_output":{"description":"The last N lines of terminal output","type":"string"}},"required":["terminal_output","success","message"]},"sql_tables":[],"sql_queries":[],"file_inbox":null,"oauth":null,"assets":null,"runner":"any","operating_system":["linux","macos","windows"],"tool_set":""},false]}