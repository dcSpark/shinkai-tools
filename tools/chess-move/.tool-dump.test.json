{"type":"Python","content":[{"version":"1.0.0","name":"Chess Move","homepage":null,"author":"@@official.shinkai","py_code":"# /// script\n# dependencies = [\n#   \"python-chess>=1.999\"\n# ]\n# ///\nimport chess\nfrom typing import Dict, Any, Optional, List\n\nclass CONFIG:\n    pass\n\nclass INPUTS:\n    fen: str\n    move_uci: str\n\nclass OUTPUT:\n    new_fen: str\n    is_legal: bool\n\nasync def run(c: CONFIG, p: INPUTS) -> OUTPUT:\n    if not p.fen:\n        raise ValueError(\"No FEN provided\")\n    if not p.move_uci:\n        raise ValueError(\"No UCI move provided\")\n\n    board = chess.Board()\n    try:\n        board.set_fen(p.fen)\n    except ValueError:\n        raise ValueError(\"Invalid FEN\")\n\n    # Validate the move format, e.g. \"e2e4\", \"e7e8q\"\n    if len(p.move_uci) < 4 or len(p.move_uci) > 5:\n        raise ValueError(f\"Move '{p.move_uci}' not in typical UCI format\")\n\n    move = None\n    try:\n        move = board.parse_uci(p.move_uci)\n    except:\n        pass\n\n    result = OUTPUT()\n    if move and move in board.legal_moves:\n        board.push(move)\n        result.is_legal = True\n        result.new_fen = board.fen()\n    else:\n        result.is_legal = False\n        result.new_fen = board.fen()  # unchanged\n\n    return result ","tools":[],"config":[],"description":"Apply a move in UCI format to a given FEN and return the resulting position","keywords":["chess","move","uci","fen","position","game"],"input_args":{"type":"object","properties":{"move_uci":{"type":"string","description":"Move in UCI format (e.g. 'e2e4')"},"fen":{"type":"string","description":"FEN describing the current position"}},"required":["fen","move_uci"]},"output_arg":{"json":""},"activated":false,"embedding":[-0.15459935,0.52410316,-0.13228855,-0.60107803,-0.65915674,0.18770486,-0.04643807,-0.56115365,-0.65973014,-0.37637365,0.40117237,0.17051405,-0.22080083,0.3487455,0.22745435,-0.6032681,-0.41406438,-0.08367267,-1.5550659,-0.009907104,-0.012711483,0.17528096,0.36410362,0.14769173,-0.47745222,-0.4103853,0.09542459,-0.090670824,-1.2316976,-2.151492,0.11053245,0.32421896,-0.48242286,-0.109743014,0.45238772,-0.6592636,-0.25276652,0.18281996,-0.21626306,-0.325755,-0.50433046,0.07863895,-0.110058844,0.1178435,0.45586246,0.1723077,0.18060082,-0.17357062,1.0711929,0.6677108,-0.893382,-0.30499876,-0.17373523,-0.22848484,-0.17654926,-0.36168203,0.4322034,-0.012896584,0.0034982655,0.08985911,-0.09937155,-0.16192284,-3.6785367,0.41640612,0.3853816,-0.09518128,0.2797362,0.6398924,0.14623162,0.50498027,0.13315746,0.29456106,0.19158208,0.45896986,0.34912506,-0.43875667,-0.15758878,-0.056297146,0.20805533,-0.6927878,-0.29981184,0.9321706,-0.1432168,0.1822821,-0.5911722,0.40812996,-0.14261425,-0.0143314,-0.06849784,0.016194105,-0.11936906,0.38861144,0.7108852,-0.35294828,-0.98419034,0.41674244,-0.013704342,0.9066323,0.06827061,3.0412269,0.37612766,-0.23230645,0.4299879,-0.35689515,0.4026237,-0.4494019,-0.08809468,-0.6843408,0.1718531,-0.34915018,-0.27376267,-0.3724747,-0.07992405,-0.74854696,-0.5809474,0.19434208,-0.09327024,-0.0073797926,-0.028455047,0.86758906,-0.689079,0.34977305,-0.11673698,0.15340689,0.20976701,-0.30956247,-0.635473,0.34557506,0.11870147,-0.026957352,0.7932727,0.9464809,-0.8552461,0.08024555,-0.0040388443,-0.2782132,0.50636774,-0.81769663,-0.2108989,-0.113978304,0.27445528,-1.3087913,1.4702561,-0.43752304,1.0357333,-0.08497656,-0.1243821,-0.2557311,-0.6190675,-0.55069107,-0.5356605,0.7226045,0.64898294,0.7616066,0.4723178,-0.22625841,-0.68852305,-0.13945879,-0.75467116,-0.031076722,-0.2255369,-0.2759186,0.31091505,0.41854912,0.44389117,-0.0033248868,0.2851862,0.65321577,-0.02312582,-0.18773454,0.17184535,-0.157114,0.10020087,0.5884095,0.43153372,0.28366318,0.6813203,-0.4824502,0.47365433,-0.5243367,0.03465645,0.5011116,-0.54997444,-0.25335404,0.10026336,0.54512364,0.25901476,0.0135957245,0.84329116,1.668616,-0.22546405,1.4497023,-1.1998209,-0.18366295,-0.11260646,0.5963995,0.30142045,-0.1012674,0.25029886,0.37686104,-0.2889851,-0.18487266,0.271568,0.21568911,0.088124014,-1.0443234,0.36032125,0.05154451,0.07356513,-0.016635124,0.10394901,-0.13468477,1.1452119,0.14744759,0.36646757,0.2703824,0.87409556,0.93111646,-0.13014334,0.14213264,-0.11323743,0.8664259,-0.60974425,-0.51372075,-1.205363,-0.3172962,-0.38749248,-0.6278058,-0.0033211652,0.068827204,0.11658561,0.08601044,0.25451666,1.0470169,0.6143278,-0.20775896,0.19671637,0.29591024,0.10910782,-0.91857094,0.3099023,0.30530348,-0.1064059,-0.44658804,0.10493675,-0.8806144,-0.32511714,0.2430427,0.1289085,2.1098592,1.2620499,0.3850207,0.36335048,0.67618334,-0.16854164,-0.27496782,-1.195156,-0.41756886,-0.028842978,0.29041198,-0.27672887,0.009214096,0.5628352,-0.40632838,0.023993136,-0.5763386,0.004459707,0.43915567,0.058272474,-0.119670495,-0.17419401,0.741682,-0.013117585,-0.15000153,-0.17717695,-0.0347018,-0.06989544,-0.57032526,-0.4552291,-0.0050806534,-0.056691043,-0.5799006,0.09888269,0.31567365,-0.2675561,-0.29851666,-0.45895648,-0.8828221,-0.1584433,0.26739594,-0.53411037,-1.2075108,-0.66895455,0.20761558,1.4658253,-0.6477175,-0.97833645,0.28954798,0.072527856,0.3807655,0.06957432,0.30776602,-0.29005465,0.5091793,-1.1054573,-0.714529,0.2143917,-0.39969945,0.034389105,1.0352175,0.12990671,0.004575629,0.307801,0.038889766,0.26592618,-0.1605781,-0.08339985,0.11351417,-0.39302927,-2.1130495,0.1876456,-0.2542768,0.015886754,-0.25728387,-0.680161,0.013008028,-0.54216355,0.13540547,-0.6211512,0.57476485,0.11770001,-0.03832862,0.49607813,-0.3521327,0.7551513,0.42369783,0.47814497,0.8440611,-0.11837206,0.59237564,0.05166831,1.2783127,0.23259942,0.74454045,-0.3041361,0.011235863,-0.43164474,-0.9640327,-0.1369015,0.20920806,-0.20023361,0.6500911,0.05683901,0.06762004,0.837542,0.41622147,0.1308178,-0.33542493,0.1729745,1.358938,0.048005827,0.19622405,0.051577874,-0.09710652,-0.435282,0.074783996,0.24424885,-0.242253,0.0036964566,-0.02908118,0.70304394,-0.94003946,0.37339595,0.014672628,1.4130626,0.8451342,-0.3027633,0.9850782,0.29972985,-0.038220625,0.6172405,-0.6178168,-0.80631834,0.3141085],"result":{"type":"object","properties":{"is_legal":{"type":"boolean"},"new_fen":{"type":"string"}},"required":["new_fen","is_legal"]},"sql_tables":null,"sql_queries":null,"file_inbox":null,"oauth":null,"assets":null,"runner":"any","operating_system":["linux","macos","windows"],"tool_set":""},false]}