{"type":"Deno","content":[{"name":"PDF Summarize to Audio","homepage":null,"author":"@@official.shinkai","version":"1.0.0","mcp_enabled":null,"js_code":"import { shinkaiLlmPromptProcessor, elevenLabsTextToSpeech, pdfTextExtractor } from './shinkai-local-tools.ts';\n\ntype CONFIG = {\n  promptStructure: string;\n  voicePrompt?: string\n};\n\ntype INPUTS = {\n  pdfURL: string;\n};\n\ntype OUTPUT = {\n  summaryText: string;\n  audioFilePath: string;\n  audiotext: string;\n};\n\nexport async function run(config: CONFIG, inputs: INPUTS): Promise<OUTPUT> {\n  // Step 1: Extract and clean text from the PDF using pdfTextExtractor\n  const extractedTextResult = await pdfTextExtractor({ url: inputs.pdfURL });\n  const pdfText = extractedTextResult.text; // Assume it returns a string with the PDF text\n\n  // Step 2: Summarize the text using ShinkaiLLPromptProcessor\n  const summarizedTextResult = await shinkaiLlmPromptProcessor({\n    format:'text',\n    prompt: `Summarize a text following these guidelines and structure:\n    <guidelines>\n    ${config.promptStructure}\n    </guidelines>\n    This is the text to summarize, please don't hallucinate and make sure you follow the guidelines:\n    <text>\n    ${pdfText}\n    </text>\n    `,\n  });\n  const summarizedText = summarizedTextResult.message;\n  let audiotext = summarizedText.replaceAll('*','').replaceAll('#',' ')\n  if (config.voicePrompt && config.voicePrompt.length > 10) {\n    audiotext = (await shinkaiLlmPromptProcessor({\n      format: 'text',\n      prompt: `Narrate a text using the following guidelines\n      <guidelines>\n      ${config.voicePrompt}\n      </guidelines>\n      The text to narrate is the following:\n      <text>\n      ${audiotext}\n      </text>\n      `\n    })).message\n    audiotext = audiotext.replaceAll('*','').replaceAll('#',' ')\n  }\n  // Step 3: Convert the summary text to speech using ElevenLabs Text to Speech\n  const audioData = await elevenLabsTextToSpeech({\n    text: audiotext\n  });\n\n  // Return the summary text and audio file path\n  return {\n    summaryText: summarizedText,\n    audiotext,\n    audioFilePath: audioData.audio_file,\n  };\n}","tools":["local:::__official_shinkai:::pdf_text_extractor","local:::__official_shinkai:::shinkai_llm_prompt_processor","local:::__official_shinkai:::eleven_labs_text_to_speech"],"config":[{"BasicConfig":{"key_name":"promptStructure","description":"The structure for the summarization prompt","required":true,"type":null,"key_value":null}},{"BasicConfig":{"key_name":"voicePrompt","description":"The narration guidelines for the audio output","required":false,"type":null,"key_value":null}}],"description":"Extracts text from a PDF, summarizes it, and converts the summary to speech.","keywords":["PDF","summary","text to speech","audio"],"input_args":{"type":"object","properties":{"pdfURL":{"type":"string","description":"The URL of the PDF to download and extract text from"}},"required":["pdfURL"]},"output_arg":{"json":""},"activated":false,"embedding":[1.0430502,-0.36822408,0.18124756,-0.33286968,-0.31970072,0.34648973,-1.0883565,0.4456781,0.32361707,-0.054536235,0.4574185,1.4832611,0.1829963,-0.39808366,0.112589404,-0.06869462,0.2570182,-0.6027356,-0.8940705,-0.32285938,0.119602084,1.3551804,0.18322846,0.16593285,0.36559057,0.14280745,0.096492395,-0.45477605,-0.7551252,-1.2636552,0.7248135,0.63849825,-0.11944938,0.27704325,-0.41716015,-0.9522995,0.15891895,-0.073348954,-0.4809897,0.19211365,-0.32114783,0.05357644,-0.20623064,-0.041943885,0.25635844,-0.14196652,0.27919465,-0.07273382,0.9280264,0.40221572,-0.746335,-0.7692729,0.019574516,0.47269282,0.027800538,-0.47334492,-0.021573864,-0.17048378,0.7644327,0.5127147,-0.34977305,-0.37254944,-3.6437485,0.30641177,0.29937863,0.38715625,-0.19281642,-0.29242706,-0.023115208,-0.021630786,-0.33254147,-0.11293035,-0.26861522,0.44599184,-0.6217796,-0.50788265,0.100806415,0.14382595,0.7985723,-0.42754647,-0.7352116,0.67421716,0.24519512,0.13850802,-0.725623,0.6506814,-0.48654908,-0.9153421,-0.24989763,0.31477818,-0.52167684,-0.3389732,-0.17024164,0.33526546,0.08747621,-0.24381034,0.31700826,-0.50697523,0.6181084,2.809979,0.8163641,0.3491552,0.054901358,-1.1345888,-0.3357717,-0.6245179,-0.33656505,-0.02248226,0.3999399,-0.12160603,0.9619574,-0.6920407,-0.5241709,-0.15006617,0.3872187,0.9972842,-1.0452877,0.027908485,-0.04898973,-0.11715616,-0.24670354,0.13120042,-0.10534969,-0.32617074,0.06739898,-0.10910341,-0.036363628,0.10223127,0.44270617,-0.19676968,0.20225745,-0.032856606,-0.7388329,0.30570328,0.16622761,0.13349476,0.854394,-0.91513866,0.59523445,0.34155434,0.11845299,-1.7262465,0.5158575,0.34197626,0.5936194,0.3255514,-0.8384223,-0.12059384,-0.10146583,-0.4174284,0.264666,0.5828912,0.10837382,-0.49539447,0.7884809,-0.5029447,-0.74281895,0.2060734,-0.5313592,0.30872497,0.041083466,-0.19292828,0.33081335,-0.47623652,0.085489795,-0.61282605,0.04170519,-0.4568021,0.22313096,0.49906123,0.23266104,-0.67588216,0.49547353,0.8496666,0.68171316,-0.98642385,0.011427492,0.17623666,0.1454605,-0.32043263,0.45034286,0.04803396,-0.53869766,-0.23267725,-0.1810831,0.28482512,0.14946325,-0.003437588,0.77935433,1.2087784,0.08840763,1.7776093,-0.989171,-0.17407893,-0.123955615,0.04218878,-0.008782707,-0.30908734,0.1394671,0.09834291,0.23001745,-0.07303985,-0.43782428,0.09036449,-0.023926176,-0.72348994,-0.537034,0.688529,-0.50760114,-0.5583472,0.21683519,-0.012749165,0.60217345,0.092581555,-0.20840713,0.21637686,-0.4992758,0.21202101,-0.620731,0.20441186,0.28434423,-0.46489173,-0.4105453,-0.3642225,-0.5380819,0.75164074,0.124286614,-0.21340948,-0.48466057,-0.23582889,0.6262428,0.74986625,0.9548765,1.0451826,0.34379193,0.21633212,0.08360515,0.1032381,0.20734787,-0.24553797,0.4684361,0.21449326,0.27967256,0.56238675,0.14535052,-0.4412565,-0.23622048,0.07234347,-0.24375643,1.877321,-0.3366203,0.13006112,0.9416525,0.8342512,0.815481,0.2162059,-1.5359386,-0.44943088,-0.69467074,0.41746327,-0.26835227,0.33975092,0.29123226,0.5320813,-0.0526915,-0.6292991,-0.30080682,-0.791829,0.034967527,0.014005363,-0.13488768,-0.24704535,-0.37662756,-0.55226666,0.33919477,0.22011448,0.010490037,0.43909726,-0.65335786,-1.0132226,0.5191855,-0.15574118,0.4073069,0.5284482,-0.40120804,-0.032460894,0.6022125,-0.6365817,0.116695836,0.58725893,-0.4129753,-0.8014661,-0.46988493,0.26666504,1.5951462,-0.024389692,-0.25742525,1.0975562,0.09735102,-0.23342107,-0.6115861,-0.20536798,-0.69486094,0.31494376,-0.40038994,-0.25556612,0.23938131,0.1876477,-0.24357522,0.92544913,-0.8309379,-0.31844375,0.12794656,-0.22684762,0.5106748,-0.2923408,0.16618422,0.41379967,-0.3269194,-2.2771077,-0.537662,0.26176247,0.6541062,-0.7941954,0.2443717,0.6386557,-0.12799737,-0.08584529,-0.21433666,0.94883287,0.061933212,-0.46519902,-0.5985909,-0.15345742,1.2373506,-0.059265442,0.24369997,-0.4174696,-0.4811456,-0.18343458,0.6473622,1.2083421,0.3534338,0.9179357,-0.22343923,0.047185242,-0.18394217,-1.1850486,0.116891295,-0.2015742,-0.72875994,0.5961394,-0.42721176,0.17925662,0.5498914,0.45532766,0.29650712,0.2154731,-0.30735675,2.0083647,0.07953477,-0.0032461043,-0.28153405,-0.45083702,0.6219858,0.2391723,0.70695084,-1.1416376,-0.23750983,0.54172355,0.87817055,-0.46992916,0.68364596,0.21409307,0.79262924,0.3943541,0.104531884,0.3547703,0.2879302,0.30994272,0.32509995,-0.42854115,-0.44460508,-0.40847802],"result":{"type":"object","properties":{"audioFilePath":{"description":"The local file path of the generated audio","type":"string"},"audiotext":{"description":"The trasncribed audio","type":"string"},"summaryText":{"description":"The summarized text from the PDF","type":"string"}},"required":["summaryText","audioFilePath"]},"sql_tables":[],"sql_queries":[],"file_inbox":null,"oauth":[],"assets":null,"runner":"any","operating_system":["linux","macos","windows"],"tool_set":""},false]}