{"type":"Python","content":[{"name":"YouTube Search","tool_router_key":"local:::__official_shinkai:::youtube_search","homepage":null,"author":"@@official.shinkai","version":"1.0.0","mcp_enabled":null,"py_code":"# /// script\n# dependencies = [\n#   \"requests>=2.28.0\"\n# ]\n# ///\n\nimport requests\nimport json\nfrom typing import List, Dict, Optional\n\nclass CONFIG:\n    SERP_API_KEY: str\n\nclass INPUTS:\n    search_query: str\n    gl: Optional[str] = \"us\"\n    hl: Optional[str] = \"en\"\n    max_results: Optional[int] = 10\n\nclass OUTPUT:\n    results: List[Dict[str, str]]\n    query: str\n\nasync def run(c: CONFIG, p: INPUTS) -> OUTPUT:\n    if not c.SERP_API_KEY:\n        raise ValueError(\"SERP_API_KEY not provided in config.\")\n    if not p.search_query or not p.search_query.strip():\n        raise ValueError(\"No search query provided.\")\n\n    url = \"https://serpapi.com/search\"\n    params = {\n        \"engine\": \"youtube\",\n        \"search_query\": p.search_query.strip(),\n        \"api_key\": c.SERP_API_KEY,\n        \"hl\": p.hl,\n        \"gl\": p.gl,\n    }\n\n    resp = requests.get(url, params=params)\n    if resp.status_code != 200:\n        raise RuntimeError(f\"YouTube search failed with HTTP {resp.status_code}: {resp.text}\")\n\n    data = resp.json()\n    video_results = data.get(\"video_results\", [])\n    \n    videos = []\n    for item in video_results[:p.max_results]:\n        video = {\n            \"title\": item.get(\"title\", \"Untitled\"),\n            \"link\": item.get(\"link\", \"\"),\n            \"thumbnail\": item.get(\"thumbnail\", {}).get(\"static\", \"\"),\n            \"channel\": item.get(\"channel\", {}).get(\"name\", \"Unknown\"),\n            \"views\": item.get(\"views\", \"0\"),\n            \"duration\": item.get(\"duration\", \"\")\n        }\n        videos.append(video)\n\n    output = OUTPUT()\n    output.results = videos\n    output.query = p.search_query.strip()\n    return output\n","tools":[],"config":[{"BasicConfig":{"key_name":"SERP_API_KEY","description":"Your SerpAPI key for authentication","required":true,"type":null,"key_value":null}}],"description":"Searches YouTube for videos via SerpAPI. Requires SERP_API_KEY in configuration.","keywords":["youtube","serpapi","video","search"],"input_args":{"type":"object","properties":{"search_query":{"type":"string","description":"The search query for YouTube videos"},"gl":{"type":"string","description":"Geolocation (country code). E.g. 'us', 'uk'"},"hl":{"type":"string","description":"Language code. E.g. 'en', 'es'"},"max_results":{"type":"number","description":"Maximum number of results to return"}},"required":["search_query"]},"output_arg":{"json":""},"activated":false,"embedding":[-0.10238195,0.027044676,0.07059783,-0.47806537,-1.5507703,-0.7801036,-0.9591214,-0.40728983,-0.32462013,-0.16774571,-0.60643256,0.7403481,-0.17600791,0.23992342,0.42922246,-0.25842717,0.40817404,-0.26757824,-0.78685665,-0.062848814,0.47057858,0.57483804,-0.2946663,0.21942978,-0.460145,0.35084173,0.18528908,-1.0055735,-1.6508696,-1.8296489,0.2870665,0.9751562,0.16040014,0.010812499,-0.36855036,-0.12653336,0.13280554,0.046429746,-0.09579651,0.22489636,-0.013449748,0.25271112,-0.5648803,-0.05901299,-0.6882119,-0.13886628,1.1401621,-0.44161132,1.3896332,0.3239572,-0.08245996,0.33472443,-0.63850695,0.39178407,-0.617696,-0.18128373,-0.58331347,0.23317151,0.5486693,-0.20352887,0.75613075,0.2415767,-3.8877544,-0.61318046,-0.001491325,0.26404247,0.22244355,-0.22355902,0.5966495,0.086872324,-0.36594698,0.4320133,0.02714976,0.39810377,-0.5046179,-0.90188354,0.11595449,-0.31804788,0.20215696,-0.49836925,0.7711245,-0.07028416,-0.06902212,-0.8138152,0.039878283,-0.017922401,-0.16305494,-0.0917069,0.3970241,0.6305423,-0.5498468,0.27405995,0.47356316,-0.30771264,-0.49254984,-0.2493078,0.20946667,-0.30078086,0.18763892,2.518437,0.7742787,0.24992014,0.87900007,-0.97982305,-0.03480254,0.02946946,0.7393081,-0.07339906,0.0248566,0.8239302,-0.46448866,0.16504352,0.92727673,0.33762106,0.11960022,-0.216504,0.2177426,0.06255445,0.38022068,1.2065688,-0.48714936,-0.25031987,-0.7497036,0.18359852,-0.05399675,-0.18261915,-0.8999411,0.29721376,0.35427967,-0.34529412,0.3940413,-0.7942846,-0.4941459,0.27385184,-0.037822515,0.14381075,0.1254654,-0.74060905,0.03493046,-0.22085318,-0.60711575,-1.039684,0.97594625,-0.15352608,0.28475845,0.56468576,0.008171938,0.45304158,-0.73130876,-0.24055845,0.63473356,0.081143595,0.44780234,0.2636073,0.65463656,-0.3343085,-0.49026495,-0.22742406,-0.5803882,0.3487027,-0.5519172,-0.06691372,-0.100479856,0.11530455,0.21547669,-0.44106305,0.33806106,0.19424477,0.64126456,-0.0782478,0.3788399,0.47606805,0.023468584,-0.047100663,-0.40095794,-0.09226239,-1.4392756,-0.124030046,0.40069652,-0.2609467,-0.28824827,0.40516344,0.14848422,-0.122348376,-0.94293755,0.50099695,0.0561098,0.13504308,1.0406607,1.1172558,-0.7709114,1.9399112,-0.859357,-0.58331543,0.62340665,0.29655808,-0.50547945,0.4639737,-0.39351797,-0.4883701,-0.6907419,-0.25966322,-0.23264726,-0.13408227,-0.58643305,0.06328057,0.49001604,0.10853927,-0.14484367,-0.3249969,0.7354898,-0.5405662,0.42549118,0.16569069,0.38332087,0.029372666,-0.090883106,-0.30776042,-0.79299957,0.3627174,0.2458348,0.44291028,-0.25579488,-0.54178196,0.053396616,0.2732864,-0.63633883,0.5076063,-0.7620497,-0.4164472,0.41253918,1.1039468,0.120536216,1.3598411,0.74169296,0.23177633,-0.072893046,0.35403883,0.3618318,-1.0348569,0.45921487,-0.28478128,-0.25132412,-0.74059963,-0.30440316,-0.79384995,0.15686193,0.049091548,-0.16842604,1.4539924,1.7192899,0.5764727,0.34494388,0.5905941,0.39551148,0.3394538,-1.5360999,-0.05332314,0.10345281,-0.26168168,-0.3053835,0.2826082,0.0909774,0.15627104,0.06428468,0.11799638,-0.5760713,-0.7025819,-0.036609676,-0.65007544,-0.009179439,0.71797436,0.32888567,-0.026398808,-0.35651353,0.061762452,-0.48824397,-0.03215383,-1.0462562,-0.1391378,0.49647957,-0.34171033,0.17059231,-0.46363944,-0.8732998,0.059204586,-0.7487833,0.94065315,-0.276282,0.8767613,-0.52573025,-0.19636995,-0.31075162,0.38827077,1.433477,-0.22350714,0.53204817,0.93333876,-0.37259087,0.39601064,-0.9878876,-0.16884252,0.5207682,0.16484284,-0.17898604,-0.28109607,1.0479093,-0.519992,-0.21916017,0.091312334,-0.31826013,0.9758176,-0.15855308,-0.40288696,0.6846113,-0.75706667,0.26021156,1.0818523,-0.073371276,-1.4008151,-0.04770972,-0.18913695,-0.37634206,-0.18853602,-0.8223881,0.5377353,0.048958033,0.31678256,0.007438585,1.6106849,-0.0069136973,0.06848529,-0.29874977,0.36434785,0.09643026,-0.42878813,0.14577293,-0.029809937,-1.1882055,-0.7297572,0.4407727,1.545167,1.1879178,0.37459335,0.46870825,-0.068631925,-0.3717035,-0.8742316,0.62995195,-0.10158999,-0.81598204,1.1592926,0.08327553,-0.29206452,0.45692268,0.47707778,0.5358438,-0.2770151,0.23827413,1.6022385,0.13177146,0.08476523,0.086137585,0.78643554,0.29906455,0.15760002,-0.49869195,-0.5572135,0.6590542,-0.3671752,0.32323796,-0.60364264,0.57519305,-0.3888685,0.10300031,1.0642021,0.10528439,0.63368297,0.5779636,0.15230915,0.06884643,0.34780505,-0.30367842,-0.2217337],"result":{"type":"object","properties":{"query":{"description":"The original search query","type":"string"},"results":{"description":"List of video search results","items":{"properties":{"channel":{"type":"string"},"duration":{"type":"string"},"link":{"type":"string"},"thumbnail":{"type":"string"},"title":{"type":"string"},"views":{"type":"string"}},"type":"object"},"type":"array"}},"required":["results","query"]},"sql_tables":null,"sql_queries":null,"file_inbox":null,"oauth":null,"assets":null,"runner":"any","operating_system":["linux","macos","windows"],"tool_set":""},false]}