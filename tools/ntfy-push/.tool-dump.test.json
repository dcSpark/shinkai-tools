{"type":"Deno","content":[{"name":"Ntfy Push Notifications","homepage":null,"author":"@@official.shinkai","version":"1.0.0","js_code":"import axios from 'npm:axios@1.7.7';\n\ntype Configurations = {\n  serverUrl?: string;\n};\n\ntype Parameters = {\n  topic: string;\n  message: string;\n  title?: string;\n  priority?: 'min' | 'low' | 'default' | 'high' | 'urgent';\n  tags?: string;\n};\n\ntype Result = {\n  success: boolean;\n  message: string;\n};\n\nexport type Run<C extends Record<string, any>, I extends Record<string, any>, R extends Record<string, any>> = (\n  config: C,\n  inputs: I\n) => Promise<R>;\n\nexport const run: Run<Configurations, Parameters, Result> = async (\n  configurations: Configurations,\n  params: Parameters\n): Promise<Result> => {\n  try {\n    const serverUrl = configurations?.serverUrl || 'https://ntfy.sh';\n    const { topic, message, title, priority, tags } = params;\n\n    // Build request headers\n    const headers: Record<string, string> = {\n      'Content-Type': 'text/plain',\n    };\n\n    if (title) {\n      headers['Title'] = title;\n    }\n\n    if (priority) {\n      headers['Priority'] = priority;\n    }\n\n    if (tags) {\n      headers['Tags'] = tags;\n    }\n\n    // Send notification using ntfy's HTTP API\n    const response = await axios.post(\n      `${serverUrl}/${topic}`,\n      message,\n      { headers }\n    );\n\n    if (response.status === 200) {\n      return {\n        success: true,\n        message: 'Notification sent successfully'\n      };\n    } else {\n      return {\n        success: false,\n        message: `Failed to send notification: HTTP ${response.status}`\n      };\n    }\n  } catch (error) {\n    let errorMessage = 'An unknown error occurred';\n    if (error instanceof Error) {\n      errorMessage = error.message;\n    }\n    return {\n      success: false,\n      message: `Error: ${errorMessage}`\n    };\n  }\n};\n","tools":[],"config":[{"BasicConfig":{"key_name":"serverUrl","description":"The ntfy server URL. Defaults to https://ntfy.sh if not provided.","required":false,"type":null,"key_value":null}}],"description":"Sends push notifications to specific groups using ntfy. Supports message priority, tags, and titles.","keywords":["ntfy","notifications","push","shinkai"],"input_args":{"type":"object","properties":{"topic":{"type":"string","description":"The topic/group to send the notification to. Acts as a channel for notifications."},"message":{"type":"string","description":"The notification message content"},"priority":{"type":"string","description":"Priority level of the notification. Affects how urgently the notification is delivered."},"title":{"type":"string","description":"Optional title for the notification"},"tags":{"type":"string","description":"Comma-separated list of tags. Can include emoji shortcodes."}},"required":["topic","message"]},"output_arg":{"json":""},"activated":false,"embedding":[0.22053008,-0.23308788,-0.45831287,-0.8216395,0.2060047,0.097966015,-0.60396683,0.31266215,0.2907155,-0.21612851,0.2162723,0.72355556,-0.42486846,-0.096117765,0.2819585,-0.24924275,0.23125264,-1.4162096,-1.6513793,0.52792203,-0.113545924,1.2946557,0.55482364,0.24141155,0.31373122,-0.5510993,-0.47869053,0.6213199,-0.3392297,-1.6577462,-0.08671852,0.9687446,-0.4529897,-0.2479738,0.054232515,0.14903739,-0.051238056,-0.16253081,-0.81651855,0.13794206,0.09594439,-0.2942096,-0.50189894,0.44979304,-0.23004755,-0.29039463,0.20756322,-0.018597037,0.13946295,0.5400521,0.06574689,0.17728776,-0.11698468,0.60064995,-0.27636495,0.02254577,-0.12050481,0.7368309,0.117831066,0.6379093,-0.078697965,0.4874056,-2.9534228,0.3453095,0.11381041,-0.14073756,-0.67365813,-0.31909502,0.26497966,-0.31905812,0.5888301,-0.39705887,-0.314874,0.8191168,-0.44242212,-0.6584438,0.157062,0.42796382,-0.014322706,0.32363078,0.03927198,0.82547253,0.076867595,-0.59535795,-0.8928584,0.5248866,-0.6197831,-0.43569222,-0.44033188,0.63102114,-0.5330492,0.09979509,0.40482882,0.10063244,-0.7705069,0.21489316,0.17107399,0.9237502,1.0151036,3.3003685,0.5650762,0.6833879,-0.017996378,-0.28243905,0.68769544,-0.3291847,-0.4397267,-0.2662798,-0.08094765,-0.35823697,0.1263233,-0.6098179,-0.53893936,-0.49382973,0.014272803,0.46858513,-0.6225431,0.25171924,-0.13711403,0.73455286,0.21732822,-0.15321752,-1.5502243,-0.9504878,-0.19396608,0.2386984,-1.1704068,0.2335211,0.44238636,-0.11372779,0.45646274,-0.5107696,-0.7328424,-0.31691357,-0.71409506,0.1450852,0.5052389,-0.20677437,-0.0895473,-0.39498624,0.8960275,-1.5312064,1.2054399,0.03215282,0.25789875,-0.409857,-0.044123173,-0.4313174,-1.2743952,0.31412846,-0.12804607,-0.11513892,0.50054383,-0.006194148,0.46024692,-0.23948848,0.24171092,0.648865,-0.615761,-0.2576605,-0.023038635,-0.22250779,0.26389396,0.39702743,0.54212725,-0.47864217,0.1738223,-0.43455857,0.37347978,0.3115453,0.13095196,0.046394788,0.30588624,0.057854246,-0.10528853,0.15796155,0.1237129,-0.3147446,0.72842425,-0.6495607,0.43106335,-0.041189097,-0.7907367,-0.1179979,-0.49566233,0.13492045,0.2547516,-0.35382986,0.84132266,0.5025265,-0.69758654,1.1305681,-0.44769102,-0.34780714,0.34184107,-0.5775259,-0.32568657,0.7512449,0.10083984,0.5954811,-0.59243476,-0.97330236,-0.32861063,-0.07467289,-0.98788744,-1.0931531,1.4558731,0.6624791,0.4054293,0.013877079,0.1940619,-0.1374109,0.4864646,0.18795654,0.18938848,-0.15176845,-0.33596444,0.3555235,0.01038894,0.25913802,0.6149691,0.42421773,-0.8724932,-0.50436306,-0.5054236,-0.40212184,-0.22209683,-0.3047288,-0.4665416,-0.49064946,-0.3677456,1.1156268,0.82560396,0.79798573,0.8286371,-0.0014434606,-0.3822465,0.81328964,0.66995645,-0.088342726,0.11401273,0.032993156,0.07968558,-0.410572,0.73188096,-0.17468107,0.0020657256,0.31107202,0.0020445567,1.3651462,0.4879689,0.3696962,0.89271903,-0.36121035,0.4573343,-0.79111093,-1.349992,0.35418445,-0.33507717,0.9499192,0.5084691,-0.36902204,0.53466314,0.079748794,0.003542827,0.3986133,-1.0402333,-0.06560193,-1.0191486,0.06899493,0.30530143,0.44587737,-0.86903197,-0.059978314,-0.38182685,-0.6374546,0.08173709,0.4117767,-0.34475413,-0.047856852,0.08340658,0.7555613,0.37293187,0.51895267,-0.18685904,-0.8161876,-0.5463563,-0.57206035,-0.7052285,0.42715633,-0.30013555,-0.25319588,-0.6610463,0.3081457,2.0190918,0.8826412,-0.28581515,0.13308282,0.5041968,0.17998149,0.24239567,-0.08905003,-0.64134145,-0.40685892,-1.0533433,-0.34681427,0.31865114,-0.46428257,-0.27486685,0.14497258,0.3734764,0.751666,0.32935518,-0.54193693,0.61391586,-0.37419972,-0.17420797,0.95534813,-0.1581281,-1.5987502,0.25759137,1.0456547,0.2302239,-0.6927719,-0.8352292,0.7477316,0.085436545,-0.31056505,-0.060424514,1.6970961,-0.012485772,-0.34271663,-0.7946064,-0.19418617,0.40684026,-0.36927694,0.5949851,0.2533793,-0.37646776,-0.5808698,0.49802795,1.4580505,0.015968803,0.28370604,-0.532292,-0.025305852,-0.16036057,-0.8079592,1.0513912,0.2740907,-0.23885982,0.6588762,-0.063837245,-0.47050068,0.3712828,1.0858387,-0.25099015,0.025424618,-0.20300305,1.5445518,0.5405677,0.37430054,-0.63216126,0.3001759,0.015945949,-0.7286671,0.6929011,-0.27199253,-0.61984885,0.7034571,0.015405629,-0.18663794,0.42980376,-0.2493029,0.35709202,-0.17907648,-0.020619806,0.28485912,0.52090824,0.759571,-0.10535569,0.09427047,-1.2930019,0.37343073],"result":{"type":"object","properties":{"message":{"description":"Success message or error details","type":"string"},"success":{"description":"Whether the notification was sent successfully","type":"boolean"}},"required":["success","message"]},"sql_tables":null,"sql_queries":null,"file_inbox":null,"oauth":null,"assets":null,"runner":"any","operating_system":["linux","macos","windows"],"tool_set":""},false]}