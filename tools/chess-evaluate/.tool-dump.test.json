{"type":"Python","content":[{"version":"1.0.0","name":"Chess Evaluate","homepage":null,"author":"@@official.shinkai","py_code":"# /// script\n# dependencies = [\n#   \"python-chess>=1.999\",\n#   \"requests\"\n# ]\n# ///\n\nimport chess\nfrom typing import Dict, Any, Optional, List\n\nclass CONFIG:\n    pass\n\nclass INPUTS:\n    fen: str\n    depth: int = 15\n    time_limit_ms: int = 1000  # fallback if depth is small\n\nclass OUTPUT:\n    message: str\n\nasync def run(c: CONFIG, p: INPUTS) -> OUTPUT:\n    if not p.fen:\n        raise ValueError(\"No FEN provided\")\n    # Validate FEN\n    board = chess.Board()\n    try:\n        board.set_fen(p.fen)\n    except ValueError:\n        raise ValueError(\"Invalid FEN\")\n\n    # Basic evaluation based on material count and position\n    def evaluate_position(board: chess.Board) -> float:\n        # Material values\n        piece_values = {\n            chess.PAWN: 1,\n            chess.KNIGHT: 3,\n            chess.BISHOP: 3,\n            chess.ROOK: 5,\n            chess.QUEEN: 9,\n            chess.KING: 0  # Not counted in material\n        }\n        \n        score = 0\n        \n        # Count material\n        for piece_type in piece_values:\n            score += len(board.pieces(piece_type, chess.WHITE)) * piece_values[piece_type]\n            score -= len(board.pieces(piece_type, chess.BLACK)) * piece_values[piece_type]\n        \n        # Position evaluation bonuses\n        if board.is_checkmate():\n            if board.turn == chess.WHITE:\n                score = -1000  # Black wins\n            else:\n                score = 1000  # White wins\n        elif board.is_stalemate() or board.is_insufficient_material():\n            score = 0\n        \n        # Convert to centipawns\n        score = score * 100\n        \n        return score\n\n    # Get evaluation\n    score = evaluate_position(board)\n    \n    # Format message\n    if abs(score) >= 1000:\n        if score > 0:\n            message = \"Mate for White\"\n        else:\n            message = \"Mate for Black\"\n    else:\n        message = f\"Evaluation: {int(score)} centipawns (White-positive)\"\n\n    out = OUTPUT()\n    out.message = message\n    return out ","tools":[],"config":[],"description":"Evaluate a chess position using Stockfish at a given depth","keywords":["chess","stockfish","evaluation","analysis","engine","position"],"input_args":{"type":"object","properties":{"fen":{"type":"string","description":"FEN describing the position to evaluate"},"depth":{"type":"number","description":"Depth for the engine search"},"time_limit_ms":{"type":"number","description":"Time limit in milliseconds if depth is small"}},"required":["fen"]},"output_arg":{"json":""},"activated":false,"embedding":[0.039340787,0.84976554,-0.048400175,-0.75149715,-0.8241907,0.040527746,0.35537875,-0.82708794,-0.13831224,-0.19995527,-0.23598726,0.10605708,0.4176126,-0.29368374,0.082493216,-0.7560053,-0.22705139,0.4942831,-1.7596347,0.17607617,-0.1616195,0.16861348,0.17923269,0.064881794,-0.073010765,-0.36077556,0.13652703,-0.27277833,-1.0168302,-2.250052,0.57978517,0.36868683,-0.66226625,-0.18846956,-0.18992513,-0.2681852,-0.25106966,0.27627757,-0.28679723,-0.16792488,-0.11629952,0.8356337,-0.44407615,0.2077041,0.5719315,0.39975762,-0.24397068,-0.056428805,1.2067331,0.3894527,-0.868289,-0.62991285,-0.5598233,-0.12093513,-0.117422655,-0.10088652,0.0011815894,-0.776767,-0.32825705,0.084796056,0.04281304,0.051024698,-3.6833708,-0.009884564,0.8788243,-0.05453892,0.71624637,0.26544857,-0.000186475,0.4112898,-0.16160509,-0.1293165,0.05449301,-0.25842476,0.2430827,-0.255536,0.2920391,-0.18327102,0.44669384,-0.5074555,-0.16129236,0.72264636,0.17260398,0.23183402,-0.28684738,0.39659002,-0.20401642,-0.038235374,0.017026864,0.26097113,0.1822086,-0.21666622,0.26845637,-0.31641096,-0.8956318,0.6925638,-0.30537504,0.9964554,-0.022302054,3.2505653,0.810214,-0.22424987,0.4485013,-0.7241608,0.435453,-0.21542981,-0.03318469,-0.28002614,0.16763867,-0.07117268,-0.39624023,-0.3556778,-0.09584972,0.29186332,-0.6944502,0.64943147,-0.4237783,-0.29573956,-0.12637438,0.34015676,-0.5607023,0.34500518,0.38876665,0.16717806,0.4313776,-0.281816,-0.79047936,0.46272117,0.4289002,0.19513221,0.5725362,0.12025954,-1.1734108,0.052971154,0.5250664,-0.18190345,-0.15563042,-0.84286606,-0.16132808,-0.46103385,-0.33658564,-1.3643967,1.1678154,-0.33756685,0.5968766,-0.47433525,-0.02156227,0.30262086,-0.758723,-0.37244275,-0.22987522,0.77780336,0.0666845,-0.04299944,0.60458285,0.21813847,-0.69879234,0.124562785,0.16909856,-0.41957843,-0.35144776,0.09430825,0.4609223,0.13254148,0.2502465,-0.52087855,0.027168065,0.54278,0.48548174,-0.16710347,-0.014250502,-0.116799526,-0.20613001,-0.08558345,0.023550056,-0.15783122,0.22473595,0.21280399,0.27426395,-0.08214766,0.15201503,0.4899159,-0.29800195,-0.4215098,0.094150305,0.18428743,0.040249377,0.123627976,0.2610366,1.4250892,-0.04282876,1.728094,-0.4786381,-0.17042315,-0.08324982,0.491134,-0.5636603,0.44835967,0.3925725,-0.31762332,-0.34197503,-0.22147581,-0.08612251,-0.015140444,-0.45663267,-0.88175786,0.84806615,-0.48877054,0.21551576,-0.052041452,-0.17219341,0.21399657,0.36138695,0.46254018,0.3559804,0.7746402,0.41122434,0.53846836,0.37752417,0.48966283,0.23468897,-0.16868716,-0.5668296,-0.63710546,-0.56973714,-0.03876677,-0.7117253,-0.56571573,-0.8255053,-0.24698974,0.13889675,0.5316141,0.65924263,0.7633866,1.1496713,0.016212434,0.23153493,0.5690071,0.13182896,-0.28505045,0.598891,0.56415254,-0.9138994,-0.32413054,0.32054013,-0.6427245,0.055843517,0.41222018,-0.43644536,2.102999,1.276781,0.18958832,0.42189932,0.6219906,0.21960008,0.16967306,-0.959263,-0.14748044,-0.26983216,0.15043268,-0.76606804,-0.48370507,0.66000766,-0.50564075,-0.25660598,0.019289143,-0.13984992,0.2557712,-0.10248597,-0.15407827,-0.59970486,0.9731769,0.2286297,0.057951577,-0.006322624,0.08877535,0.16519274,0.0926234,-0.8618588,-0.044915713,-0.32219446,-0.2695802,0.2993928,-0.16310321,-0.39187378,-0.40396062,-0.22212343,-0.47712374,-0.057272635,0.44927388,-0.34361237,-0.67901444,-0.2518763,0.37155676,0.86461294,0.018410005,-0.2673508,0.50059086,0.3759299,0.9463687,-0.62516505,0.42379576,0.031587012,0.8816637,-0.1846982,-0.39565152,0.089516595,-0.060103085,-0.7289362,0.03345154,-0.037084263,-0.35753095,0.24235389,-0.24201196,0.26875627,-0.33935168,0.4002085,0.43168697,-0.3027847,-2.0900226,-0.39522842,0.05940211,0.6479115,-0.16650274,-0.49591792,0.15279832,-0.6695172,-0.5988178,-0.56353307,0.7588471,0.07301231,-0.08317193,-0.24941762,-0.040407877,0.63943696,-0.41415343,-0.04982695,0.5847271,-0.9186146,0.18547523,0.1854054,1.555254,0.57946724,1.0698681,0.24515939,0.543661,-0.7802806,-0.6917264,0.698998,0.61085385,-0.22370987,0.6422112,-0.14474832,0.21174338,0.88892555,0.4149573,-0.209373,0.11551093,0.13402906,1.2465987,-0.116679,0.14056782,0.35788172,0.46083736,-0.40614516,0.07535764,-0.39772135,-0.4350933,0.3060971,0.6445867,0.33568278,-0.5986071,0.3816093,0.07217738,1.0115882,0.46708518,0.11361255,0.7352574,0.30566666,-0.22631656,-0.2864064,-0.6810513,-1.276088,0.31598204],"result":{"type":"object","properties":{"message":{"type":"string"}},"required":["message"]},"sql_tables":null,"sql_queries":null,"file_inbox":null,"oauth":null,"assets":null,"runner":"any","operating_system":["linux","macos","windows"],"tool_set":""},false]}