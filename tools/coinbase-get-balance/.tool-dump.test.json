{"type":"Deno","content":[{"name":"Coinbase Balance Getter","tool_router_key":"local:::__official_shinkai:::coinbase_balance_getter","homepage":null,"author":"@@official.shinkai","version":"1.0.0","mcp_enabled":null,"js_code":"import { Coinbase, CoinbaseOptions } from 'npm:@coinbase/coinbase-sdk@0.0.16';\n\ntype WalletBalances = { [key: string]: number };\n\ntype Configurations = {\n  name: string;\n  privateKey: string;\n  walletId?: string;\n  useServerSigner?: string;\n};\ntype Parameters = {\n  walletId?: string;\n};\ntype Result = {\n  message: string;\n  balances: WalletBalances | null;\n};\nexport type Run<C extends Record<string, any>, I extends Record<string, any>, R extends Record<string, any>> = (config: C, inputs: I) => Promise<R>;\n\nexport const run: Run<Configurations, Parameters, Result> = async (\n  configurations,\n  params,\n): Promise<Result> => {\n  const coinbaseOptions: CoinbaseOptions = {\n    apiKeyName: configurations.name,\n    privateKey: configurations.privateKey,\n    useServerSigner: configurations.useServerSigner === 'true',\n    debugging: true,\n  };\n  const coinbase = new Coinbase(coinbaseOptions);\n  const user = await coinbase.getDefaultUser();\n\n  // Prioritize walletId from Params over Config\n  const walletId = params.walletId || configurations.walletId;\n\n  // Throw an error if walletId is not defined\n  if (!walletId) {\n    throw new Error('walletId must be defined in either params or config');\n  }\n\n  const wallet = await user.getWallet(walletId);\n  console.log(`Wallet retrieved: `, wallet.toString());\n\n  // Retrieve the list of balances for the wallet\n  const balances = await wallet.listBalances();\n  console.log(`Balances: `, balances);\n\n  // Convert balances to WalletBalances\n  const balanceMap: WalletBalances = {};\n  for (const [currency, amount] of balances) {\n    balanceMap[currency] = amount.toNumber();\n  }\n\n  return {\n    message: `Balances: ${JSON.stringify(balanceMap)}`,\n    balances: balanceMap,\n  };\n};\n","tools":[],"config":[{"BasicConfig":{"key_name":"name","description":"The name of the Coinbase wallet","required":true,"type":null,"key_value":null}},{"BasicConfig":{"key_name":"privateKey","description":"The private key of the Coinbase wallet","required":true,"type":null,"key_value":null}},{"BasicConfig":{"key_name":"walletId","description":"Optional wallet ID for specific wallet selection","required":false,"type":null,"key_value":null}},{"BasicConfig":{"key_name":"useServerSigner","description":"Optional server signer configuration","required":false,"type":null,"key_value":null}}],"description":"Tool for getting the balance of a Coinbase wallet after restoring it","keywords":["coinbase","balance","shinkai"],"input_args":{"type":"object","properties":{"walletId":{"type":"string","description":"Optional wallet ID to get balance for a specific wallet"}},"required":[]},"output_arg":{"json":""},"activated":false,"embedding":[-0.11248109,0.2178072,-0.019508962,-0.32678038,0.017282102,-0.04292681,0.12427371,0.23522988,-0.05005879,-0.39188564,-0.23560804,0.1409249,0.025314197,-0.14586236,0.2661458,-0.17861539,0.1394318,-0.46649683,-1.2716451,-0.044733204,0.22754194,0.56203437,-0.6181459,0.37775975,-0.5643512,-0.14724687,-0.48301688,-0.0036682487,-1.6356487,-2.340583,0.020886216,1.0987194,-0.06784244,-0.25694257,-0.6406222,-0.058244545,0.04676059,0.3032862,-0.5963308,-0.41292632,0.081108965,0.43418765,-0.52656,0.03637807,-0.06539664,0.017635345,0.5859065,-0.49881718,-0.07513411,0.6399467,0.13104874,-0.020365192,0.5882421,-0.49227503,0.03843686,0.038687997,0.13894196,-0.6312234,0.2634633,0.32674667,0.024069548,0.10195784,-4.320701,-0.03992322,0.6929783,-0.21623394,0.4554649,0.21495235,-0.28513372,0.19736227,-0.49437147,-0.21767204,-0.25620773,0.35385677,0.48617226,0.06948868,0.7510246,-0.108450726,0.4956643,-0.23844618,-0.18001917,0.8263812,0.316193,0.02662427,-0.44150358,0.32248524,-0.059772488,-0.72128737,0.35091868,0.11876103,0.07240742,0.2564969,0.011439171,-0.050481632,-0.36061603,-0.029195122,0.05365568,0.9139196,0.099899806,3.075149,0.69011253,0.41048473,0.50818264,-0.47088057,0.8441408,-0.7337588,0.27930775,-0.4238107,0.6419281,-0.010526193,0.6697187,-0.1675887,0.38178295,0.4683566,0.44643283,-0.04479651,-0.77664655,-0.027749185,-0.45240834,0.51858574,-0.60976934,0.15606123,-0.7073481,-0.0868363,-0.33568603,-0.31341726,-0.47592914,0.3593528,-0.1670656,0.28749034,0.7505412,-0.46745086,-0.9492181,-0.24548356,-0.2244449,0.68371713,-0.055907845,-0.5678537,-0.5198374,-0.3299059,-0.23553583,-1.0685009,0.7072737,-0.62337494,0.17485851,-0.007546343,0.53079975,-0.23083058,-0.261358,-0.26252204,-0.4281764,0.37974745,0.36242932,0.20850587,0.7494419,-0.047819883,0.10320026,-0.07485165,-0.4862956,-0.047019295,0.0039332956,-0.21445848,0.58509314,0.75811094,0.9477438,-0.39981097,0.51242614,0.17605329,0.40249592,-0.6337473,0.4807847,0.22674546,-0.1307132,-0.17210323,-0.32616124,-0.053336218,-0.035022583,0.1452454,0.38755283,-0.3558464,-1.2952852,0.65629184,-0.7377432,-0.66154724,-0.16335423,0.2733159,0.3956866,-0.21298671,0.7244054,0.6039086,-0.63229775,1.6802859,-0.42125678,-0.06702244,-0.49300528,-0.0439512,-0.2730843,0.22407605,0.6091452,-0.17227073,-0.46534932,0.04379211,0.03453029,0.47641188,-0.6911746,-0.14857751,0.2692109,0.022439914,-0.07804401,-0.21133816,0.530801,0.14308882,0.014799457,0.61641663,0.3883174,-0.27363092,0.3249719,0.053655032,1.0277854,0.20971635,0.20995203,0.15998879,-0.8948006,-0.6818935,-0.61051863,0.011212677,0.34558558,0.024656087,0.21166585,0.41545716,0.4132952,0.23901577,0.3083282,0.05146877,1.3320931,0.27689293,-0.0632134,0.10572524,-0.0084187575,-0.818893,0.11791972,0.056930475,-0.6967952,-0.1624802,-0.25299007,-0.58221257,0.5911085,-0.34705794,0.2878696,1.8631468,0.526734,-0.31540966,0.4193621,0.03414357,0.10083842,0.35020733,-1.13138,0.11099106,-0.52490175,0.26298434,0.0789194,-0.16728064,-0.25824133,0.16588333,0.071303226,-0.42753673,-0.7786077,0.6254152,0.29738218,-0.48611918,0.2153496,1.3098394,0.80422735,-0.019896366,-0.2099463,-0.25119752,0.33749372,0.33032632,-0.31660008,0.23753451,0.54512423,-0.15575528,0.5204485,0.15950492,0.3978425,-0.08779949,-0.3061201,-0.014995404,-0.9436299,-0.13001901,-0.08957425,-0.10225752,-0.5860302,0.75246173,1.7818995,0.7386152,0.85437465,0.3050105,-0.057749983,0.6456072,-0.3605445,0.74737954,-0.40301907,0.39074773,-1.0535363,-0.532409,0.45475453,-0.6398917,-0.043524317,-0.24494782,-0.03756996,0.47959608,0.23248845,0.48171213,0.14012846,-0.6675159,-0.74422646,0.26762778,-0.05468659,-2.25722,0.15041514,-0.5956005,-0.4433167,-0.0725973,-0.17473674,0.35636622,0.13381657,0.29348713,-0.25082564,1.7107136,0.16409855,-0.32261184,-0.70530814,0.018168889,0.8760451,0.5984573,0.23611522,0.0692077,-0.7083814,0.0082191955,-0.13760614,0.77532226,0.038373485,0.14579278,-0.1455621,0.009183638,-0.33082664,-0.8889956,0.27737677,-0.32155627,-0.05827544,-0.044056192,0.2679598,-0.5328303,1.3053896,0.3804889,-0.333298,0.07139623,-0.3488704,1.4736818,-0.11374832,-0.19232523,-0.47261325,-0.23428473,-0.08747971,-0.09443763,0.17185813,-0.43810797,-0.20644458,0.31137642,-0.10246834,-0.34241152,0.18954901,0.28450945,0.621614,0.6309548,0.21334766,0.42630392,0.39298132,-0.1294715,0.029282607,-0.30445966,-0.9849747,0.34012616],"result":{"type":"object","properties":{"balances":{"additionalProperties":{"description":"Balance amount for a specific token","type":"number"},"description":"Map of token symbols to their respective balances","required":[],"type":"object"},"message":{"description":"Status message about the balance retrieval operation","type":"string"}},"required":["message","balances"]},"sql_tables":null,"sql_queries":null,"file_inbox":null,"oauth":null,"assets":null,"runner":"any","operating_system":["linux","macos","windows"],"tool_set":""},false]}