{"type":"Python","content":[{"version":"1.0.0","name":"macos-system","homepage":null,"author":"@@official.shinkai","py_code":"# /// script\n# dependencies = [\n#   \"requests\",\n# ]\n# ///\n\nfrom typing import Dict, Any, Optional, List\nimport subprocess\n\nclass CONFIG:\n    pass\n\nclass INPUTS:\n    command: str\n    level: Optional[int] = None  # for setVolume\n    app_name: Optional[str] = None  # for launchApp/quitApp\n    force: Optional[bool] = False  # for quitApp\n\nclass OUTPUT:\n    result: str\n\nasync def run_applescript(script: str) -> str:\n    \"\"\"Helper function to run AppleScript and return its output.\"\"\"\n    try:\n        result = subprocess.run(['osascript', '-e', script], \n                              capture_output=True, \n                              text=True, \n                              check=True)\n        return result.stdout.strip()\n    except subprocess.CalledProcessError as e:\n        return f\"Error: {e.stderr.strip()}\"\n\nasync def run(config: CONFIG, inputs: INPUTS) -> OUTPUT:\n    output = OUTPUT()\n    script = \"\"\n\n    if inputs.command == \"setVolume\":\n        if inputs.level is None:\n            raise ValueError('Missing \"level\" for setVolume')\n        # Convert 0..100 â†’ 0..7\n        volume_int = round((inputs.level / 100) * 7)\n        script = f'set volume {volume_int}\\nreturn \"Volume set to {inputs.level}%\"'\n\n    elif inputs.command == \"getFrontmostApp\":\n        script = \"\"\"\n            tell application \"System Events\"\n                set frontApp to name of first process whose frontmost is true\n            end tell\n            return frontApp\n        \"\"\"\n\n    elif inputs.command == \"launchApp\":\n        if not inputs.app_name:\n            raise ValueError('Missing \"app_name\" for launchApp')\n        script = f\"\"\"\n            try\n                tell application \"{inputs.app_name}\"\n                    activate\n                end tell\n                return \"Launched {inputs.app_name}\"\n            on error errMsg\n                return \"Failed to launch {inputs.app_name}: \" & errMsg\n            end try\n        \"\"\"\n\n    elif inputs.command == \"quitApp\":\n        if not inputs.app_name:\n            raise ValueError('Missing \"app_name\" for quitApp')\n        quit_cmd = \"quit saving no\" if inputs.force else \"quit\"\n        script = f\"\"\"\n            try\n                tell application \"{inputs.app_name}\"\n                    {quit_cmd}\n                end tell\n                return \"Quit {inputs.app_name}\"\n            on error errMsg\n                return \"Failed to quit {inputs.app_name}: \" & errMsg\n            end try\n        \"\"\"\n\n    elif inputs.command == \"toggleDarkMode\":\n        script = \"\"\"\n            tell application \"System Events\"\n                tell appearance preferences\n                    set dark mode to not dark mode\n                    return \"Dark mode is now \" & (dark mode as text)\n                end tell\n            end tell\n        \"\"\"\n\n    elif inputs.command == \"getBatteryStatus\":\n        script = \"\"\"\n            try\n                set powerSource to do shell script \"pmset -g batt\"\n                return powerSource\n            on error errMsg\n                return \"Failed to get battery status: \" & errMsg\n            end try\n        \"\"\"\n\n    else:\n        raise ValueError(f\"Unknown command: {inputs.command}\")\n\n    output.result = await run_applescript(script)\n    return output ","tools":[],"config":[],"description":"Control macOS system features via AppleScript","keywords":["macos","system","volume","apps","dark-mode","battery","automation","applescript"],"input_args":{"type":"object","properties":{"app_name":{"type":"string","description":"Application name (for launchApp/quitApp)"},"level":{"type":"number","description":"Volume level (0..100) for setVolume"},"force":{"type":"boolean","description":"Force quit if true (for quitApp)"},"command":{"type":"string","description":"Command to execute: control system volume, app management, dark mode, or get battery status"}},"required":["command"]},"output_arg":{"json":""},"activated":false,"embedding":[-0.4232661,-0.5927217,-0.0017145053,-0.18587565,0.28831226,-0.20754915,-0.09449663,-0.12215481,0.06893749,-0.035253298,0.11018851,0.63002515,-0.09826636,0.21135464,0.22945791,-0.5642679,-0.027119815,-0.49394435,-0.44308516,-0.17581615,0.031097963,0.5229201,0.09036365,0.24314933,0.11527108,0.18558285,-0.038970754,-0.3103594,-1.2571026,-2.4247382,-0.12319221,0.54843646,-0.04842054,0.076105356,0.09545485,-0.9050261,-0.40273306,-0.019345276,-0.61578757,-0.25310522,0.31165636,0.046714984,-0.28913802,-0.32429492,0.69034576,-0.12173023,0.68783545,-0.022660576,0.82746696,0.15177703,-0.36154047,-0.03357707,0.24755324,0.12284826,-0.45379508,0.607577,0.055078153,-0.05689902,0.03287677,-0.3465634,-0.84137905,0.09801945,-3.62501,-0.29190567,0.842722,0.5492122,0.16086844,-0.2741007,0.032601036,-0.034874402,0.20734023,0.34546182,-0.04721097,0.7190585,-0.099382356,-0.69643867,0.34488237,-0.18129492,0.45089394,-0.7181536,0.19487225,0.42858434,-0.08950067,0.19038059,-1.1333841,0.18548158,-0.28506684,-0.5922249,0.16800857,-0.20674777,0.22443542,0.38303116,0.3815526,-0.3140818,-0.14497462,-0.057652436,-0.18811303,0.13264832,-0.49716192,3.1574597,0.9886469,0.03774539,0.76187664,-0.5150972,-0.2712609,-0.060837504,0.0074233487,-0.09737608,-0.05329378,0.071230076,-0.21959418,0.11332743,-0.15813428,-0.047264606,-0.06832263,-0.15327708,-0.019563364,0.31138048,-0.53311205,0.66071874,-0.31059638,0.062725335,-0.97546685,-0.2234076,-0.7142336,-0.44760883,-0.33852112,0.30480054,0.093522415,-0.7912599,0.67882645,-0.92993385,-0.52729136,-0.08272011,0.39796814,-0.16124019,0.12067788,-0.7918348,-0.2466459,-0.20016776,-0.0359322,-1.3913335,0.94035375,-0.0847392,0.7358751,-0.117470294,0.17160866,0.098169625,-0.30787054,-0.32648653,-0.45368868,0.56450295,-0.5286852,-0.029465912,0.5862833,0.10335991,-0.09518278,0.3186662,-0.410339,0.472509,-0.30591697,0.09206948,0.62223715,0.2686776,0.74134535,-0.36222413,0.24825925,-0.37434524,0.23303418,-0.16356857,0.2109895,-0.28409687,0.38907066,-0.025754556,-0.37613007,0.6245724,-0.7624593,-0.15922955,0.2500516,-0.43274504,0.30609918,0.24003693,-0.49109966,-0.25215745,0.032971933,0.39969006,0.29581618,0.16900843,0.0047925636,0.65033734,-0.6798435,1.884548,-1.0172789,-0.40969703,-0.11902254,0.3342442,0.50180644,0.69225186,0.08569049,0.20875308,-0.50091815,-0.24340078,-0.17584592,0.14203478,-0.08471363,-0.29344597,0.89590275,0.2567585,0.37199938,0.09615917,0.33038327,0.10325741,0.660677,0.22959355,0.6566591,0.39177406,-0.0019863993,0.17591429,0.05413506,0.9919082,0.8211705,0.04786241,-0.86706614,-0.41001555,-0.013900377,-0.52260554,0.51558703,-0.29045415,-0.2904769,-0.24918462,0.17336601,0.49567482,0.73826694,0.054079704,0.5332761,0.10811484,0.29258436,0.42977133,-0.18875259,-0.6365971,0.0811425,-0.07610704,0.0058645904,-0.33995548,0.81889045,-0.47613066,-0.09699784,-0.74433213,-0.18322264,1.5663619,0.9042603,1.2668059,0.01690973,0.082722455,-0.3935041,0.51563585,-1.1481482,0.064934775,-0.23649493,0.66671985,0.4599347,-0.007110182,0.21494785,0.3012045,-0.6445291,0.38016352,0.23530784,-0.23212776,-0.27727813,0.082822315,-0.16927946,0.75455046,-0.16023862,0.1547626,-0.06132058,-0.37281328,0.32538247,-0.15355027,-0.25551617,-0.62464297,-0.44874734,0.414574,0.14888626,0.16620314,-0.24058521,-0.6750787,-0.042370513,-0.7350121,0.00012116134,-0.066614404,-0.050913587,-0.7684775,0.2653033,0.08780649,1.9365131,0.7067156,-0.06119929,0.93206733,-0.0549903,0.04271397,-0.2885324,-0.212396,-0.100194335,0.034010015,-0.8854687,-0.20754139,0.62702143,-0.5166219,-0.49426997,0.51748145,-0.62100536,0.6262784,0.15731657,-0.60201776,1.4583179,-0.18997288,0.6630616,0.68627226,-0.27898854,-2.2445705,-0.5998848,0.12625872,0.3030389,-0.66345775,-0.30944142,0.45104706,0.8283123,0.17127854,-0.5265965,1.2831452,0.6184718,0.45880058,0.0010893364,-0.20378678,0.81012464,0.24140051,0.45346162,0.16605015,-1.2445383,-0.4419007,0.87909746,1.9437885,-0.4660004,-0.16449639,0.34056425,-0.41706568,-0.6215881,-1.549744,0.7177347,-0.12250875,-0.5613278,0.67919815,0.05589313,-0.12403918,0.18327504,0.71611017,-1.1214991,0.25526783,-0.6588437,1.3695496,0.11186172,0.5703506,-0.88356817,0.29640928,0.6915098,-0.10450789,1.002975,-0.41885218,-0.12529123,0.45605585,-0.05991346,-0.42737132,0.094749376,0.3413029,0.8461353,0.38301927,-0.048374575,0.3734223,0.08538014,-0.1474906,0.067973696,-0.5303481,-0.77321947,-0.38320327],"result":{"type":"object","properties":{"result":{"description":"Message describing what happened","type":"string"}},"required":["result"]},"sql_tables":null,"sql_queries":null,"file_inbox":null,"oauth":null,"assets":null,"runner":"any","operating_system":["linux","macos","windows"],"tool_set":""},false]}