{"type":"Python","content":[{"version":"1.0.0","name":"macos-clipboard","homepage":null,"author":"@@official.shinkai","py_code":"# /// script\n# dependencies = [\n#   \"requests\",\n# ]\n# ///\n\nfrom typing import Dict, Any, Optional, List\nimport subprocess\n\nclass CONFIG:\n    pass\n\nclass INPUTS:\n    command: str\n    content: Optional[str] = None  # for setClipboard\n    content_type: Optional[str] = \"text\"  # for getClipboard\n\nclass OUTPUT:\n    result: str\n\nasync def run_applescript(script: str) -> str:\n    \"\"\"Helper function to run AppleScript and return its output.\"\"\"\n    try:\n        result = subprocess.run(['osascript', '-e', script], \n                              capture_output=True, \n                              text=True, \n                              check=True)\n        return result.stdout.strip()\n    except subprocess.CalledProcessError as e:\n        return f\"Error: {e.stderr.strip()}\"\n\nasync def run(config: CONFIG, inputs: INPUTS) -> OUTPUT:\n    output = OUTPUT()\n    script = \"\"\n\n    if inputs.command == \"getClipboard\":\n        if inputs.content_type == \"filePaths\":\n            script = \"\"\"\n                tell application \"System Events\"\n                    try\n                        set theClipboard to the clipboard\n                        if theClipboard starts with \"file://\" then\n                            set AppleScript's text item delimiters to linefeed\n                            set filePaths to {}\n                            repeat with aLine in paragraphs of (the clipboard as string)\n                                if aLine starts with \"file://\" then\n                                    set end of filePaths to (POSIX path of (aLine as alias))\n                                end if\n                            end repeat\n                            return filePaths as string\n                        else\n                            return \"No file paths in clipboard\"\n                        end if\n                    on error errMsg\n                        return \"Failed to get file paths: \" & errMsg\n                    end try\n                end tell\n            \"\"\"\n        else:\n            script = \"\"\"\n                tell application \"System Events\"\n                    try\n                        return (the clipboard as text)\n                    on error errMsg\n                        return \"Failed to get clipboard: \" & errMsg\n                    end try\n                end tell\n            \"\"\"\n\n    elif inputs.command == \"setClipboard\":\n        if not inputs.content:\n            raise ValueError('Missing \"content\" for setClipboard')\n        script = f\"\"\"\n            try\n                set the clipboard to \"{inputs.content}\"\n                return \"Clipboard set successfully\"\n            on error errMsg\n                return \"Failed to set clipboard: \" & errMsg\n            end try\n        \"\"\"\n\n    elif inputs.command == \"clearClipboard\":\n        script = \"\"\"\n            try\n                set the clipboard to \"\"\n                return \"Clipboard cleared\"\n            on error errMsg\n                return \"Failed to clear clipboard: \" & errMsg\n            end try\n        \"\"\"\n\n    else:\n        raise ValueError(f\"Unknown command: {inputs.command}\")\n\n    output.result = await run_applescript(script)\n    return output ","tools":[],"config":[],"description":"Manage macOS clipboard via AppleScript","keywords":["macos","clipboard","automation","applescript"],"input_args":{"type":"object","properties":{"content":{"type":"string","description":"Text to put in clipboard for setClipboard"},"content_type":{"type":"string","description":"When getClipboard, specify if it's text or file paths"},"command":{"type":"string","description":"Command to execute: getClipboard to read, setClipboard to write, clearClipboard to clear"}},"required":["command"]},"output_arg":{"json":""},"activated":false,"embedding":[-0.4532567,-0.85333365,0.19835573,-0.6768733,-0.18374504,-0.5219369,-0.46943685,0.15664229,0.4565581,0.023268912,0.36509764,0.58694917,-0.5991283,0.82210904,-0.26276585,-0.35811457,-0.059841756,-0.2980946,-0.5447728,-0.15613756,0.023944255,0.71622187,0.14684169,0.24175732,-0.22868308,-0.06783977,-0.39018524,-0.33512312,-1.1577991,-2.1955733,-0.080992855,0.7786919,0.66703093,0.18696356,-0.27810287,-0.73932695,-0.094201095,-0.024941467,-0.41171238,-0.08435692,0.44054356,-0.17148021,-0.17231724,-0.59345275,0.6499726,-0.32957202,0.78655374,0.20794028,1.0215139,0.7528244,-0.89652354,-0.23365766,0.50661427,-0.61536443,-0.70845455,0.70517325,0.24323225,-0.076045334,0.63486934,-0.14243723,-0.6668313,-0.35279927,-3.1634512,0.39161512,0.57511884,0.3332284,-0.07077362,-0.2712462,-0.35117355,0.34194237,0.18794736,0.027575858,-0.0765555,0.939905,0.53385055,-0.9149043,0.032510675,0.16756788,0.42056656,-0.6051044,0.10641272,0.8098252,-0.22649987,0.42951447,-1.0051224,0.60362446,-0.93025744,-0.6514747,0.26183093,0.30332077,0.0914053,0.52505916,0.7322096,-0.3151513,-0.06409214,-0.113122076,-0.551546,0.09021439,-0.33969817,2.6792495,0.81410706,-0.20147878,1.372822,-1.0697104,-0.57701325,0.04537838,-0.32218426,-0.06741125,-0.3827945,0.030103715,-0.0922863,-0.0010151304,0.040982105,-0.69973963,0.32924977,0.015599163,-0.7589914,0.032132726,-0.15592238,0.6447934,-0.12802751,0.41375893,-0.69308966,0.14609373,-0.40827984,-0.30887043,-0.43391654,0.30431858,0.17242743,-0.86556596,0.682821,-1.0547214,-0.7092001,0.3040395,-0.040150084,-0.0025362,0.14021713,-0.8098479,-0.46187288,0.07650269,0.23525053,-1.2666596,0.90156364,0.61591816,0.21185759,-0.06653739,0.8406436,0.29984617,-0.39331463,-0.37606484,-0.5515873,0.39443204,-0.51556385,-0.22748314,0.39184803,0.2287232,-0.34457153,0.88366425,-0.7651712,0.3767155,-0.53891927,-0.4599524,0.5343362,0.30490798,0.36034346,-0.6649813,0.12627234,-0.039706655,0.80317205,0.015910912,0.0038711727,-0.4231222,0.47021958,0.07438038,-0.43600416,0.23074396,-0.7469318,-0.14122283,0.01885278,-0.48966897,0.5963317,0.053224638,-0.9159974,-0.18861824,-0.70019156,0.5885336,0.35933122,-0.22285649,0.53289884,0.37550092,-0.73317873,2.133033,-0.8528613,0.11842258,-0.31208804,0.8673251,0.60348713,0.2545069,0.15324095,0.47019407,-0.448277,-0.79245156,-0.56308967,-0.25141916,0.055206798,-0.12273653,0.63365877,0.5101064,0.049190298,0.030615423,0.23401281,-0.19954899,0.79812354,0.5606405,0.71687555,-0.21257441,0.34522966,0.38033575,0.037433114,0.008384153,0.41052395,0.404196,-0.5181037,-0.2559765,0.18272318,-0.36880177,0.57361937,0.2576,0.08335589,0.14371325,0.18983603,0.8374455,0.50387794,0.066672444,0.38431206,-0.23122215,0.1334845,-0.034622103,0.06535065,-0.6023425,0.074429594,-0.061864123,-0.4678586,-0.3661238,0.51353216,-0.591802,0.48747092,0.1432819,-0.6109797,2.123444,-0.027167782,0.7149048,0.086974785,0.801142,-0.6853363,0.7265334,-0.9476754,0.40084195,-0.40091646,0.264745,0.2176485,0.03755877,0.9313834,0.19620767,-0.9590798,-0.3689799,0.4738332,-0.6308938,-0.1564749,0.31510887,-0.10385642,1.1175598,-0.40146625,-0.15630764,-1.1303657,-0.063020885,0.033033915,-0.254603,-0.48051146,-0.8695235,-0.06932784,0.19053455,-0.07802055,0.08449108,-0.44121665,-0.06482877,-0.18121305,-1.0571423,0.40893704,-0.005582109,0.4928372,-1.039463,0.19115284,0.40570736,1.9841853,0.43725047,0.13964882,0.5057896,-0.08306939,-0.26201805,-0.773517,0.012244374,0.4323193,-0.21501541,-1.4371877,-0.06060039,1.0023098,-0.16844107,-0.21958634,0.8928822,0.19418976,0.35392505,0.47884762,-0.29739645,1.060595,-0.03560537,0.2825629,0.41293,-0.14777912,-1.8979373,-0.61023474,-0.30888137,0.18711844,-0.40145093,0.104931965,0.33687222,0.16268733,0.24918711,-0.72674394,1.0389867,0.65005803,-0.12103604,0.14411442,-0.064419605,0.7839668,0.7979646,0.7157779,0.6248111,-0.8863328,-0.060523126,0.6976635,1.1815128,-0.3832925,-0.19288938,0.07765211,-1.1893886,-0.37897718,-1.4084891,0.50880945,-0.49014175,-0.47525358,0.7058579,-0.06549975,-0.024113234,0.9742323,0.45914292,-0.55122536,-0.19637457,-0.60538673,1.5285115,-0.2107924,0.37708586,-0.46598083,0.36039302,0.34854046,0.008552901,0.76085097,-0.53441215,-0.07192023,0.35513303,0.49648634,-0.3611464,0.14295891,0.10279578,0.4241394,0.51231766,-0.24861686,0.6917374,0.41756392,-0.0013369247,0.42798686,-0.6934744,-0.7187985,-0.48932093],"result":{"type":"object","properties":{"result":{"description":"Resulting text from AppleScript","type":"string"}},"required":["result"]},"sql_tables":null,"sql_queries":null,"file_inbox":null,"oauth":null,"assets":null,"runner":"any","operating_system":["linux","macos","windows"],"tool_set":""},false]}