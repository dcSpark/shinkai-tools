{"type":"Python","content":[{"version":"1.0.0","name":"YouTube Search","homepage":null,"author":"@@official.shinkai","py_code":"# /// script\n# dependencies = [\n#   \"requests>=2.28.0\"\n# ]\n# ///\n\nimport requests\nimport json\nfrom typing import List, Dict, Optional\n\nclass CONFIG:\n    SERP_API_KEY: str\n\nclass INPUTS:\n    search_query: str\n    gl: Optional[str] = \"us\"\n    hl: Optional[str] = \"en\"\n    max_results: Optional[int] = 10\n\nclass OUTPUT:\n    results: List[Dict[str, str]]\n    query: str\n\nasync def run(c: CONFIG, p: INPUTS) -> OUTPUT:\n    if not c.SERP_API_KEY:\n        raise ValueError(\"SERP_API_KEY not provided in config.\")\n    if not p.search_query or not p.search_query.strip():\n        raise ValueError(\"No search query provided.\")\n\n    url = \"https://serpapi.com/search\"\n    params = {\n        \"engine\": \"youtube\",\n        \"search_query\": p.search_query.strip(),\n        \"api_key\": c.SERP_API_KEY,\n        \"hl\": p.hl,\n        \"gl\": p.gl,\n    }\n\n    resp = requests.get(url, params=params)\n    if resp.status_code != 200:\n        raise RuntimeError(f\"YouTube search failed with HTTP {resp.status_code}: {resp.text}\")\n\n    data = resp.json()\n    video_results = data.get(\"video_results\", [])\n    \n    videos = []\n    for item in video_results[:p.max_results]:\n        video = {\n            \"title\": item.get(\"title\", \"Untitled\"),\n            \"link\": item.get(\"link\", \"\"),\n            \"thumbnail\": item.get(\"thumbnail\", {}).get(\"static\", \"\"),\n            \"channel\": item.get(\"channel\", {}).get(\"name\", \"Unknown\"),\n            \"views\": item.get(\"views\", \"0\"),\n            \"duration\": item.get(\"duration\", \"\")\n        }\n        videos.append(video)\n\n    output = OUTPUT()\n    output.results = videos\n    output.query = p.search_query.strip()\n    return output\n","tools":[],"config":[{"BasicConfig":{"key_name":"SERP_API_KEY","description":"Your SerpAPI key for authentication","required":true,"type":null,"key_value":null}}],"description":"Searches YouTube for videos via SerpAPI. Requires SERP_API_KEY in configuration.","keywords":["youtube","serpapi","video","search"],"input_args":{"type":"object","properties":{"search_query":{"type":"string","description":"The search query for YouTube videos"},"max_results":{"type":"number","description":"Maximum number of results to return"},"hl":{"type":"string","description":"Language code. E.g. 'en', 'es'"},"gl":{"type":"string","description":"Geolocation (country code). E.g. 'us', 'uk'"}},"required":["search_query"]},"output_arg":{"json":""},"activated":false,"embedding":[-0.10255425,0.026966542,0.07079901,-0.47810104,-1.5509136,-0.78034514,-0.95892495,-0.40695834,-0.32471016,-0.16793866,-0.60645795,0.7405229,-0.17616071,0.24011184,0.42893535,-0.258754,0.40819165,-0.26762527,-0.7868211,-0.06291662,0.47050977,0.574803,-0.2945245,0.2197371,-0.4602155,0.3509582,0.18527684,-1.0056108,-1.6505673,-1.8296648,0.28702152,0.97518617,0.16069742,0.010584511,-0.36847374,-0.12695187,0.13307816,0.046456065,-0.09574347,0.22498225,-0.013348519,0.25258535,-0.5648994,-0.058898903,-0.68827224,-0.13880068,1.1406662,-0.44158533,1.3897412,0.32412404,-0.08247516,0.3346178,-0.6385392,0.39160886,-0.6175067,-0.18113202,-0.58347225,0.23324226,0.5488135,-0.20359051,0.75618714,0.24166703,-3.8873823,-0.6130364,-0.0015206542,0.2642355,0.222649,-0.2238572,0.59660393,0.08695516,-0.36584964,0.4321627,0.027202353,0.3979017,-0.5047259,-0.90199447,0.11578736,-0.31804463,0.20222855,-0.49835792,0.7713721,-0.0703035,-0.06894686,-0.81414884,0.03971477,-0.017930746,-0.16284528,-0.09173152,0.39695972,0.6304158,-0.5497592,0.27395573,0.473484,-0.30796042,-0.4924348,-0.24930592,0.20947218,-0.3008367,0.18791704,2.5184708,0.7743389,0.25000393,0.8791858,-0.98005635,-0.034882754,0.029404156,0.7392621,-0.07373229,0.024563203,0.8240579,-0.46482727,0.16509445,0.92727935,0.33776513,0.11973241,-0.21640861,0.21764676,0.062595814,0.38028914,1.2065785,-0.48744676,-0.2504198,-0.74971896,0.18352118,-0.053867545,-0.18266347,-0.899822,0.29740706,0.35439512,-0.34514484,0.3936717,-0.79429156,-0.4941258,0.27391705,-0.03778016,0.14373098,0.12545636,-0.74052036,0.034843825,-0.22066888,-0.6071886,-1.03977,0.97571,-0.15346181,0.28484708,0.56493616,0.008252706,0.45296264,-0.73152745,-0.24068284,0.6350717,0.08128059,0.4476487,0.26343203,0.65475,-0.3339804,-0.49038804,-0.22755483,-0.5807769,0.3489332,-0.5519958,-0.0671083,-0.100680664,0.11502666,0.21555614,-0.44108233,0.3381044,0.19428441,0.6411078,-0.07816913,0.3787655,0.47634572,0.023481183,-0.04700102,-0.4008958,-0.092310205,-1.4393011,-0.124107696,0.40089807,-0.26088053,-0.28801385,0.4053036,0.14864565,-0.1222353,-0.9431315,0.5009819,0.055658296,0.13507019,1.0406849,1.1171358,-0.7710909,1.9395888,-0.85936636,-0.58307785,0.6237543,0.2964697,-0.5054424,0.4639371,-0.39356604,-0.48839596,-0.69056594,-0.2593078,-0.23263977,-0.13404855,-0.5864562,0.06320335,0.4900337,0.108707696,-0.14511657,-0.32514462,0.7355296,-0.54030585,0.4251204,0.16593915,0.38334256,0.0294934,-0.09115434,-0.3077323,-0.79300267,0.36262983,0.24585053,0.44311237,-0.25572073,-0.54193825,0.053414006,0.27337134,-0.6364642,0.5076743,-0.7621596,-0.4163918,0.41242656,1.1039149,0.12051296,1.359865,0.7417852,0.23162699,-0.07275321,0.35425988,0.36196205,-1.0350333,0.4592195,-0.28482237,-0.25138623,-0.7404799,-0.3042491,-0.7936276,0.15679619,0.04890065,-0.16880576,1.4538665,1.7192484,0.5763311,0.34496745,0.59060663,0.3955309,0.33962667,-1.5359936,-0.053577766,0.103147365,-0.261462,-0.30522165,0.2826563,0.09107998,0.15623918,0.06395733,0.11795595,-0.5760403,-0.7027236,-0.036731936,-0.65007937,-0.009111701,0.7179159,0.32885373,-0.02618067,-0.35641444,0.06155941,-0.48827645,-0.032105975,-1.0460829,-0.13903134,0.49664405,-0.34184927,0.17057437,-0.4636349,-0.8732634,0.059177198,-0.74918073,0.9407446,-0.2762001,0.87701696,-0.5257669,-0.19656816,-0.31074214,0.3883399,1.4335163,-0.22330639,0.5319325,0.93340063,-0.3723758,0.39575446,-0.98789585,-0.16870394,0.5209986,0.16481274,-0.17888904,-0.28096062,1.0478148,-0.5200282,-0.21896333,0.09148715,-0.31806895,0.97605354,-0.1587349,-0.4027645,0.68445635,-0.7570269,0.26019692,1.0818857,-0.07364514,-1.4009349,-0.04747517,-0.1892569,-0.3762566,-0.18857346,-0.822156,0.53752244,0.04893124,0.31643316,0.007201895,1.610561,-0.007114443,0.06854199,-0.29868427,0.3644462,0.09635862,-0.42918283,0.14586696,-0.029842831,-1.1882046,-0.72974265,0.44077545,1.5450928,1.1880387,0.37481806,0.46859697,-0.068656914,-0.37147647,-0.8737937,0.62999594,-0.101879835,-0.81605834,1.1592706,0.08325277,-0.29198793,0.45718917,0.47724375,0.53568155,-0.27684388,0.23811105,1.6020179,0.13173306,0.08475237,0.08650171,0.7863198,0.29908523,0.15758644,-0.49852782,-0.5569922,0.65889454,-0.3672715,0.32344535,-0.60381764,0.5750247,-0.38910154,0.102846295,1.0643396,0.105247825,0.6337029,0.57803494,0.15224232,0.06866618,0.34769094,-0.30365127,-0.22183032],"result":{"type":"object","properties":{"query":{"description":"The original search query","type":"string"},"results":{"description":"List of video search results","items":{"properties":{"channel":{"type":"string"},"duration":{"type":"string"},"link":{"type":"string"},"thumbnail":{"type":"string"},"title":{"type":"string"},"views":{"type":"string"}},"type":"object"},"type":"array"}},"required":["results","query"]},"sql_tables":null,"sql_queries":null,"file_inbox":null,"oauth":null,"assets":null,"runner":"any","operating_system":["linux","macos","windows"],"tool_set":""},false]}