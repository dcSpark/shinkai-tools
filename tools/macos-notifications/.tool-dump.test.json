{"type":"Python","content":[{"name":"macos-notifications","tool_router_key":"local:::__official_shinkai:::macos_notifications","homepage":null,"author":"@@official.shinkai","version":"1.0.0","mcp_enabled":null,"py_code":"# /// script\n# dependencies = [\n#   \"requests\",\n# ]\n# ///\n\nfrom typing import Dict, Any, Optional, List\nimport subprocess\n\nclass CONFIG:\n    pass\n\nclass INPUTS:\n    command: str\n    title: Optional[str] = None  # for sendNotification\n    message: Optional[str] = None  # for sendNotification\n    sound: Optional[bool] = True  # for sendNotification\n\nclass OUTPUT:\n    result: str\n\nasync def run_applescript(script: str) -> str:\n    \"\"\"Helper function to run AppleScript and return its output.\"\"\"\n    try:\n        result = subprocess.run(['osascript', '-e', script], \n                              capture_output=True, \n                              text=True, \n                              check=True)\n        return result.stdout.strip()\n    except subprocess.CalledProcessError as e:\n        return f\"Error: {e.stderr.strip()}\"\n\nasync def run(config: CONFIG, inputs: INPUTS) -> OUTPUT:\n    output = OUTPUT()\n    \n    if inputs.command == \"toggleDoNotDisturb\":\n        script = \"\"\"\n            set toggleResult to \"Error: Could not toggle Do Not Disturb via System Settings.\"\n            \n            -- Open System Settings directly to Focus panel\n            do shell script \"open 'x-apple.systempreferences:com.apple.Focus-Settings'\"\n            delay 1\n\n            tell application \"System Events\"\n                tell process \"System Settings\"\n                    -- Wait until the main window is detected\n                    repeat until exists window 1\n                        delay 0.3\n                    end repeat\n                    \n                    -- Make sure System Settings is frontmost\n                    set frontmost to true\n                    delay 1\n\n                    -- Try to find and click the Do Not Disturb row\n                    try\n                        -- First try to find it in a list/table\n                        set dndRow to first row of list 1 of window 1 whose name contains \"Do Not Disturb\"\n                        click dndRow\n                        delay 0.5\n                        \n                        -- Try to find and click the toggle\n                        try\n                            set toggleSwitch to first checkbox of window 1\n                            click toggleSwitch\n                            set toggleResult to \"Toggled Do Not Disturb\"\n                        on error\n                            -- If we can't find a checkbox, try clicking the row again\n                            click dndRow\n                            set toggleResult to \"Toggled Do Not Disturb\"\n                        end try\n                    on error\n                        try\n                            -- Try finding it as a table row\n                            set dndRow to first row of table 1 of window 1 whose name contains \"Do Not Disturb\"\n                            click dndRow\n                            delay 0.5\n                            \n                            -- Try to find and click the toggle\n                            try\n                                set toggleSwitch to first checkbox of window 1\n                                click toggleSwitch\n                                set toggleResult to \"Toggled Do Not Disturb\"\n                            on error\n                                -- If we can't find a checkbox, try clicking the row again\n                                click dndRow\n                                set toggleResult to \"Toggled Do Not Disturb\"\n                            end try\n                        on error errMsg\n                            set toggleResult to \"Error finding Do Not Disturb: \" & errMsg\n                        end try\n                    end try\n                end tell\n            end tell\n\n            return toggleResult\n        \"\"\"\n        output.result = await run_applescript(script)\n        return output\n\n    elif inputs.command == \"sendNotification\":\n        if not inputs.title or not inputs.message:\n            raise ValueError('Missing \"title\" or \"message\" for sendNotification')\n        sound_option = 'sound name \"default\"' if inputs.sound else ''\n        script = f\"\"\"\n            display notification \"{inputs.message}\" with title \"{inputs.title}\" {sound_option}\n            return \"Notification sent\"\n        \"\"\"\n        output.result = await run_applescript(script)\n        return output\n\n    else:\n        raise ValueError(f\"Unknown command: {inputs.command}\")\n\n    return output ","tools":[],"config":[],"description":"Manage macOS notifications and Do Not Disturb via AppleScript","keywords":["macos","notifications","dnd","automation","applescript"],"input_args":{"type":"object","properties":{"message":{"type":"string","description":"Notification message for sendNotification"},"sound":{"type":"boolean","description":"Play default sound if true (default = true)"},"command":{"type":"string","description":"Command to execute: toggleDoNotDisturb to toggle DND mode, sendNotification to show notification"},"title":{"type":"string","description":"Notification title for sendNotification"}},"required":["command"]},"output_arg":{"json":""},"activated":false,"embedding":[-0.3378087,-0.34545022,0.15933497,-0.61337245,0.58201057,0.19376728,0.1363956,-0.6407379,0.45104146,0.42872852,0.123489074,0.15416113,-0.2364102,-0.008923575,0.37052855,-0.55315804,0.27941653,-0.8357326,-0.6153714,-0.32684898,0.19831084,1.2118996,0.48885617,0.21994832,0.09510784,-0.07384,-0.40431228,0.13907592,-0.63115054,-2.2171068,-0.2276915,0.8452653,-0.2490328,0.020458668,-0.29357043,-0.74873745,-0.19408914,0.1918776,-0.82201046,-0.3271699,0.27245864,-0.40424594,-0.10047367,-0.48928663,0.1405232,-0.65336007,0.55537814,0.32115048,0.4960998,0.3569029,-0.019911204,0.13176787,0.24721085,-0.22227776,-0.8009681,0.70674586,0.15393479,0.2273254,0.13580976,0.37095022,-0.5632673,-0.29324466,-3.2800338,-0.012998918,0.3541298,0.34701154,-0.008755383,-0.30782288,0.08464058,-0.15743007,0.121931404,-0.1772725,-0.07109313,0.80903846,0.0016938411,-0.5636078,0.07490622,-0.3087455,0.1649341,-0.0362726,0.124992274,1.0464906,-0.38763976,0.54792553,-0.9168988,0.4414655,-0.32393557,-0.0946362,0.10422209,0.4463495,-0.31107217,0.55721366,0.016991396,-0.09184393,-0.019907884,0.18264997,-0.16264957,0.53659165,0.08872429,3.065298,1.1004472,0.23081042,0.7690421,-0.06866441,-0.5498233,0.20985445,-0.7379192,-0.088608146,-0.12970325,0.07393036,-0.14408982,0.24087428,0.21592112,-0.0989563,0.3311448,-0.085652545,-0.37970108,0.6484857,-0.36975184,0.58412254,-0.21552914,0.065665215,-0.96136767,-0.63747984,-0.5607666,-0.41653365,-0.5547368,0.14069176,0.19512047,-0.6489482,0.8306143,-0.6724145,-0.5785398,0.011611303,0.22406188,-0.06416003,-0.13178913,-0.9150824,-0.6013149,0.28253338,0.27149892,-2.3068867,1.4100668,-0.14567135,0.639919,-0.2213333,0.4809869,0.004677601,-0.32126123,-0.40545383,-0.7349385,0.5925048,-0.26871634,-0.6968286,0.4448914,0.29270715,-0.53731585,0.41948396,-0.44584683,0.20920062,0.29925206,-0.38920054,0.801141,0.63114643,0.43609995,-0.7593833,0.05712823,-0.40543318,0.3692964,0.26488152,0.32497147,-0.2991377,0.15283914,0.13339889,-0.584471,0.8376678,-0.7794163,-0.17148998,0.4000589,-0.53948355,0.44545782,0.39236808,-0.51198024,-0.14422935,-0.07268127,0.40916356,0.3875408,-0.049885243,0.2226139,0.6883023,-0.9549087,1.7552208,-0.99041295,-0.6216807,0.05935561,0.42545646,0.5995916,0.42184526,-0.30616382,0.4445012,0.12238747,-0.54936177,-0.38282296,0.84999526,-0.40571052,-0.517221,0.87661314,0.27463052,0.39921838,-0.14540944,-0.067220554,0.39964443,0.75110096,0.45989934,0.20911893,0.6208507,-0.13329418,-0.08500619,0.09285249,0.65509677,0.9764787,0.2293326,-1.5177454,-0.26480442,-0.5777373,-0.80072457,0.5768574,-0.61512935,-0.64401436,-0.2981295,-0.22166646,1.1112796,0.46190915,-0.1760791,0.2639341,-0.4649372,0.024689764,0.30699134,0.21991616,-0.35686505,0.223937,0.02086636,-0.27952522,-0.13286145,0.729952,-0.10653272,0.04210008,-0.40075535,0.14568777,1.3414326,0.65903926,1.0872008,0.4187566,0.0005664043,-0.21048781,-0.15626669,-1.036363,0.8566028,0.2486935,-0.024702799,0.71116436,0.046388388,0.31366104,0.2837175,-0.5216549,0.26450703,0.05587191,-0.13473554,-0.32728928,-0.25441176,-0.6462497,0.7288673,-0.5958061,-0.3937851,-0.50029963,-0.19455293,0.12151867,-0.40759072,-0.38133526,-0.88799703,-0.41549036,0.055535085,0.6071597,0.04119409,0.15243196,-0.5583856,0.14071426,-0.4226759,0.13982727,-0.030246064,-0.09909147,-0.9062816,0.15424895,0.2915196,2.2537062,0.4729891,0.03167995,0.7347449,0.3701446,-0.12257182,0.20856997,-0.2223151,-0.5492409,-0.34985423,-0.6975623,-0.06937991,0.52053714,-0.7253919,-0.7342817,0.34873948,-0.017511114,0.70400757,0.40188333,-0.38076943,1.2191577,0.5812894,0.33301297,0.9189187,0.02194355,-1.8775488,-0.5696413,-0.2280598,0.5898288,-0.89597344,-0.3819678,0.6441696,0.8051447,-0.10092442,-0.31540316,0.9038098,0.9782314,-0.3676914,-0.29908082,0.029847719,0.58646077,0.04458212,0.54647195,0.13291475,-1.1581947,-0.52450854,0.87279797,1.9129508,-0.44080895,0.114504635,0.18291987,-0.2095637,-0.67869484,-1.6488084,0.8674848,0.14130421,-0.76202065,0.44689214,0.16706134,-0.5735118,0.42531204,0.9529199,-0.8817925,0.20086977,-0.42869297,1.0417161,0.04330478,0.21387723,-0.47994652,0.22746497,0.82780826,-0.25610512,0.9254843,-0.35292524,-0.44632775,0.6409751,-0.07447098,-0.32556224,0.35945094,0.19488062,-0.038141042,0.31054166,-0.24032575,0.45967805,0.2039376,-0.31179577,-0.3116139,-0.10452752,-0.35059944,-0.49004346],"result":{"type":"object","properties":{"result":{"description":"Message describing what happened","type":"string"}},"required":["result"]},"sql_tables":null,"sql_queries":null,"file_inbox":null,"oauth":null,"assets":null,"runner":"any","operating_system":["linux","macos","windows"],"tool_set":""},false]}