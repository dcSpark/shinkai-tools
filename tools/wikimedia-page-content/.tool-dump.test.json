{"type":"Deno","content":[{"name":"Wikimedia Page Content","homepage":null,"author":"@@official.shinkai","version":"1.0.0","js_code":"import axios from 'npm:axios';\n\ntype Configurations = {\n  project?: string;\n  language?: string;\n};\n\ntype Parameters = {\n  title: string;\n};\n\ntype Result = {\n  content: {\n    title: string;\n    html: string;\n    url: string;\n    lastModified: string;\n    language: string;\n  };\n};\n\nexport type Run<C extends Record<string, any>, I extends Record<string, any>, R extends Record<string, any>> = (\n  config: C,\n  inputs: I\n) => Promise<R>;\n\nexport const run: Run<Configurations, Parameters, Result> = async (\n  configurations: Configurations,\n  params: Parameters\n): Promise<Result> => {\n  try {\n    const project = configurations?.project || 'wikipedia';\n    const language = configurations?.language || 'en';\n    \n    // Using the REST v1 API endpoint for page content\n    const api_url = `https://${language}.${project}.org/api/rest_v1/page/html/${encodeURIComponent(params.title)}`;\n    \n    const response = await axios.get(api_url, {\n      headers: {\n        'User-Agent': 'ShinkaiWikimediaPageContent/1.0',\n        'Accept': 'text/html; charset=utf-8',\n        'Api-User-Agent': 'ShinkaiWikimediaPageContent/1.0 (https://github.com/dcSpark/shinkai-tools)'\n      }\n    });\n\n    if (!response.data) {\n      throw new Error('No data received from Wikimedia API');\n    }\n\n    return {\n      content: {\n        title: params.title,\n        html: response.data,\n        url: `https://${language}.${project}.org/wiki/${encodeURIComponent(params.title.replace(/ /g, '_'))}`,\n        lastModified: response.headers['last-modified'] || '',\n        language: language\n      }\n    };\n  } catch (error) {\n    if (axios.isAxiosError(error)) {\n      if (error.response?.status === 404) {\n        throw new Error(`Page '${params.title}' not found`);\n      }\n      throw new Error(`Failed to fetch page content: ${error.response?.data?.detail || error.response?.data?.message || error.message}`);\n    }\n    throw error;\n  }\n};\n","tools":[],"config":[{"BasicConfig":{"key_name":"project","description":"Wikimedia project (e.g., wikipedia)","required":false,"type":null,"key_value":null}},{"BasicConfig":{"key_name":"language","description":"Language code (e.g., en)","required":false,"type":null,"key_value":null}}],"description":"Fetch the full HTML content of a specific Wikimedia page","keywords":["wikimedia","content","wikipedia","page","html","article"],"input_args":{"type":"object","properties":{"title":{"type":"string","description":"Title of the page to fetch"}},"required":["title"]},"output_arg":{"json":""},"activated":false,"embedding":[0.22388592,0.53837246,-0.51374406,-0.13513592,0.041954752,0.51775724,-1.4870543,-0.25074282,0.6821066,0.10979077,0.014235243,0.6983222,0.27889884,-0.063917294,0.7412971,0.38115206,0.015189793,-0.43885332,-1.8273811,-0.3162225,-0.081844375,1.3889605,0.5812438,-0.04560881,-0.42400074,-0.12693317,-0.12065962,-0.6095281,-1.1817337,-1.6117735,0.44163546,0.23099026,-0.30508474,-0.3285995,0.22200269,0.009261034,-0.3200932,-0.012492254,-0.354924,-0.18894334,0.11532872,0.07137634,-0.37712693,0.040151916,-0.7412897,0.025937311,-0.20871429,-0.4136194,0.19584177,0.6007304,-0.38913903,-0.33135876,0.15463339,0.26053202,-0.50356615,0.37724468,-0.8827641,-0.12882645,-0.392073,0.4593474,0.16834544,0.74826145,-4.1181135,-0.28111076,0.6531607,0.21185204,-0.5517628,-0.585729,0.33224252,0.05536838,0.20596907,0.09412079,0.19486931,0.049128816,0.3236419,-0.8085487,0.6068119,0.06892656,-0.53378594,-0.7084924,-0.38246435,0.43265396,-0.21707506,0.35701385,-0.38389292,0.030728407,0.050446555,-0.7459149,0.3871579,0.034518443,-0.4380585,-0.5966642,0.58195174,-0.25090232,-1.0510256,-0.34019578,0.32009962,1.0308937,0.5665161,2.9511707,1.206941,0.31406522,0.09342544,-0.60354775,0.58448666,-0.2787535,0.11574504,0.31341177,0.42780215,-0.6194681,0.1945815,-0.63584816,0.091564976,-0.16738224,-0.033431537,-0.15314241,-1.073772,-0.39802924,0.23190135,0.5457856,-0.15529183,0.118276626,-0.60877824,-0.1260773,-0.085708335,0.07747999,-0.09203575,0.09444341,-0.07025805,0.3393959,0.46417257,-0.3382897,-1.2804232,0.57507974,-0.16436535,0.42433596,-0.03946738,0.13429074,0.27376434,-1.3031911,-0.06695628,-1.1868442,0.54391545,0.094169915,0.15438986,0.7867676,0.18660873,0.54528046,-0.76675874,0.09029276,0.3306786,-0.017074093,-0.18332346,0.028427757,0.46549362,-0.06450527,0.14487667,0.00017575175,-0.59645176,0.04260062,0.09623717,-0.5903165,0.49556252,0.28354087,0.064431876,-0.3585005,0.021852568,0.17860624,0.19677302,-0.117044345,0.46555054,-0.6354413,-0.1767371,0.32967728,0.54216504,-0.40467933,-0.85604,-0.007033922,-0.0016699582,-0.58684886,0.31914648,0.78328454,-0.018521313,-0.21896392,-0.1836684,0.12029196,0.57529324,-0.09441159,1.1309952,1.3549529,-0.02318751,1.9608611,-0.65022975,-0.73158115,0.27251127,-0.057663575,-0.32915556,0.3571871,0.5437368,0.14332314,0.060605563,-0.6234928,0.40483284,-0.094206885,-0.5174437,0.0737672,0.34801325,-0.5739474,-0.17450838,-0.75503224,-0.35336152,-0.35418838,0.5698035,0.041904747,0.27477401,-0.21819825,0.14452127,0.5580893,0.4824759,1.0739834,0.0721225,0.0436892,-0.38762295,-0.31378174,-0.86369944,0.08545274,-0.7641716,0.54145044,-0.5186946,-0.13136767,0.24095541,0.7303096,-0.0020206645,0.5912267,1.2665181,0.26003993,-0.924115,0.5870625,0.07821521,-0.02194189,0.86601806,-0.39538127,-0.13464591,-0.22417384,0.10047407,-0.8819455,-0.79023504,0.45100194,0.16859777,1.4487512,0.80665123,0.10428531,0.640437,0.3371976,0.20996228,0.66659325,-1.7022369,-0.16074274,-0.597254,0.6814186,-0.2711169,0.075165175,0.2936394,-0.70313436,0.29489422,-0.3683999,-0.040441163,-0.24271046,-0.46144044,0.21661025,-0.5348858,0.5816833,-0.1794146,0.13116649,0.054915056,-0.19577196,0.11211455,-0.27792504,-0.12591667,0.008320717,0.71427566,-0.20936431,0.4789635,0.22172584,-0.61783564,-0.16055806,-0.091944665,-0.053093098,-0.15083674,0.5115659,-0.13901743,-0.42650267,-0.08975139,0.1475523,1.4774462,-0.42884505,0.09692457,0.35858166,-0.0578156,0.22661261,-0.47473904,0.4480489,-0.29113775,0.029098693,-0.24000767,-0.414852,0.4946373,-0.32234406,-0.55274266,-0.00059562176,-0.6912524,0.32913145,0.20467815,0.29202282,0.34052047,-0.63322556,-0.6312823,0.092416376,0.13265549,-2.0222042,0.12261,0.44718242,0.15977398,-0.4432995,-0.85989493,0.8215406,0.18273789,-0.17765547,-0.30815774,1.3857554,0.33414894,-0.17472179,0.35424668,0.4834768,0.5516329,-0.2552133,-0.43318963,-0.17194232,-1.1785254,-0.003997431,0.5226675,1.2644289,0.13999367,0.99129206,0.31726483,0.36286303,-0.5634686,-1.6014398,-0.373379,0.15469496,0.54885954,1.0445418,-0.42671666,-0.23876512,0.67449105,-0.031467166,-0.39169505,-0.19529557,-0.5058422,2.2018414,-0.43857384,0.44075948,-0.60520303,-0.1857933,0.17270838,0.4735977,0.80521286,-0.10170939,0.618922,-0.43995634,0.48421136,-0.3959164,0.4580754,0.8942403,-0.034444213,0.012371272,0.84104574,0.47229773,0.784233,0.4139771,0.24558794,0.18497881,-0.33278486,0.33565697],"result":{"type":"object","properties":{"content":{"properties":{"html":{"type":"string"},"language":{"type":"string"},"lastModified":{"type":"string"},"title":{"type":"string"},"url":{"type":"string"}},"required":["title","html","url","lastModified","language"],"type":"object"}},"required":["content"]},"sql_tables":null,"sql_queries":null,"file_inbox":null,"oauth":null,"assets":null,"runner":"any","operating_system":["linux","macos","windows"],"tool_set":""},false]}