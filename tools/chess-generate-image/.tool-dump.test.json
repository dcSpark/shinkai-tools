{"type":"Python","content":[{"name":"Chess Generate Image","tool_router_key":"local:::__official_shinkai:::chess_generate_image","homepage":null,"author":"@@official.shinkai","version":"1.0.0","mcp_enabled":null,"py_code":"# /// script\n# dependencies = [\n#   \"python-chess>=1.999\",\n#   \"cairosvg>=2.5.2\",\n#   \"requests\"\n# ]\n# ///\nimport chess\nimport chess.svg\nimport cairosvg\nimport os\nfrom typing import Dict, Any, Optional, List\nfrom shinkai_local_support import get_home_path\n\nclass CONFIG:\n    pass\n\nclass INPUTS:\n    fen: str\n    last_move_uci: Optional[str] = None  # highlight the last move, optional\n    output_filename: str = \"chess_position.png\"  # allow customizing the output filename\n\nclass OUTPUT:\n    image_path: str\n\nasync def run(c: CONFIG, p: INPUTS) -> OUTPUT:\n    if not p.fen:\n        raise ValueError(\"No FEN provided\")\n\n    board = chess.Board()\n    try:\n        board.set_fen(p.fen)\n    except ValueError:\n        raise ValueError(\"Invalid FEN\")\n\n    # Optionally highlight the last move\n    arrows = []\n    if p.last_move_uci and len(p.last_move_uci) in (4,5):\n        try:\n            move = board.parse_uci(p.last_move_uci)\n            arrows.append(chess.svg.Arrow(start=move.from_square, end=move.to_square, color=\"#FF0000\"))\n        except:\n            pass\n\n    svg_data = chess.svg.board(board, arrows=arrows)\n    png_data = cairosvg.svg2png(bytestring=svg_data.encode(\"utf-8\"))\n\n    # Get home path and create output path\n    home_path = await get_home_path()\n    filename = p.output_filename\n    file_path = os.path.join(home_path, filename)\n    \n    # Write the PNG data to file\n    with open(file_path, \"wb\") as f:\n        f.write(png_data)\n\n    out = OUTPUT()\n    out.image_path = file_path\n    return out ","tools":[],"config":[],"description":"Generate a PNG image of a chess position from FEN notation with optional last move highlighting","keywords":["chess","image","png","fen","board","visualization"],"input_args":{"type":"object","properties":{"last_move_uci":{"type":"string","description":"Optional UCI format move to highlight (e.g. 'e2e4')"},"fen":{"type":"string","description":"FEN string representing the chess position"},"output_filename":{"type":"string","description":"Optional filename for the output PNG image (default: chess_position.png)","default":"chess_position.png"}},"required":["fen"]},"output_arg":{"json":""},"activated":false,"embedding":[0.03263557,1.0119861,-0.23269661,-0.25092065,-0.51556396,0.41625348,0.134654,-0.4768099,-0.19119893,0.47177815,-0.27905035,0.632724,0.20390384,0.14261794,0.33992094,-0.51685274,-0.2579559,-0.058004756,-1.8834052,-0.20483115,-0.40737456,0.76544803,0.5861584,-0.585644,-0.09801395,-0.038414583,0.44239148,-0.31902152,-1.1449529,-1.5332036,0.6544462,0.38312307,-0.38589358,-0.07316911,0.056465723,-0.41631883,-0.3934231,0.27919298,0.09016509,-0.13455841,0.2963213,-0.27942008,-0.37843952,-0.07572158,0.24220707,0.2845446,0.39852986,-0.27070755,0.70649374,0.43096536,-0.91936946,-0.45042694,-0.19015105,0.08983563,0.007913537,0.27816874,-0.15865877,-0.034093402,-0.033238836,0.2942448,-0.4537539,0.037688695,-3.2923324,0.24350612,0.7810143,-0.17188457,0.13448818,-0.1496556,0.14021488,0.73303795,0.37517092,0.03638074,-0.3161946,-0.012280352,-0.20936719,-0.16283655,0.16674618,0.2267134,0.18270254,-0.77144897,-0.33272418,0.66967684,0.04284602,0.5089391,-0.337073,0.67261416,-0.13935676,-0.39401546,-0.20002255,0.2543302,0.010817451,-0.02011589,0.0072413096,-0.42601907,-0.94769645,0.7998248,-0.22403698,0.71531504,-0.25395694,3.1837873,0.6463712,-0.45709202,0.42967498,-0.1642568,0.7396097,-0.46815303,-0.337677,-0.8663942,0.3413156,-0.2763207,-0.20288992,0.25289786,-0.31736934,-0.27342477,-0.16548447,0.26120433,-0.6805743,-0.39175466,0.03652771,0.14082892,-0.46102792,0.011078616,-0.8187133,-0.12248505,0.74560887,-0.13283937,-0.43381068,0.39516723,0.022976879,0.072450876,0.3998649,0.59712654,-0.8055123,0.17867266,0.043876894,-0.12306181,0.14778177,-0.8532476,0.07204044,0.31330055,0.33141994,-1.0999423,1.6050425,0.077900566,0.9038149,-0.008247744,-0.11270874,0.02864948,-0.8491751,-0.9110124,-0.40245768,0.121654004,0.7839202,0.8181032,0.6916974,0.27381274,-0.87058204,0.18781552,-0.18304959,0.19363815,-0.18644209,-0.35037267,0.611838,0.10217768,0.14592499,-0.38701773,0.4512732,0.48259455,0.68145823,-0.35201994,0.2649756,0.113948524,0.24369077,0.1964968,0.16130172,-0.28478837,0.27006784,-0.54038274,0.50675666,-0.26021448,0.37230426,0.47282988,-0.19897474,-0.7411815,0.12139465,-0.22185461,-0.34118298,0.27337706,0.2577417,1.1181122,0.46523866,1.5812639,-0.4647271,0.22044855,0.19257325,0.6303355,-0.037594534,0.70401686,0.36821914,-0.055830825,-0.462054,-0.638689,-0.25366122,-0.41829428,0.16073489,-0.31308484,0.22298041,-0.2086808,-0.51992327,-0.14460482,-0.6763295,0.09613103,1.2537739,0.27552298,0.313872,-0.0011668149,0.417888,0.46219403,0.700532,0.1474262,0.4009715,0.77059984,-1.0147718,-0.3884911,-0.85538965,-0.24081935,-0.37826753,-0.74456614,-1.045478,-0.34424946,0.956724,0.45224133,0.23367447,1.4284304,0.8254436,0.065065786,-0.022763751,0.5243881,-0.32063094,-0.87076616,1.2034823,0.77995074,-0.61384916,-0.7378694,-0.25782934,-1.0508538,-0.611867,0.41365469,0.11131508,2.224219,1.2066565,-0.029023964,0.3295503,0.67267716,-0.20933902,-0.27140883,-1.5906638,-0.60345066,-0.48744667,0.2366709,-0.17894512,-0.28571233,-0.089465216,-0.66106904,-0.24350452,-0.6883848,-0.60230285,-0.2916999,-0.26515087,-0.3834184,-0.02547542,0.57195866,-0.115075715,0.5573049,-0.11734862,0.25363424,0.41058043,-0.26006475,-0.8700037,-0.23430096,0.030631635,-0.062071517,-0.1062505,-0.030874372,-0.12826538,-0.3435982,-0.40902165,-0.44495487,0.17093152,0.3331291,0.16530648,-0.53647715,0.11543882,0.15432012,1.522505,-0.34010878,-0.057545695,0.7010731,0.08058833,0.62202644,-0.25372162,0.5627611,-0.02850317,-0.16527402,-1.2291508,-0.8306515,0.06378138,-0.45420542,-0.67775965,0.3645756,-0.389707,-0.20300677,0.29685175,-0.33949935,0.24876186,-0.16049537,-0.31103158,0.637612,0.055256847,-1.986099,-0.10404137,0.2863578,0.29590487,-0.30688947,-0.75263786,0.13597922,-0.510039,0.18678522,-0.11049915,0.66638875,-0.063051954,0.065493114,0.4003427,0.38327366,0.5233053,0.08192182,0.26856542,0.43144634,-0.463457,0.36888802,-0.061367586,2.0516605,0.6558617,0.46481645,-0.4366448,0.22284353,-1.0418953,-1.2010491,0.10361131,0.16666992,-0.26258838,0.32926744,-0.0008429438,0.11098804,0.58888733,0.3054325,-0.36854348,-0.12931623,0.2096476,1.3184375,-0.15788369,0.18003863,0.19426012,0.13591185,-0.4128138,-0.35760337,0.4915986,-0.49410748,-0.031066217,0.8751338,0.33336663,-0.91409814,0.38711786,0.16606005,1.269139,0.35262448,-0.26841152,0.38784,0.43977287,0.17143472,0.6242113,-0.7473483,-0.81096536,-0.11264944],"result":{"type":"object","properties":{"image_path":{"description":"Path to the generated PNG image file","type":"string"}},"required":["image_path"]},"sql_tables":null,"sql_queries":null,"file_inbox":null,"oauth":null,"assets":null,"runner":"any","operating_system":["linux","macos","windows"],"tool_set":""},false]}