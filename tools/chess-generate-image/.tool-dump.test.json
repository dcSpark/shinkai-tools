{"type":"Python","content":[{"version":"1.0.0","name":"Chess Generate Image","homepage":null,"author":"@@official.shinkai","py_code":"# /// script\n# dependencies = [\n#   \"python-chess>=1.999\",\n#   \"cairosvg>=2.5.2\",\n#   \"requests\"\n# ]\n# ///\nimport chess\nimport chess.svg\nimport cairosvg\nimport os\nfrom typing import Dict, Any, Optional, List\nfrom shinkai_local_support import get_home_path\n\nclass CONFIG:\n    pass\n\nclass INPUTS:\n    fen: str\n    last_move_uci: Optional[str] = None  # highlight the last move, optional\n    output_filename: str = \"chess_position.png\"  # allow customizing the output filename\n\nclass OUTPUT:\n    image_path: str\n\nasync def run(c: CONFIG, p: INPUTS) -> OUTPUT:\n    if not p.fen:\n        raise ValueError(\"No FEN provided\")\n\n    board = chess.Board()\n    try:\n        board.set_fen(p.fen)\n    except ValueError:\n        raise ValueError(\"Invalid FEN\")\n\n    # Optionally highlight the last move\n    arrows = []\n    if p.last_move_uci and len(p.last_move_uci) in (4,5):\n        try:\n            move = board.parse_uci(p.last_move_uci)\n            arrows.append(chess.svg.Arrow(start=move.from_square, end=move.to_square, color=\"#FF0000\"))\n        except:\n            pass\n\n    svg_data = chess.svg.board(board, arrows=arrows)\n    png_data = cairosvg.svg2png(bytestring=svg_data.encode(\"utf-8\"))\n\n    # Get home path and create output path\n    home_path = await get_home_path()\n    filename = p.output_filename\n    file_path = os.path.join(home_path, filename)\n    \n    # Write the PNG data to file\n    with open(file_path, \"wb\") as f:\n        f.write(png_data)\n\n    out = OUTPUT()\n    out.image_path = file_path\n    return out ","tools":[],"config":[],"description":"Generate a PNG image of a chess position from FEN notation with optional last move highlighting","keywords":["chess","image","png","fen","board","visualization"],"input_args":{"type":"object","properties":{"output_filename":{"type":"string","description":"Optional filename for the output PNG image (default: chess_position.png)"},"fen":{"type":"string","description":"FEN string representing the chess position"},"last_move_uci":{"type":"string","description":"Optional UCI format move to highlight (e.g. 'e2e4')"}},"required":["fen"]},"output_arg":{"json":""},"activated":false,"embedding":[0.032729693,1.0119934,-0.23267765,-0.25097826,-0.51557654,0.41626486,0.1343692,-0.4765576,-0.1912141,0.47182304,-0.27915794,0.6329949,0.20379753,0.14261886,0.33979908,-0.51676613,-0.25791192,-0.058083337,-1.8833051,-0.2050018,-0.4075542,0.765411,0.5863407,-0.58561546,-0.09786025,-0.03829273,0.44228107,-0.31918234,-1.1452702,-1.5330564,0.6543405,0.38322148,-0.38568768,-0.07307997,0.05653287,-0.41618338,-0.39366028,0.2791135,0.09008574,-0.13466454,0.29652858,-0.27948394,-0.3783822,-0.07555157,0.242249,0.28459454,0.39863166,-0.2706172,0.70656514,0.43057692,-0.9193365,-0.4503999,-0.19018131,0.08995362,0.007946093,0.27796975,-0.15865675,-0.034037888,-0.033281256,0.2943731,-0.45355105,0.03757287,-3.2921774,0.24355029,0.7809772,-0.17181581,0.13451223,-0.1497338,0.140184,0.73279315,0.37502563,0.036452956,-0.31638515,-0.012242649,-0.20928892,-0.16287121,0.1666895,0.22662358,0.18277538,-0.77135134,-0.3326483,0.6696121,0.042926736,0.5087398,-0.33706573,0.6724881,-0.13927844,-0.3939796,-0.19989589,0.25436598,0.010686399,-0.020136382,0.007182005,-0.42593208,-0.9479251,0.79980636,-0.22424833,0.71546537,-0.25390553,3.1837778,0.646358,-0.45692334,0.4297949,-0.16427407,0.73958004,-0.46805152,-0.3377918,-0.86626124,0.34134883,-0.27622658,-0.20284347,0.25296795,-0.31738627,-0.27345702,-0.16541731,0.26112422,-0.6806464,-0.39182478,0.03651599,0.14089225,-0.46101603,0.010974713,-0.8189919,-0.12245665,0.7456416,-0.1329365,-0.43380937,0.39505088,0.022943098,0.0723068,0.40015435,0.5969842,-0.8053802,0.17864406,0.04382189,-0.12305925,0.14789039,-0.8530671,0.07199107,0.3134663,0.3312071,-1.1001387,1.6050723,0.07785331,0.9036473,-0.008204825,-0.11263455,0.028643213,-0.8492052,-0.91088074,-0.40261245,0.12154703,0.78394145,0.8182031,0.691703,0.2736142,-0.8704842,0.18785566,-0.1827323,0.19349515,-0.18642855,-0.3503658,0.6118898,0.101968676,0.14597362,-0.3871449,0.451147,0.4826958,0.68147236,-0.3519495,0.26492625,0.114026785,0.24394725,0.19660147,0.16123165,-0.2847726,0.2700434,-0.540625,0.5066915,-0.26008776,0.3722159,0.47292942,-0.19904841,-0.74097633,0.12136833,-0.22170402,-0.34141135,0.27355477,0.25785866,1.1181085,0.46514812,1.5814403,-0.4649452,0.22036955,0.19252948,0.6302937,-0.037691887,0.7040307,0.3681456,-0.055824716,-0.4620906,-0.63878655,-0.25374573,-0.41818342,0.16070709,-0.31310993,0.2230211,-0.20852737,-0.51993525,-0.14455953,-0.6761954,0.096246555,1.2538788,0.275657,0.31407228,-0.0014049355,0.41786733,0.46217167,0.70059955,0.14756644,0.40091142,0.7705689,-1.0146606,-0.38848275,-0.85531455,-0.24092044,-0.3781833,-0.744498,-1.0456153,-0.3443068,0.95655954,0.45220116,0.233505,1.4280971,0.82553524,0.065053545,-0.02283261,0.52431154,-0.32066992,-0.87057227,1.2035345,0.77978253,-0.6138107,-0.738044,-0.25797617,-1.0508436,-0.61183476,0.413539,0.1112196,2.2243345,1.2067114,-0.028988775,0.32958764,0.6726532,-0.20926982,-0.2714318,-1.5909321,-0.60338354,-0.48749074,0.2367844,-0.1792734,-0.2857553,-0.08974716,-0.66103387,-0.24356122,-0.68851614,-0.60245115,-0.29187843,-0.2651496,-0.38368395,-0.025518704,0.5720124,-0.11513154,0.5574533,-0.11703434,0.2534836,0.41075712,-0.26004958,-0.86979556,-0.23415314,0.030873094,-0.062077045,-0.10609669,-0.03089425,-0.12803748,-0.3435658,-0.40905502,-0.44483697,0.17118023,0.3331784,0.16518569,-0.53632224,0.11550689,0.15418695,1.5227658,-0.34013095,-0.057511773,0.7008949,0.08052514,0.6220899,-0.25361958,0.5628561,-0.028543994,-0.16515888,-1.2291632,-0.8305777,0.06368388,-0.45426494,-0.677996,0.36459416,-0.38965762,-0.20296443,0.29700246,-0.33953333,0.24883252,-0.16045094,-0.3110919,0.63769937,0.055358607,-1.9860502,-0.10408342,0.2863523,0.2956547,-0.30684528,-0.7526242,0.13612506,-0.5101924,0.18692334,-0.110589646,0.66648376,-0.0628724,0.06563624,0.40037805,0.38330543,0.52348304,0.081960104,0.26864722,0.4315311,-0.46371534,0.36868232,-0.061247513,2.0518267,0.65584683,0.4645729,-0.43679127,0.22283554,-1.0418568,-1.2010225,0.10345263,0.1666244,-0.26256135,0.32919043,-0.00079279393,0.11097917,0.5889653,0.3051795,-0.3686697,-0.12939921,0.20949799,1.3185683,-0.15778026,0.18000017,0.19425225,0.1357902,-0.41294166,-0.35758603,0.49161434,-0.49412423,-0.030952726,0.875046,0.3334477,-0.91403747,0.3871137,0.1662896,1.2688735,0.35266423,-0.26841837,0.38791358,0.43986228,0.17156728,0.62405884,-0.74739736,-0.81099594,-0.11259714],"result":{"type":"object","properties":{"image_path":{"description":"Path to the generated PNG image file","type":"string"}},"required":["image_path"]},"sql_tables":null,"sql_queries":null,"file_inbox":null,"oauth":null,"assets":null,"runner":"any","operating_system":["linux","macos","windows"],"tool_set":""},false]}