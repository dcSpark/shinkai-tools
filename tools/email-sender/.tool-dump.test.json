{"type":"Python","content":[{"name":"Send Email","tool_router_key":"local:::__official_shinkai:::send_email","homepage":null,"author":"@@official.shinkai","version":"1.0.0","mcp_enabled":null,"py_code":"from typing import Any, Optional, List, Dict\nimport smtplib\nfrom email.mime.text import MIMEText\nfrom email.mime.multipart import MIMEMultipart\nfrom datetime import datetime\nimport logging\n\n# Configure logging\nlogging.basicConfig(level=logging.ERROR, format='%(asctime)s - %(levelname)s - %(message)s')\n\nclass CONFIG:\n    smtp_server: str\n    port: int = 465  # Default port for SMTP\n    sender_email: str\n    sender_password: str\n    ssl: bool = True  # New flag to specify SSL usage for SMTP\n\nclass INPUTS:\n    recipient_email: str\n    subject: str\n    body: str\n\nclass OUTPUT:\n    status: str\n    message: str\n\n\nasync def run(config: CONFIG, inputs: INPUTS) -> OUTPUT:\n    output = OUTPUT()\n    output.status = \"failed\"\n    output.message = \"\"\n\n    msg = MIMEMultipart()\n    msg['From'] = config.sender_email\n    msg['To'] = inputs.recipient_email\n    msg['Subject'] = inputs.subject\n    msg['Date'] = datetime.now().strftime('%a, %d %b %Y %H:%M:%S %z')\n\n    msg.attach(MIMEText(inputs.body, 'plain'))\n\n    try:\n        # Use SSL if the ssl flag is set to True\n        if config.ssl:\n            with smtplib.SMTP_SSL(config.smtp_server, config.port) as server:\n                server.login(config.sender_email, config.sender_password)\n                server.send_message(msg)\n        else:\n            with smtplib.SMTP(config.smtp_server, config.port) as server:\n                try:\n                    server.starttls()  # Upgrade to a secure connection\n                except Exception as e:\n                    logging.error(f\"Failed to upgrade to a secure connection: {e}\")\n                # Attempt to login and send the message regardless of starttls success\n                server.login(config.sender_email, config.sender_password)\n                server.send_message(msg)\n\n        output.status = \"success\"\n        output.message = \"Email sent successfully\"\n    except Exception as e:\n        output.message = f\"An error occurred: {e}\"\n\n    return output","tools":[],"config":[{"BasicConfig":{"key_name":"smtp_server","description":"The SMTP server address","required":true,"type":null,"key_value":null}},{"BasicConfig":{"key_name":"port","description":"The SMTP server port","required":false,"type":null,"key_value":null}},{"BasicConfig":{"key_name":"sender_email","description":"The sender's email address","required":true,"type":null,"key_value":null}},{"BasicConfig":{"key_name":"sender_password","description":"The sender's email password","required":true,"type":null,"key_value":null}},{"BasicConfig":{"key_name":"ssl","description":"Whether to use SSL for the SMTP connection (defaults to true)","required":false,"type":null,"key_value":null}}],"description":"Sends an email using SMTP.","keywords":["email","smtp","send","notification"],"input_args":{"type":"object","properties":{"recipient_email":{"type":"string","description":"The recipient's email address"},"body":{"type":"string","description":"The email body"},"subject":{"type":"string","description":"The email subject"}},"required":["recipient_email","subject","body"]},"output_arg":{"json":""},"activated":false,"embedding":[-0.16849849,0.3695711,0.07117214,-0.36375552,-0.14533116,0.21454099,-0.5071917,0.16769284,0.21847558,-0.043817252,-0.08548817,0.3419681,-0.3600595,-0.18789122,0.5564393,-0.69143814,0.22450812,-0.83099854,-1.5293527,-0.04728625,-0.6572813,0.70199835,0.4735719,0.18734193,-0.1727176,0.2914563,0.6691552,-0.07855036,-1.2674776,-1.8490092,-0.08139635,1.0740864,-0.5670541,0.19933385,0.16906324,-0.33452502,-0.26190585,-0.09648633,-0.47347292,-0.37633425,0.17648837,-0.88364685,-0.61447924,0.14739051,0.004522771,-0.073539406,0.18757544,-0.00936703,0.48102036,0.6019979,-0.39044815,-0.5288019,-0.047914192,0.3420736,-0.5090729,0.012983009,0.24959123,-0.07350885,0.08543557,0.079499595,-0.16840124,0.38070136,-4.0147347,0.44081455,0.19280791,-0.05198741,0.013481584,-0.0562295,-0.0881534,-0.5271634,0.47183895,-0.06054949,-0.74888116,1.1055299,0.534087,-0.6932957,-0.31223947,-0.039209843,0.5958045,0.098149434,0.30964082,0.8743197,-0.17293589,0.7560081,-0.97254187,0.69055855,-0.12525967,-0.1491245,0.4222002,0.34062025,-0.44701728,-0.40144995,0.18682317,-0.0699511,-0.19837138,-0.2095095,-0.2613922,0.12739438,0.22718248,2.775285,0.51239204,-0.01549137,0.60047174,-1.018044,-0.014118724,-0.257024,-0.47033474,-0.8859445,-0.30313355,-0.7119816,-0.0033453275,0.121263504,0.10445157,-0.24740848,0.46695697,-0.04551126,-0.3541997,0.36729816,-0.06571811,1.0200845,-0.24066338,0.12857802,-0.5496505,-0.35710046,0.12270661,0.15139651,-0.32481068,0.10565793,-0.13948748,0.2731019,0.6597577,-0.78036153,-0.21350683,-0.20569727,0.23236792,0.11214395,0.40516067,-0.5234825,0.06686041,-0.4145547,0.59581643,-2.140573,1.3060453,0.75072384,0.6721271,-0.10104349,0.10605386,-0.11258484,-0.42592418,-0.07611515,-0.3342033,0.0933322,0.20081982,0.42280585,0.7560607,-0.15222092,-0.12181301,0.57642055,-0.09777323,0.0077470466,-0.134687,0.14328112,-0.09588525,0.2879513,0.031089075,-1.0180497,-0.090471685,0.38252503,-0.30241883,-0.072031625,0.25853175,-0.30128533,-0.30050823,0.33856717,-0.18446301,-0.134705,0.2186684,0.14944115,0.44626975,-0.52761894,0.44029677,0.48323852,-0.20039858,-0.20530844,0.009853467,0.6197663,0.29322645,-0.26619864,1.186586,0.20868957,-0.8692946,1.1942103,-0.70942914,-0.6704812,0.1645348,0.15504478,-0.27313876,0.499987,0.40271002,0.052702323,-0.28822094,-0.25627697,0.3237491,0.20657438,-0.114376076,-0.31568313,0.03619645,0.093236685,0.044972204,-0.38761324,0.16516073,-0.24105549,0.20686874,-0.0077543855,0.36428437,0.58513474,-0.765104,0.462053,-0.28020218,0.5699448,0.40959764,0.39013338,-0.42506224,-0.43498698,-0.30603686,0.48025215,-0.13011123,0.49064392,-0.29077172,-0.42086703,0.3025532,0.8222708,0.19952226,1.315366,0.3088362,0.17635635,-0.24149412,0.49254212,0.6639917,-0.1827397,0.020970125,0.0928528,0.13838466,0.035698652,0.73423237,-0.6336031,0.5252636,0.3100867,-0.091461934,1.859482,0.7144325,0.5166658,0.037076004,0.50775594,0.18960649,0.1980586,-1.0316366,-0.33050188,-0.8292333,0.9908104,0.28151676,-0.07460519,0.7430801,0.36419415,-0.22624214,-0.05188011,-0.69222295,-0.8024112,-0.31213206,-0.084516674,-0.5191305,0.41356146,-0.29689997,0.43966362,-0.17659354,-0.6929123,0.4781977,0.33171672,-0.058556806,-0.7301413,-0.09955453,0.015184483,0.50086737,-0.1486369,-0.14691713,-0.6800882,0.20046915,-0.40414008,-0.14995438,0.33870816,0.045715787,-0.7878523,-0.54265666,0.57605124,2.071393,0.23283248,0.22510399,0.5639433,0.12139514,0.39570463,0.1474967,-0.019547202,-0.5406825,-0.32170618,-0.8358175,-0.34736395,0.025858533,-0.74651307,-0.076383434,-0.03318933,0.017962627,-0.18349104,0.26431292,0.1256489,0.5923776,0.30781716,-0.24926068,0.048441097,0.033344384,-2.4326584,0.018400954,0.2529835,-0.18855491,-0.44691318,-0.8882079,0.09549046,-0.016739286,0.10403088,-0.38393903,1.4529417,-0.110660255,-0.43038714,0.35400927,0.080274336,0.8489567,-0.18635125,0.22458088,-0.31267673,-0.9736802,-0.420261,1.1247519,2.2466972,0.002389377,-0.026106331,-0.16039312,-0.18420035,-0.37301672,-1.1865067,0.4054343,-0.17462601,-0.17986947,0.22231509,-0.09591822,-0.2400631,-0.6230144,0.5861308,-0.05886857,-0.21879706,-0.63765204,1.4557002,0.05939669,0.6802776,-0.68131244,-0.21962301,-0.09772832,-0.13276859,0.2240446,-0.04081859,-0.49993366,0.573576,0.26852047,0.117099844,0.3157466,0.21015689,0.35878202,0.3528545,-0.12824091,0.7792294,1.0011474,0.45539874,0.33452705,0.6634655,-0.7269936,0.13122904],"result":{"type":"object","properties":{"message":{"description":"A message indicating the result of the operation","type":"string"},"status":{"description":"The status of the email sending operation ('success' or 'failed')","type":"string"}},"required":["status","message"]},"sql_tables":[],"sql_queries":[],"file_inbox":null,"oauth":null,"assets":null,"runner":"any","operating_system":["linux","macos","windows"],"tool_set":""},false]}