{"type":"Deno","content":[{"name":"Coinbase Transactions Getter","homepage":null,"author":"@@official.shinkai","version":"1.0.0","mcp_enabled":null,"js_code":"import { Coinbase, CoinbaseOptions } from 'npm:@coinbase/coinbase-sdk@0.0.16';\n\ntype Configurations = {\n  name: string;\n  privateKey: string;\n  walletId: string;\n};\ntype Parameters = {};\ntype Result = { tableCsv: string; rowsCount: number; columnsCount: number };\nexport type Run<C extends Record<string, any>, I extends Record<string, any>, R extends Record<string, any>> = (config: C, inputs: I) => Promise<R>;\n\nexport const run: Run<Configurations, Parameters, Result> = async (\n  configurations: Configurations,\n  _parameters: Parameters,\n): Promise<Result> => {\n  const coinbaseOptions: CoinbaseOptions = {\n    apiKeyName: configurations.name,\n    privateKey: configurations.privateKey,\n  };\n  const coinbase = new Coinbase(coinbaseOptions);\n  const user = await coinbase.getDefaultUser();\n\n  // Prioritize walletId from Params over Config\n  const walletId = configurations.walletId;\n\n  const wallet = await user.getWallet(walletId);\n  console.log(`Wallet retrieved: `, wallet.toString());\n\n  // Retrieve the list of balances for the wallet\n  const address = await wallet.getDefaultAddress();\n  const transactions = (await address?.listTransfers()) ?? [];\n\n  // Convert transactions to CSV format\n  const headers = [\n    'transferId',\n    'networkId',\n    'fromAddressId',\n    'destinationAddressId',\n    'assetId',\n    'amount',\n    'transactionHash',\n    'transactionLink',\n    'status',\n  ];\n  const rows = transactions.map((tx) => [\n    tx.getId(),\n    tx.getNetworkId(),\n    tx.getFromAddressId(),\n    tx.getDestinationAddressId(),\n    tx.getAssetId(),\n    tx.getAmount().toString(),\n    tx.getTransactionHash(),\n    tx.getTransactionLink(),\n    tx.getStatus(),\n  ]);\n  const tableCsv = [headers, ...rows].map((row) => row.join(';')).join('\\n');\n\n  return Promise.resolve({\n    tableCsv,\n    rowsCount: transactions.length,\n    columnsCount: headers.length,\n  });\n};\n","tools":[],"config":[{"BasicConfig":{"key_name":"name","description":"","required":true,"type":null,"key_value":null}},{"BasicConfig":{"key_name":"privateKey","description":"","required":true,"type":null,"key_value":null}},{"BasicConfig":{"key_name":"walletId","description":"","required":true,"type":null,"key_value":null}}],"description":"Tool for getting the transactions of a Coinbase wallet after restoring it","keywords":["coinbase","balance","shinkai"],"input_args":{"type":"object","properties":{},"required":[]},"output_arg":{"json":""},"activated":false,"embedding":[0.16905856,0.19316657,-0.31096366,-0.03930089,-0.13070993,-0.342733,0.042769067,0.55354315,-0.1559879,-0.1908449,-0.24164043,0.16036406,-0.077773444,0.034246862,0.2759887,-0.43007448,0.063248366,-0.31613737,-1.3910563,0.30503944,0.47412896,0.83548474,-0.595558,0.30243534,-0.53630984,-0.19887169,-0.36940238,-0.04188856,-1.4896374,-2.298426,0.1975967,1.2254493,-0.38727722,-0.20194548,-0.44138837,-0.24105352,0.069388725,0.33460042,-0.5545939,-0.4953295,0.058823265,0.4687226,-0.6847102,-0.011341985,0.040832292,-0.24200827,0.5259422,-0.48128736,0.24842434,0.62633604,0.006064225,0.13622563,0.59434825,-0.6498951,-0.062131125,-0.024681218,-0.08062509,-0.37228784,0.1344217,0.32000235,-0.03586854,0.0027791113,-4.025271,0.0560789,0.70454174,-0.15482685,0.3696342,0.4445307,-0.57368064,0.5600888,-0.4609372,-0.32811037,-0.5173279,0.21781334,0.51512605,-0.15638289,0.7444767,0.36059123,0.3973617,-0.19716659,-0.055836603,0.94802207,0.06727344,0.051305037,-0.5469406,0.39752468,-0.14593062,-0.46309182,0.24405392,0.22481823,0.21856624,0.23181757,0.07396483,-0.20222676,-0.26784682,-0.058722652,0.10064122,1.1254053,0.3793862,3.003576,0.6363432,0.704514,0.34474584,-0.7837544,0.7463933,-0.5485406,-0.11798045,-0.23614119,0.46605277,-0.15877241,0.73912466,-0.37597704,0.7569035,0.28465733,0.16498233,0.10725248,-0.79240775,-0.034803014,-0.13407858,0.35156974,-0.463989,0.27749884,-0.5405224,-0.14062917,-0.491981,-0.27288198,-0.07908675,0.30637062,-0.15702468,-0.03871718,0.6581159,-0.65227497,-0.9733248,-0.0072512943,0.00589082,0.3320157,-0.15737467,-0.6688312,-0.6252703,-0.54816693,-0.07222405,-1.1473912,1.0722796,-0.18277845,0.15118389,-0.33533707,0.46754053,-0.33865958,-0.26505393,-0.099975795,-0.15559907,0.13023634,0.16599618,-0.11091832,0.58644027,-0.2664324,0.07394148,-0.2865878,-0.7367614,0.24811095,-0.21070963,-0.11123965,0.7359434,0.8509719,0.9835392,-0.7231167,0.5752989,0.20505837,0.31845444,-0.43418747,0.4544018,0.031411737,-0.107296854,0.021323927,-0.50597006,-0.056520335,-0.015007183,-0.26790163,0.019164614,-0.28701428,-0.90067726,0.5619874,-0.6723495,-0.7457457,-0.036022346,0.16343845,0.24381626,-0.07627755,0.5424064,0.4965844,-0.7289926,1.8669206,-0.47933006,0.11901897,-0.34149805,-0.22773471,-0.032304775,0.29446444,0.36869514,0.1311073,-0.2405419,0.11345148,-0.13873845,0.40902993,-0.6185438,-0.17320177,0.25180095,0.367154,-0.3623234,-0.4950976,0.3082096,0.087154806,0.47601292,0.50705886,0.44660184,-0.1411995,0.5917067,-0.09943195,0.8244464,-0.02387853,0.7300523,0.3705076,-0.5623865,-0.5486959,-0.61395574,-0.19736181,0.49674714,0.5359122,0.062710255,0.10940486,0.017314292,0.47011426,0.5017095,0.38414136,1.4785273,0.29963556,-0.38941583,-0.0650139,0.11700675,-0.8425208,0.2072222,0.3409634,-0.387717,-0.44693822,-0.20260683,-0.4931433,0.7348643,0.12253916,0.3182739,1.8686953,0.4721119,-0.2238577,0.668727,-0.35580873,0.27963436,-0.1398392,-1.4279646,-0.062742956,-0.21577227,0.27417076,0.23481184,-0.14752644,0.1742603,0.2816684,0.20507996,-0.45155105,-0.8092639,0.6596159,0.33298248,-0.2323904,0.06464819,1.376455,1.0474207,0.22874084,-0.53902066,-0.19847076,0.34240803,0.10597512,-0.36826795,0.25281864,0.4224413,-0.34081787,0.8986299,0.32721418,0.43744558,-0.1266262,-0.056912582,0.22358972,-0.98763496,-0.23981747,-0.1003313,-0.77511966,-0.803408,0.88690335,2.1023262,0.5896715,0.45217162,0.36772665,0.115120396,0.38780087,-0.3136245,0.8279916,-0.29263648,0.4830252,-1.0535784,-0.72916037,0.63849086,-0.63817674,-0.20295513,-0.13022843,0.09501622,0.5561193,0.23010689,0.41008273,0.1576114,-0.52638364,-0.5260012,0.39983878,-0.4385972,-2.0972366,0.16965365,-0.65889186,-0.5434217,-0.24376792,0.01195919,0.34242657,-0.2961403,0.2585599,-0.25725785,1.6646844,0.07932695,-0.90802586,-0.9551041,-0.121432394,1.0427479,0.32072386,0.15475063,-0.021425895,-0.39035738,0.0010491654,-0.25874728,0.8950188,0.05465614,0.22996998,-0.2894074,-0.049737535,-0.39997113,-0.95167303,0.02189045,-0.48982263,-0.20252159,-0.21612635,0.26044112,-0.2426632,1.2542437,0.41161826,-0.47631454,-0.27176967,-0.43813837,1.1436429,0.09045971,-0.70189303,-0.4549551,-0.41824862,-0.07774045,-0.14329226,0.2356446,-0.3435809,-0.29924512,0.23714653,-0.021496393,-0.5978084,0.0767389,-0.05519018,0.9292908,0.61055535,-0.014056539,0.6391623,0.63459903,-0.05008798,0.25116768,0.054331258,-0.7015309,0.19950148],"result":{"type":"object","properties":{"columnsCount":{"type":"number"},"rowsCount":{"type":"number"},"tableCsv":{"type":"string"}},"required":["tableCsv","rowsCount","columnsCount"]},"sql_tables":null,"sql_queries":null,"file_inbox":null,"oauth":null,"assets":null,"runner":"any","operating_system":["linux","macos","windows"],"tool_set":""},false]}