{"type":"Python","content":[{"version":"1.0.0","name":"macos-system","homepage":null,"author":"@@official.shinkai","mcp_enabled":null,"py_code":"# /// script\n# dependencies = [\n#   \"requests\",\n# ]\n# ///\n\nfrom typing import Dict, Any, Optional, List\nimport subprocess\n\nclass CONFIG:\n    pass\n\nclass INPUTS:\n    command: str\n    level: Optional[int] = None  # for setVolume\n    app_name: Optional[str] = None  # for launchApp/quitApp\n    force: Optional[bool] = False  # for quitApp\n\nclass OUTPUT:\n    result: str\n\nasync def run_applescript(script: str) -> str:\n    \"\"\"Helper function to run AppleScript and return its output.\"\"\"\n    try:\n        result = subprocess.run(['osascript', '-e', script], \n                              capture_output=True, \n                              text=True, \n                              check=True)\n        return result.stdout.strip()\n    except subprocess.CalledProcessError as e:\n        return f\"Error: {e.stderr.strip()}\"\n\nasync def run(config: CONFIG, inputs: INPUTS) -> OUTPUT:\n    output = OUTPUT()\n    script = \"\"\n\n    if inputs.command == \"setVolume\":\n        if inputs.level is None:\n            raise ValueError('Missing \"level\" for setVolume')\n        # Convert 0..100 â†’ 0..7\n        volume_int = round((inputs.level / 100) * 7)\n        script = f'set volume {volume_int}\\nreturn \"Volume set to {inputs.level}%\"'\n\n    elif inputs.command == \"getFrontmostApp\":\n        script = \"\"\"\n            tell application \"System Events\"\n                set frontApp to name of first process whose frontmost is true\n            end tell\n            return frontApp\n        \"\"\"\n\n    elif inputs.command == \"launchApp\":\n        if not inputs.app_name:\n            raise ValueError('Missing \"app_name\" for launchApp')\n        script = f\"\"\"\n            try\n                tell application \"{inputs.app_name}\"\n                    activate\n                end tell\n                return \"Launched {inputs.app_name}\"\n            on error errMsg\n                return \"Failed to launch {inputs.app_name}: \" & errMsg\n            end try\n        \"\"\"\n\n    elif inputs.command == \"quitApp\":\n        if not inputs.app_name:\n            raise ValueError('Missing \"app_name\" for quitApp')\n        quit_cmd = \"quit saving no\" if inputs.force else \"quit\"\n        script = f\"\"\"\n            try\n                tell application \"{inputs.app_name}\"\n                    {quit_cmd}\n                end tell\n                return \"Quit {inputs.app_name}\"\n            on error errMsg\n                return \"Failed to quit {inputs.app_name}: \" & errMsg\n            end try\n        \"\"\"\n\n    elif inputs.command == \"toggleDarkMode\":\n        script = \"\"\"\n            tell application \"System Events\"\n                tell appearance preferences\n                    set dark mode to not dark mode\n                    return \"Dark mode is now \" & (dark mode as text)\n                end tell\n            end tell\n        \"\"\"\n\n    elif inputs.command == \"getBatteryStatus\":\n        script = \"\"\"\n            try\n                set powerSource to do shell script \"pmset -g batt\"\n                return powerSource\n            on error errMsg\n                return \"Failed to get battery status: \" & errMsg\n            end try\n        \"\"\"\n\n    else:\n        raise ValueError(f\"Unknown command: {inputs.command}\")\n\n    output.result = await run_applescript(script)\n    return output ","tools":[],"config":[],"description":"Control macOS system features via AppleScript","keywords":["macos","system","volume","apps","dark-mode","battery","automation","applescript"],"input_args":{"type":"object","properties":{"force":{"type":"boolean","description":"Force quit if true (for quitApp)"},"app_name":{"type":"string","description":"Application name (for launchApp/quitApp)"},"level":{"type":"number","description":"Volume level (0..100) for setVolume"},"command":{"type":"string","description":"Command to execute: control system volume, app management, dark mode, or get battery status"}},"required":["command"]},"output_arg":{"json":""},"activated":false,"embedding":[-0.42311347,-0.592856,-0.0015990846,-0.18567593,0.28827974,-0.20775211,-0.094520286,-0.12214589,0.06872339,-0.035368692,0.10992273,0.62981796,-0.09814305,0.21157959,0.22929591,-0.5644589,-0.027348455,-0.49424994,-0.44289732,-0.17583698,0.03125112,0.5229417,0.09028056,0.24303636,0.11536519,0.18562572,-0.039065737,-0.31043983,-1.2572811,-2.4248624,-0.12317341,0.5485184,-0.048465885,0.07626869,0.09533722,-0.9047946,-0.4025665,-0.019380607,-0.615846,-0.2531038,0.31171045,0.046645403,-0.28888288,-0.32440233,0.6901995,-0.121728644,0.68784684,-0.022356462,0.82740206,0.15170012,-0.36137867,-0.033502202,0.24753572,0.12305664,-0.45379144,0.60751677,0.05523851,-0.056857143,0.03301365,-0.3464377,-0.84140295,0.09792718,-3.6250157,-0.29189134,0.8428593,0.5492743,0.16093677,-0.27422738,0.032667488,-0.034685694,0.20738816,0.34540287,-0.04720767,0.71914315,-0.09908465,-0.696404,0.34471986,-0.18139736,0.4509393,-0.7181181,0.19473974,0.42829803,-0.08980643,0.1906645,-1.1333882,0.18556263,-0.28543103,-0.59220225,0.16786337,-0.20653321,0.22437234,0.38318077,0.38160926,-0.31397653,-0.14499599,-0.0577245,-0.18811125,0.13254333,-0.49719673,3.1576176,0.98867565,0.037736434,0.76170915,-0.51491857,-0.27136412,-0.061037086,0.0073772296,-0.09725893,-0.05333255,0.071282245,-0.21950379,0.11323449,-0.15812564,-0.047165617,-0.06824596,-0.1532441,-0.019654604,0.31141937,-0.5330739,0.66070837,-0.3106947,0.062574126,-0.97542185,-0.2234981,-0.71413386,-0.44769382,-0.33843866,0.3048797,0.093532965,-0.791304,0.6788434,-0.9298694,-0.5276023,-0.08248449,0.39810735,-0.16122079,0.12068732,-0.7919169,-0.24672487,-0.19976279,-0.035910323,-1.3912884,0.9404607,-0.084641166,0.735876,-0.117354795,0.17172286,0.098128326,-0.30781072,-0.32625493,-0.45375383,0.56433415,-0.5284226,-0.029260326,0.58620316,0.10335423,-0.09538909,0.31879473,-0.41034538,0.4724494,-0.30582705,0.09196138,0.6221086,0.26839286,0.74105245,-0.36229032,0.24822643,-0.37444884,0.23325157,-0.16370232,0.21100017,-0.28391865,0.38920403,-0.02573409,-0.37619123,0.62483823,-0.76245356,-0.15921259,0.24998099,-0.43271372,0.30607322,0.23979367,-0.49119863,-0.25235975,0.032986052,0.39986473,0.29598686,0.16898051,0.004722804,0.65032303,-0.6797543,1.8845499,-1.0171983,-0.40959027,-0.11902865,0.33422887,0.50184566,0.6923335,0.08572394,0.2087644,-0.5008653,-0.24326599,-0.1755383,0.14208363,-0.08466155,-0.29352754,0.89596313,0.256901,0.372006,0.09602847,0.32999325,0.10319535,0.6607827,0.22969052,0.6566075,0.39188516,-0.0019943789,0.1758773,0.05408459,0.9917209,0.8211584,0.047763348,-0.8671522,-0.41011164,-0.013992354,-0.52265054,0.51549786,-0.29027396,-0.29060078,-0.2493337,0.17346177,0.4955755,0.7382803,0.054027744,0.53321505,0.108060904,0.29265317,0.42978588,-0.18873772,-0.6365803,0.08113571,-0.07610515,0.0059087574,-0.34005713,0.81905687,-0.47599098,-0.0969615,-0.74414766,-0.18348128,1.5662448,0.9041846,1.2668297,0.016745735,0.08294466,-0.39365458,0.51561624,-1.1481118,0.06510061,-0.2363129,0.6666278,0.45994216,-0.007196799,0.21470545,0.30130413,-0.6445919,0.3800545,0.23541418,-0.23200336,-0.27723786,0.08290068,-0.1691908,0.7547008,-0.16005519,0.15486297,-0.061393276,-0.3727523,0.3252228,-0.15364611,-0.25543472,-0.6247968,-0.4490562,0.41436684,0.14884824,0.16625023,-0.24064884,-0.6749544,-0.042394113,-0.73490983,0.0002098903,-0.066633224,-0.050919976,-0.76823086,0.2652074,0.08767742,1.936443,0.70650095,-0.061190117,0.93207353,-0.055045534,0.04281907,-0.28853258,-0.21239653,-0.100183435,0.034170404,-0.88554794,-0.20771998,0.62678295,-0.5166053,-0.49419004,0.51753396,-0.62093246,0.6262332,0.15745337,-0.6020108,1.4584106,-0.19001812,0.6630072,0.686242,-0.27900386,-2.2445066,-0.5998994,0.12623683,0.30289418,-0.6634464,-0.3095171,0.45112056,0.8280967,0.17123207,-0.5265961,1.2830687,0.61846143,0.45865482,0.0012235213,-0.2036413,0.8102423,0.24136326,0.45344165,0.16601267,-1.2445946,-0.44171005,0.8791081,1.9439433,-0.46590608,-0.16454,0.34065527,-0.41702873,-0.62157226,-1.5497777,0.7178047,-0.12230779,-0.5615004,0.67911345,0.05592425,-0.12393359,0.1833396,0.7161512,-1.1215073,0.25527298,-0.65870607,1.3692032,0.11188613,0.5701043,-0.8835585,0.29648915,0.69152397,-0.10459237,1.0029384,-0.41877192,-0.12523699,0.45593545,-0.059957016,-0.4275834,0.09495114,0.3411834,0.84611446,0.38290054,-0.04834445,0.37353456,0.0856289,-0.14743894,0.06799818,-0.5303901,-0.7732867,-0.38324326],"result":{"type":"object","properties":{"result":{"description":"Message describing what happened","type":"string"}},"required":["result"]},"sql_tables":null,"sql_queries":null,"file_inbox":null,"oauth":null,"assets":null,"runner":"any","operating_system":["linux","macos","windows"],"tool_set":""},false]}