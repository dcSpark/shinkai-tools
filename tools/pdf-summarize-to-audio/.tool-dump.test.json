{"type":"Deno","content":[{"name":"PDF Summarize to Audio","homepage":null,"author":"@@official.shinkai","version":"1.0.0","js_code":"import { shinkaiLlmPromptProcessor, elevenLabsTextToSpeech, pdfTextExtractor } from './shinkai-local-tools.ts';\n\ntype CONFIG = {\n  promptStructure: string;\n  voicePrompt?: string\n};\n\ntype INPUTS = {\n  pdfURL: string;\n};\n\ntype OUTPUT = {\n  summaryText: string;\n  audioFilePath: string;\n  audiotext: string;\n};\n\nexport async function run(config: CONFIG, inputs: INPUTS): Promise<OUTPUT> {\n  // Step 1: Extract and clean text from the PDF using pdfTextExtractor\n  const extractedTextResult = await pdfTextExtractor({ url: inputs.pdfURL });\n  const pdfText = extractedTextResult.text; // Assume it returns a string with the PDF text\n\n  // Step 2: Summarize the text using ShinkaiLLPromptProcessor\n  const summarizedTextResult = await shinkaiLlmPromptProcessor({\n    format:'text',\n    prompt: `Summarize a text following these guidelines and structure:\n    <guidelines>\n    ${config.promptStructure}\n    </guidelines>\n    This is the text to summarize, please don't hallucinate and make sure you follow the guidelines:\n    <text>\n    ${pdfText}\n    </text>\n    `,\n  });\n  const summarizedText = summarizedTextResult.message;\n  let audiotext = summarizedText.replaceAll('*','').replaceAll('#',' ')\n  if (config.voicePrompt && config.voicePrompt.length > 10) {\n    audiotext = (await shinkaiLlmPromptProcessor({\n      format: 'text',\n      prompt: `Narrate a text using the following guidelines\n      <guidelines>\n      ${config.voicePrompt}\n      </guidelines>\n      The text to narrate is the following:\n      <text>\n      ${audiotext}\n      </text>\n      `\n    })).message\n    audiotext = audiotext.replaceAll('*','').replaceAll('#',' ')\n  }\n  // Step 3: Convert the summary text to speech using ElevenLabs Text to Speech\n  const audioData = await elevenLabsTextToSpeech({\n    text: audiotext\n  });\n\n  // Return the summary text and audio file path\n  return {\n    summaryText: summarizedText,\n    audiotext,\n    audioFilePath: audioData.audio_file,\n  };\n}","tools":["local:::__official_shinkai:::pdf_text_extractor","local:::__official_shinkai:::shinkai_llm_prompt_processor","local:::__official_shinkai:::eleven_labs_text_to_speech"],"config":[{"BasicConfig":{"key_name":"promptStructure","description":"The structure for the summarization prompt","required":true,"type":null,"key_value":null}},{"BasicConfig":{"key_name":"voicePrompt","description":"The narration guidelines for the audio output","required":false,"type":null,"key_value":null}}],"description":"Extracts text from a PDF, summarizes it, and converts the summary to speech.","keywords":["PDF","summary","text to speech","audio"],"input_args":{"type":"object","properties":{"pdfURL":{"type":"string","description":"The URL of the PDF to download and extract text from"}},"required":["pdfURL"]},"output_arg":{"json":""},"activated":false,"embedding":[1.0432544,-0.36834455,0.181313,-0.33277452,-0.3196713,0.34649277,-1.0884508,0.4457932,0.3236362,-0.054711785,0.45752543,1.4834234,0.1826847,-0.3982493,0.11259848,-0.06865685,0.25712326,-0.60269856,-0.8940943,-0.3230404,0.11990942,1.3551714,0.18313855,0.16600873,0.36528194,0.14279282,0.09672104,-0.45469815,-0.7551879,-1.2635386,0.7248819,0.63838357,-0.11944096,0.27708894,-0.41706938,-0.952457,0.1589989,-0.07335083,-0.4809051,0.19214253,-0.3211593,0.05360864,-0.20623627,-0.042026922,0.25635377,-0.14192757,0.27933824,-0.07255143,0.9281829,0.40200973,-0.7464028,-0.76924306,0.019768871,0.4726826,0.027675644,-0.47337675,-0.021550506,-0.1703563,0.76447403,0.5126881,-0.34989595,-0.3726324,-3.6434221,0.30659243,0.29943207,0.3874654,-0.19279365,-0.29270384,-0.023182644,-0.021503136,-0.3328075,-0.11314181,-0.26879013,0.44603726,-0.6218299,-0.5076233,0.1007013,0.14381272,0.798409,-0.42739278,-0.7351992,0.6739814,0.24519561,0.1385136,-0.72541994,0.65045106,-0.4865076,-0.9152976,-0.2500314,0.31473678,-0.52179265,-0.3389321,-0.17010497,0.33536527,0.08769071,-0.24394567,0.3171702,-0.50687355,0.61813515,2.8098378,0.8161936,0.34911644,0.05489016,-1.1350987,-0.33578828,-0.6246309,-0.33656916,-0.022603532,0.39974642,-0.12163807,0.9622032,-0.6919468,-0.52396476,-0.15018527,0.38724735,0.99720824,-1.0453466,0.027802259,-0.048885304,-0.117366105,-0.2468063,0.13117677,-0.10559981,-0.32620764,0.06726359,-0.10922542,-0.036283158,0.10228696,0.44270563,-0.1969142,0.2022537,-0.032993298,-0.73859423,0.3055702,0.16649702,0.1335925,0.8542843,-0.9151211,0.595382,0.34168962,0.11851455,-1.7261951,0.5161462,0.3420631,0.59353405,0.32566598,-0.8384194,-0.12064088,-0.10120607,-0.4173842,0.2645383,0.5828862,0.10846853,-0.49517506,0.7886369,-0.50315595,-0.7425369,0.20613864,-0.53129655,0.30889776,0.041170333,-0.19314139,0.33074927,-0.47627217,0.08525897,-0.6128494,0.041844994,-0.45691347,0.22292809,0.49916804,0.23253101,-0.67588454,0.49551848,0.8495026,0.6820405,-0.9864502,0.011288896,0.17613871,0.14521052,-0.32042167,0.45026067,0.0478589,-0.53876245,-0.23251033,-0.18105999,0.28493047,0.14952937,-0.003559159,0.7794067,1.2087704,0.088326015,1.7774057,-0.9892721,-0.174093,-0.1238768,0.0423242,-0.008652121,-0.30949634,0.13939343,0.098484755,0.23002404,-0.07301524,-0.43787298,0.090228915,-0.02408173,-0.72370845,-0.53692234,0.6886849,-0.5076047,-0.55816424,0.21701366,-0.012601517,0.6021219,0.09275235,-0.20846736,0.21624249,-0.49914706,0.21217687,-0.6208886,0.20448086,0.28428665,-0.46510947,-0.41005248,-0.36426374,-0.53787297,0.7514749,0.124325834,-0.21350677,-0.48461333,-0.23579006,0.62620676,0.7499298,0.9548994,1.0449216,0.34390914,0.21617228,0.08379944,0.103277355,0.20722708,-0.24566549,0.46843493,0.21448395,0.27968967,0.56222814,0.14556429,-0.44128886,-0.23612812,0.072245985,-0.24378414,1.8774757,-0.336801,0.13011716,0.941774,0.834382,0.8155532,0.21625093,-1.5359159,-0.44967744,-0.6946601,0.41761142,-0.26844895,0.3399041,0.29105633,0.53198886,-0.0528584,-0.62933224,-0.30063888,-0.79204965,0.035104662,0.01390738,-0.13495,-0.24719293,-0.37676734,-0.552279,0.3394512,0.219995,0.01036655,0.43924084,-0.6532419,-1.0133543,0.51922244,-0.15585251,0.4071733,0.5284843,-0.40113664,-0.032522257,0.60240203,-0.63672304,0.11696607,0.5871987,-0.41312522,-0.8015595,-0.46976656,0.2667774,1.5950102,-0.024531387,-0.25732875,1.0977343,0.09735827,-0.23333777,-0.6115146,-0.20542908,-0.69470394,0.3151753,-0.40046403,-0.25545886,0.23938005,0.18763277,-0.24367547,0.9256439,-0.8307919,-0.31861353,0.1278534,-0.22680774,0.5106323,-0.29236946,0.16628423,0.4141457,-0.32703352,-2.2771082,-0.53764594,0.26151958,0.6541092,-0.79404235,0.24420314,0.6385065,-0.12788755,-0.085834816,-0.21425152,0.9487269,0.061861247,-0.46507585,-0.5986008,-0.15338406,1.2371473,-0.059363645,0.2438339,-0.41745368,-0.4812208,-0.18326156,0.6474818,1.2081387,0.3533445,0.91791534,-0.22356586,0.046997264,-0.183895,-1.1851515,0.11669266,-0.20182902,-0.7286837,0.5963219,-0.42722884,0.1793876,0.54988575,0.45515105,0.29630718,0.2154728,-0.307437,2.0084414,0.07953716,-0.0030713882,-0.28140482,-0.4508149,0.62184775,0.23913649,0.7068443,-1.1419231,-0.23744278,0.54166675,0.8782172,-0.4697371,0.68377316,0.21435747,0.79268986,0.394332,0.10443671,0.35471106,0.2880014,0.31009287,0.32523113,-0.42845735,-0.44451267,-0.4083839],"result":{"type":"object","properties":{"audioFilePath":{"description":"The local file path of the generated audio","type":"string"},"audiotext":{"description":"The trasncribed audio","type":"string"},"summaryText":{"description":"The summarized text from the PDF","type":"string"}},"required":["summaryText","audioFilePath"]},"sql_tables":[],"sql_queries":[],"file_inbox":null,"oauth":[],"assets":null,"runner":"any","operating_system":["linux","macos","windows"],"tool_set":""},false]}