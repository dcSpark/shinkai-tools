{"type":"Deno","content":[{"name":"Podcast to Podcast","homepage":null,"author":"@@official.shinkai","version":"1.0.0","mcp_enabled":null,"js_code":"import { YoutubeTranscript } from 'npm:youtube-transcript';\nimport { getHomePath } from './shinkai-local-support.ts'\nimport { shinkaiLlmPromptProcessor, elevenLabsTextToSpeech } from './shinkai-local-tools.ts';\n\ntype CONFIG = {};\ntype INPUTS = {\n  youtubeUrlOrId: string;\n};\ntype OUTPUT = {\n    audiotext: string,\n    audioFilePath: string,\n};\n\nexport async function run(config: CONFIG, inputs: INPUTS): Promise<OUTPUT> {\n  const { youtubeUrlOrId } = inputs;\n  if (!youtubeUrlOrId) throw new Error(\"Missing input.youtubeUrlOrId\")\n  // Step 1: Fetch the transcript from YouTube\n  const transcript: {text: string, duration: number, offset: number}[] = await YoutubeTranscript.fetchTranscript(youtubeUrlOrId);\n  /*\n  [...\n  {\n    text: \"better the performance the easier it is\",\n    duration: 4.08,\n    offset: 223.92,\n    lang: \"en\"\n  },\n  {\n    text: \"for me to watch yeah if I catch myself\",\n    duration: 4.36,\n    offset: 225.2,\n    lang: \"en\"\n  },\n  ...]\n  */\n  const total_duration = transcript[transcript.length - 1].offset + transcript[transcript.length - 1].duration;\n  console.log(`Total duration: ${total_duration}`);\n  // Step 2: Flatten the transcript into a string\n  const flatten_transcript = transcript.map(segment => segment.text).join(' ');\n\n  // Step 3: Get the prompt structure and voice prompt from files\n  const homePath = await getHomePath();\n  const promptStructureFilePath = `${homePath}/podcast.analysis.md`;\n  const voicePromptFilePath = `${homePath}/podcast.story.md`;\n\n  const promptStructure = await Deno.readTextFile(promptStructureFilePath);\n  const voicePrompt = await Deno.readTextFile(voicePromptFilePath);\n\n  // Step 4: Create a transcript summary with the llm-processor\n  const summarizePrompt = `\n    Summarize a text following these guidelines and structure:\n        <guidelines>\n        ${promptStructure}\n        </guidelines>\n        This is the text to summarize, please don't hallucinate and make sure you follow the guidelines:\n        <text>\n        ${flatten_transcript}\n        </text>\n  `;\n\n  const { message: transcriptSummary } = await shinkaiLlmPromptProcessor({\n    prompt: summarizePrompt,\n    format: 'text',\n  });\n\n  // Step 5: Generate the podcast by using the llm-processor\n  const narratePrompt = `\n      Narrate a text using the following guidelines\n        <guidelines>\n        # [IMPORTANT] Your main objective in terms of length is to keep the podcast lenght in about 5 minutes and shorter than the original text.\n        ${voicePrompt}\n        </guidelines>\n        The text to narrate is the following:\n        <text>\n        ${transcriptSummary}\n        </text>\n    `;\n\n  const { message: podcast } = await shinkaiLlmPromptProcessor({\n    prompt: narratePrompt,\n    format: 'markdown',\n  });\n  \n  const audioData = await elevenLabsTextToSpeech({\n    text: podcast\n  });\n\n  return {\n    audiotext: podcast,\n    audioFilePath: audioData.audio_file,\n  };\n}","tools":["local:::__official_shinkai:::shinkai_llm_prompt_processor","local:::__official_shinkai:::eleven_labs_text_to_speech"],"config":[],"description":"Converts a YouTube video transcript into a podcast using LLM processing.","keywords":["YouTube","transcript","podcast","converter","shinkai"],"input_args":{"type":"object","properties":{"youtubeUrlOrId":{"type":"string","description":"The YouTube URL or video ID"}},"required":["youtubeUrlOrId"]},"output_arg":{"json":""},"activated":false,"embedding":[0.46633118,0.642803,-0.39470506,-0.6883475,-0.63417006,-0.03812719,-0.96892834,0.104326025,-0.21805915,0.11969248,-0.4453695,1.2319452,-0.0037038876,0.12561157,-0.2908479,0.013146095,0.08185892,-0.77220076,-1.397119,-0.2191427,-0.11139269,0.17315963,0.1550317,0.23027146,-0.08303078,0.31462005,0.2540791,-0.43658483,-0.5723174,-1.9306035,0.7248317,0.58999413,0.42347148,-0.17453489,-0.24547356,-0.9092058,-0.59399015,0.12969227,-0.36098793,0.25185877,0.17366627,0.028852275,-0.6084983,0.1575926,-0.26006615,-0.3802857,0.7616668,-0.38064831,1.3493979,0.054028563,-0.8422166,-0.3011243,-0.03882322,-0.0074307434,-0.32655513,-1.1675923,-0.13257094,0.0013937913,0.5618086,0.029145274,0.21730673,-0.094102904,-3.739086,-0.25602034,0.46579638,-0.21316722,-0.039140813,-0.01690692,0.2515578,0.18706712,-0.40131316,-0.18533842,-0.6630384,0.34076867,-0.18821466,-0.47801465,-0.20034514,-0.3276615,0.49321306,-0.4703884,0.5394674,-0.026050597,0.2062403,-0.4321036,-0.6802148,0.7840885,-0.72164756,-0.54497576,0.12049757,0.24267864,0.017377924,-0.38871315,1.0521986,-0.099169075,-0.31979838,-0.33145356,0.21193776,-0.05351183,0.25670373,2.86375,0.5287696,-0.011478454,0.40168375,-0.91266114,0.12553972,-0.68690336,0.46252212,-0.16248353,0.60170144,0.10533566,0.73644066,-0.23020428,0.21713972,0.21014696,0.21865924,0.67376333,-0.14616108,-0.21201843,0.016906653,0.21163629,-0.43902993,-0.118159264,-0.2332978,-0.16086075,-0.6064988,-0.25224146,-0.19446582,0.11340459,0.3788007,-0.39873865,0.40936145,-0.34788504,-0.2794726,0.22930133,0.5118648,0.04856054,0.78451854,-1.0545865,-0.043347225,-0.3658753,0.16340084,-1.6932213,0.48400545,-0.23623928,0.88115627,-0.06693222,-0.483914,0.39016876,-0.29602227,-0.26735082,0.049137086,0.73035085,0.16649325,-0.11590861,1.1846651,-0.30472723,-0.49679112,-0.80688345,-0.6697473,0.27266404,-0.18346265,-0.10849389,0.18616134,-0.0042620376,0.38057998,-0.18890697,0.6091342,0.41224286,0.6332527,0.03608917,0.5213774,-0.1376319,0.17763619,0.55858934,-0.2125546,-0.5288397,-0.6548772,0.29034224,0.32326907,0.112550974,0.4261148,0.2244604,-0.5158559,-0.10619843,-0.55631435,0.7470337,0.21623021,0.112013355,0.7851694,0.86386657,-0.3783546,1.7873092,-1.1602986,-0.18262775,-0.3031182,0.2738145,0.19099848,0.771721,0.3864461,0.16716379,-0.30740273,0.14797032,-0.07342698,-0.07061599,-0.3438574,-0.7347057,-0.2940429,0.94533753,-0.24938472,-0.3574956,0.46649665,-0.04009667,0.32296172,0.53834105,0.10006583,0.27141136,0.047922734,0.18688603,-0.71024275,0.2350922,0.4960878,0.23687294,0.061931223,-0.6835764,-0.044022784,0.67525804,-0.8015146,0.22489679,0.013187487,-0.15526077,0.639573,1.1393105,-0.16034901,1.220545,0.7631402,0.3691781,0.14958091,0.39183268,0.30459863,-0.8684393,0.060781643,0.050973497,0.002507165,-0.21223713,0.18709046,-0.62456226,-0.021486685,0.32293758,-0.36825567,1.7616675,0.20510167,0.5852596,0.54941416,0.4178825,0.2987757,0.05386663,-1.1844407,0.5056948,-0.2194291,0.28903794,-0.4116909,0.4148209,0.07841556,0.53168595,0.13580996,-0.5234592,-1.1385914,-0.46429887,0.1409533,-0.10374047,-0.12746066,0.24707477,-0.18801878,0.10946567,-0.28797275,0.2242523,0.35569373,-0.10134112,-0.46443537,-0.68691504,0.5957852,0.19182232,0.1664607,0.031578593,-0.5840984,0.33513054,-0.15949471,-0.2668423,-0.7328009,0.34131584,-0.39729267,-0.6550707,-0.8979648,-0.00044496357,1.9726949,0.06335321,-0.06711762,0.5742347,0.23712331,0.032311693,-0.47509614,0.17346486,0.0646996,-0.03442309,-0.7407927,-0.48452133,0.60990816,-0.5645618,0.21637139,0.66268265,0.11836613,0.27260372,0.13227063,-0.2733491,0.5343963,-0.28130096,0.14579304,0.7897831,-0.22083125,-2.6270232,-0.23334175,-0.3991254,-0.30320382,-0.31564623,0.2727139,0.6158318,-0.48658097,0.37865636,-0.32201576,1.3103174,0.25392544,-0.04511587,-0.14236414,0.5603946,0.8064593,0.24605384,-0.33299696,-0.6017444,-1.0606856,-0.19228674,-0.05048959,1.1462021,0.5642033,0.55989075,-0.058408856,-0.22222796,-0.3757727,-0.8953596,0.6760926,-0.21491724,-0.26394936,0.40776244,0.13978568,-0.24113968,0.44346598,0.94220704,0.16194938,0.07519108,-0.08893542,1.6064017,0.2531916,-0.13603064,-0.20491928,0.44582897,-0.17557687,-0.5639158,0.23711915,-0.9050005,0.48110473,-0.032385543,0.6618128,-0.32014966,0.61922395,0.15098818,0.6869697,0.7242878,0.25038046,0.6665752,0.08134703,-0.13490304,-0.24877179,-0.06976044,-0.24697503,0.21933994],"result":{"type":"object","properties":{"podcast":{"description":"The generated podcast content in Buffer format","nullable":true,"type":"string"}},"required":["podcast"]},"sql_tables":[],"sql_queries":[],"file_inbox":null,"oauth":[],"assets":null,"runner":"any","operating_system":["linux","macos","windows"],"tool_set":""},false]}