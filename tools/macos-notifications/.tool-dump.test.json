{"type":"Python","content":[{"version":"1.0.0","name":"macos-notifications","homepage":null,"author":"@@official.shinkai","py_code":"# /// script\n# dependencies = [\n#   \"requests\",\n# ]\n# ///\n\nfrom typing import Dict, Any, Optional, List\nimport subprocess\n\nclass CONFIG:\n    pass\n\nclass INPUTS:\n    command: str\n    title: Optional[str] = None  # for sendNotification\n    message: Optional[str] = None  # for sendNotification\n    sound: Optional[bool] = True  # for sendNotification\n\nclass OUTPUT:\n    result: str\n\nasync def run_applescript(script: str) -> str:\n    \"\"\"Helper function to run AppleScript and return its output.\"\"\"\n    try:\n        result = subprocess.run(['osascript', '-e', script], \n                              capture_output=True, \n                              text=True, \n                              check=True)\n        return result.stdout.strip()\n    except subprocess.CalledProcessError as e:\n        return f\"Error: {e.stderr.strip()}\"\n\nasync def run(config: CONFIG, inputs: INPUTS) -> OUTPUT:\n    output = OUTPUT()\n    \n    if inputs.command == \"toggleDoNotDisturb\":\n        script = \"\"\"\n            set toggleResult to \"Error: Could not toggle Do Not Disturb via System Settings.\"\n            \n            -- Open System Settings directly to Focus panel\n            do shell script \"open 'x-apple.systempreferences:com.apple.Focus-Settings'\"\n            delay 1\n\n            tell application \"System Events\"\n                tell process \"System Settings\"\n                    -- Wait until the main window is detected\n                    repeat until exists window 1\n                        delay 0.3\n                    end repeat\n                    \n                    -- Make sure System Settings is frontmost\n                    set frontmost to true\n                    delay 1\n\n                    -- Try to find and click the Do Not Disturb row\n                    try\n                        -- First try to find it in a list/table\n                        set dndRow to first row of list 1 of window 1 whose name contains \"Do Not Disturb\"\n                        click dndRow\n                        delay 0.5\n                        \n                        -- Try to find and click the toggle\n                        try\n                            set toggleSwitch to first checkbox of window 1\n                            click toggleSwitch\n                            set toggleResult to \"Toggled Do Not Disturb\"\n                        on error\n                            -- If we can't find a checkbox, try clicking the row again\n                            click dndRow\n                            set toggleResult to \"Toggled Do Not Disturb\"\n                        end try\n                    on error\n                        try\n                            -- Try finding it as a table row\n                            set dndRow to first row of table 1 of window 1 whose name contains \"Do Not Disturb\"\n                            click dndRow\n                            delay 0.5\n                            \n                            -- Try to find and click the toggle\n                            try\n                                set toggleSwitch to first checkbox of window 1\n                                click toggleSwitch\n                                set toggleResult to \"Toggled Do Not Disturb\"\n                            on error\n                                -- If we can't find a checkbox, try clicking the row again\n                                click dndRow\n                                set toggleResult to \"Toggled Do Not Disturb\"\n                            end try\n                        on error errMsg\n                            set toggleResult to \"Error finding Do Not Disturb: \" & errMsg\n                        end try\n                    end try\n                end tell\n            end tell\n\n            return toggleResult\n        \"\"\"\n        output.result = await run_applescript(script)\n        return output\n\n    elif inputs.command == \"sendNotification\":\n        if not inputs.title or not inputs.message:\n            raise ValueError('Missing \"title\" or \"message\" for sendNotification')\n        sound_option = 'sound name \"default\"' if inputs.sound else ''\n        script = f\"\"\"\n            display notification \"{inputs.message}\" with title \"{inputs.title}\" {sound_option}\n            return \"Notification sent\"\n        \"\"\"\n        output.result = await run_applescript(script)\n        return output\n\n    else:\n        raise ValueError(f\"Unknown command: {inputs.command}\")\n\n    return output ","tools":[],"config":[],"description":"Manage macOS notifications and Do Not Disturb via AppleScript","keywords":["macos","notifications","dnd","automation","applescript"],"input_args":{"type":"object","properties":{"command":{"type":"string","description":"Command to execute: toggleDoNotDisturb to toggle DND mode, sendNotification to show notification"},"sound":{"type":"boolean","description":"Play default sound if true (default = true)"},"title":{"type":"string","description":"Notification title for sendNotification"},"message":{"type":"string","description":"Notification message for sendNotification"}},"required":["command"]},"output_arg":{"json":""},"activated":false,"embedding":[-0.3379292,-0.34522402,0.15925613,-0.6137125,0.581822,0.19372015,0.13649686,-0.6408513,0.45117885,0.42907518,0.12348483,0.15439291,-0.23659936,-0.008785799,0.37067816,-0.5530812,0.27977443,-0.8354707,-0.6155579,-0.32672498,0.1985812,1.2120205,0.48909822,0.22010319,0.095020205,-0.07403621,-0.4045094,0.13908833,-0.6308382,-2.2174633,-0.22765177,0.8452572,-0.24922761,0.02061893,-0.29370221,-0.74872273,-0.19392103,0.19182296,-0.82189566,-0.32704794,0.2723416,-0.4042227,-0.10038986,-0.48908788,0.14053285,-0.6533507,0.5552205,0.32109886,0.49600005,0.3570643,-0.019890914,0.13191535,0.24711342,-0.22238925,-0.80087095,0.7066087,0.15392323,0.22752322,0.13557391,0.37116304,-0.56315154,-0.2931991,-3.280138,-0.013014166,0.35441253,0.346989,-0.008634156,-0.307747,0.084786065,-0.15709184,0.12182075,-0.1772265,-0.07110629,0.8092459,0.0017849244,-0.56360257,0.07490837,-0.30884126,0.1647559,-0.036284886,0.1250469,1.0463741,-0.38778046,0.54797083,-0.9169363,0.4413053,-0.32389578,-0.09468028,0.104161814,0.4463016,-0.31099334,0.5571939,0.017129472,-0.09191133,-0.020097278,0.18256801,-0.1624981,0.53667474,0.08868509,3.0654607,1.1004486,0.23066477,0.7689777,-0.06873241,-0.5498012,0.20977056,-0.7378958,-0.08852918,-0.12972322,0.074121036,-0.14393301,0.24094494,0.21600293,-0.09886528,0.33127135,-0.08557572,-0.3797111,0.64820224,-0.3694528,0.5841272,-0.21559384,0.065687,-0.961463,-0.63728446,-0.56082714,-0.4164074,-0.55455965,0.14066492,0.19519779,-0.64879614,0.8305429,-0.67251587,-0.578622,0.011583054,0.22401616,-0.06419837,-0.13184972,-0.9152353,-0.6016451,0.28249872,0.27144086,-2.307037,1.4100242,-0.14571494,0.6399535,-0.2213425,0.48118597,0.0046838596,-0.32108557,-0.40543145,-0.7347793,0.59259295,-0.2688118,-0.69689196,0.4448015,0.2926522,-0.5374604,0.4194719,-0.44587058,0.20916304,0.29922557,-0.38911855,0.8012434,0.6312302,0.43595397,-0.75930893,0.057199582,-0.405394,0.36926186,0.26482356,0.32495183,-0.29896724,0.15272056,0.13369843,-0.58453673,0.83757424,-0.77935374,-0.17158765,0.39996782,-0.5394914,0.44534513,0.3924582,-0.51202196,-0.14399052,-0.07283907,0.4090239,0.38743255,-0.04997153,0.22237113,0.6880628,-0.9549346,1.7552667,-0.9903485,-0.6215293,0.059431016,0.42556626,0.5993513,0.42169166,-0.30615434,0.44437376,0.122387454,-0.54940826,-0.38291144,0.85006213,-0.4056762,-0.51711345,0.8764166,0.27456966,0.3994422,-0.1452743,-0.06730719,0.3996224,0.75090045,0.4597864,0.20909177,0.6209403,-0.13320915,-0.08510204,0.09306033,0.65499294,0.9765902,0.22944319,-1.5173162,-0.2648338,-0.57768506,-0.8007003,0.5773612,-0.61519784,-0.6441967,-0.2983491,-0.22154686,1.1111817,0.4620251,-0.17598453,0.26370844,-0.46510136,0.024806745,0.3071935,0.21977213,-0.3568803,0.22376108,0.020944316,-0.27955464,-0.13245404,0.7297955,-0.10664774,0.04218498,-0.40081185,0.1456813,1.3413267,0.6590353,1.0869097,0.41870323,0.00042747706,-0.21051458,-0.15622047,-1.0366161,0.85654557,0.2485959,-0.02439769,0.7110709,0.046285883,0.31366152,0.2837152,-0.5216854,0.2642788,0.05590052,-0.13496557,-0.32697776,-0.2544767,-0.6462301,0.7286884,-0.59593135,-0.3936205,-0.50042164,-0.19442365,0.12141797,-0.4077113,-0.38135812,-0.8881291,-0.41532224,0.05538369,0.60715616,0.041336726,0.1522336,-0.5584612,0.14078115,-0.4224022,0.13975182,-0.030236285,-0.09916336,-0.9063071,0.15421857,0.29153532,2.2536998,0.47312346,0.0318048,0.7344718,0.370238,-0.122695446,0.20848343,-0.22223985,-0.5493227,-0.3497783,-0.6975191,-0.069251284,0.520535,-0.72527194,-0.73413205,0.34882987,-0.017338865,0.70371145,0.40183023,-0.3807191,1.2190202,0.58129203,0.3330791,0.91888344,0.021998223,-1.877572,-0.56956005,-0.22824997,0.58967286,-0.8959905,-0.38215286,0.64392155,0.8054429,-0.10093683,-0.31545836,0.9037585,0.9781446,-0.36787325,-0.29934126,0.029721737,0.5864411,0.044799823,0.54652077,0.13273826,-1.1583362,-0.52434504,0.8728385,1.9127536,-0.44064093,0.11440733,0.18284829,-0.20956036,-0.6788889,-1.6488113,0.8675877,0.14128876,-0.76200145,0.44695827,0.16712339,-0.5732797,0.42533478,0.95295584,-0.8819228,0.20089334,-0.42871782,1.0417967,0.04326304,0.21370962,-0.47990027,0.22746167,0.82783026,-0.25619674,0.9252834,-0.35272673,-0.44639003,0.64103836,-0.074170396,-0.32539186,0.35949117,0.19475505,-0.0379707,0.31059125,-0.240467,0.45983857,0.20382088,-0.31181863,-0.31166583,-0.10434671,-0.3505725,-0.48994792],"result":{"type":"object","properties":{"result":{"description":"Message describing what happened","type":"string"}},"required":["result"]},"sql_tables":null,"sql_queries":null,"file_inbox":null,"oauth":null,"assets":null,"runner":"any","operating_system":["linux","macos","windows"],"tool_set":""},false]}