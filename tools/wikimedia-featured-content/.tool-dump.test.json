{"type":"Deno","content":[{"name":"Wikimedia Featured Content","homepage":null,"author":"@@official.shinkai","version":"1.0.0","mcp_enabled":null,"js_code":"import axios from 'npm:axios';\n\ntype Configurations = {\n  project?: string;\n  language?: string;\n};\n\ntype Parameters = {\n  date?: string;\n};\n\ntype Result = {\n  featured: {\n    tfa: {\n      title: string;\n      extract: string;\n      url: string;\n    };\n    image: {\n      title: string;\n      description: string;\n      url: string;\n    };\n    news: Array<{\n      story: string;\n      links: Array<{\n        title: string;\n        url: string;\n      }>;\n    }>;\n  };\n};\n\nexport type Run<C extends Record<string, any>, I extends Record<string, any>, R extends Record<string, any>> = (\n  config: C,\n  inputs: I\n) => Promise<R>;\n\nexport const run: Run<Configurations, Parameters, Result> = async (\n  configurations: Configurations,\n  params: Parameters\n): Promise<Result> => {\n  try {\n    const project = configurations?.project || 'wikipedia';\n    const language = configurations?.language || 'en';\n    \n    // Format date as YYYY/MM/DD\n    let date: string;\n    if (params.date) {\n      const d = new Date(params.date);\n      date = `${d.getFullYear()}/${String(d.getMonth() + 1).padStart(2, '0')}/${String(d.getDate()).padStart(2, '0')}`;\n    } else {\n      const d = new Date();\n      date = `${d.getFullYear()}/${String(d.getMonth() + 1).padStart(2, '0')}/${String(d.getDate()).padStart(2, '0')}`;\n    }\n    \n    const api_url = `https://api.wikimedia.org/feed/v1/${project}/${language}/featured/${date}`;\n    \n    const response = await axios.get(api_url, {\n      headers: {\n        'User-Agent': 'ShinkaiWikimediaFeaturedContent/1.0',\n        'Accept': 'application/json',\n        'Api-User-Agent': 'ShinkaiWikimediaFeaturedContent/1.0 (https://github.com/dcSpark/shinkai-tools)'\n      }\n    });\n\n    if (!response.data) {\n      throw new Error('No data received from Wikimedia API');\n    }\n\n    const { tfa, image, news } = response.data;\n\n    if (!tfa || !image) {\n      throw new Error('Required data missing from API response');\n    }\n\n    return {\n      featured: {\n        tfa: {\n          title: tfa.title,\n          extract: tfa.extract || tfa.description || '',\n          url: `https://${language}.${project}.org/wiki/${encodeURIComponent(tfa.title.replace(/ /g, '_'))}`\n        },\n        image: {\n          title: image.title,\n          description: image.description?.text || '',\n          url: image.image?.source || image.thumbnail?.source || ''\n        },\n        news: (news || []).map((item: any) => ({\n          story: item.story || '',\n          links: (item.links || []).map((link: any) => ({\n            title: link.title || '',\n            url: `https://${language}.${project}.org/wiki/${encodeURIComponent((link.title || '').replace(/ /g, '_'))}`\n          }))\n        }))\n      }\n    };\n  } catch (error) {\n    if (axios.isAxiosError(error)) {\n      if (error.response?.status === 404) {\n        throw new Error(`No featured content found for the specified date`);\n      }\n      throw new Error(`Failed to fetch featured content: ${error.response?.data?.detail || error.response?.data?.message || error.message}`);\n    }\n    throw error;\n  }\n};\n","tools":[],"config":[{"BasicConfig":{"key_name":"project","description":"Wikimedia project (e.g., wikipedia)","required":false,"type":null,"key_value":null}},{"BasicConfig":{"key_name":"language","description":"Language code (e.g., en)","required":false,"type":null,"key_value":null}}],"description":"Get featured content including article, image, and news from Wikimedia","keywords":["wikimedia","featured","wikipedia","content","articles","images","news"],"input_args":{"type":"object","properties":{"date":{"type":"string","description":"Date in YYYY-MM-DD format (defaults to current date)"}},"required":[]},"output_arg":{"json":""},"activated":false,"embedding":[0.16674672,0.81447536,-0.16735646,0.037627175,-0.31418765,0.22720948,-0.68157756,-0.80087143,0.12329389,0.21763007,-0.2517606,0.7705762,0.38809347,0.19407791,0.5936179,-0.14536415,0.07384665,-0.08013101,-1.6459386,-0.29112053,0.43591794,0.7255817,0.43674853,-0.014656305,-0.0880837,-0.18995363,-0.096582636,-0.3916551,-0.72676945,-2.1089146,0.371695,0.2108917,-0.23819047,-0.24922438,0.23701248,-0.73410404,-0.373236,0.10643433,-0.45070875,-0.26866996,0.15049054,0.12749001,-0.24980003,0.14459556,-0.18953392,0.10625369,-0.18229683,-0.4820731,0.22018097,0.45771807,-0.49847937,-0.00046085473,-0.26461568,0.47289845,-0.4935287,0.33080095,0.15064013,0.095378384,-0.05639005,0.565677,0.19863,0.8722835,-4.256838,-0.0021093693,0.67455435,0.17418659,-0.18313344,-0.28456813,-0.15452607,0.18781102,0.34400502,0.3681481,-0.12241976,0.14755483,-0.2530383,-0.46494713,0.25561973,0.28899214,-0.117762014,-0.49703178,-0.05006745,0.44303587,-0.16956979,-0.06698667,-0.18730049,0.67177653,-0.3196576,-0.33933562,0.25134775,0.015015967,0.09173943,-0.24129723,0.51406974,-0.34897912,-0.79413456,0.38645232,-0.046360776,0.44484738,0.54960907,3.7841597,0.465402,0.07677089,0.5588914,-0.4334316,0.41105002,-0.42881572,-0.17445916,0.0073369015,-0.19787025,0.07284573,-0.03848918,-0.43382946,-0.02575384,-0.11502952,0.060866866,0.67941403,-0.8212093,0.060885876,-0.09375852,0.1864069,-0.3107657,0.16072759,-0.5491721,0.053772938,-0.07215343,-0.2552342,0.13747284,0.31784272,-0.12753828,0.006969245,0.38271034,-0.12296304,-0.9653282,0.044216856,0.02886805,-0.011808738,0.24808022,-0.21208791,0.171889,-1.0547041,0.17007516,-1.199881,0.6679535,-0.04454211,0.87147313,0.27863938,-0.068386495,0.3436916,-0.68756855,0.02605246,-0.20313759,0.33204246,0.065626785,0.41653356,0.87296814,-0.29960483,0.0138496235,-0.033870295,-0.6359546,0.3728491,0.20148388,-0.4110881,0.72289073,0.40864038,0.38255683,-0.21918362,0.44741505,0.057733033,0.57997376,-0.29707468,0.110025324,-0.26994446,0.48137197,0.4938962,0.18642288,-0.063519016,-0.40053734,-0.04643517,0.4231733,-0.6479578,0.30974513,0.63305324,-0.15194298,-0.6978965,-0.017325234,0.08764215,0.23811162,0.16724315,0.34609205,0.7631409,-0.54984397,1.6028168,-0.76586545,-0.58248323,0.24653056,-0.05860068,-0.39735985,0.34963027,0.57182914,0.2560388,-0.21211487,-0.13683255,0.015364114,0.021702625,-0.33465153,-0.3128302,0.30524626,-0.19585228,-0.27898562,-0.47432616,-0.103408515,0.076704815,0.42899126,0.15431333,0.5750638,0.28952026,-0.017285243,0.08467351,0.28244236,0.810521,0.04827393,0.22590834,-0.3830424,-0.72959626,-0.5083979,0.12444802,-0.58388513,-0.4040144,-0.4676075,-0.01928991,0.20350629,0.81378514,-0.1279979,0.8577647,0.64969647,0.2872812,-0.0692639,0.39039582,0.3791031,-0.774891,0.84430367,-0.15712254,-0.22238785,-0.05277988,0.26023766,-1.1058953,-0.20954618,0.13489541,-0.06432968,1.6731019,0.5561738,-0.22886497,0.23204918,0.16967833,0.26141524,0.37183037,-1.3435614,-0.23340942,-0.75144446,0.43533897,-0.06734617,-0.2671892,-0.18606113,0.04994683,0.19549651,-0.31661054,-0.19114505,0.004396204,-0.077867836,-0.5568781,-0.027976867,0.61665547,-0.22291015,0.35598263,0.13316996,-0.17298114,0.08768159,-0.16875008,-0.3831602,0.21565942,0.4782446,-0.34843963,0.42099932,0.23998551,-0.60537755,-0.34856656,-0.35334212,0.08737561,-0.4078681,0.36311445,-0.069688275,-0.07338827,-0.049356017,-0.24692452,1.9824619,-0.08430843,0.5133748,0.49989915,0.056461874,0.16714546,-0.5585499,0.16912995,-0.31529588,0.0740526,-0.8240569,-0.44945687,0.055165235,-0.10202108,-0.30671737,0.19596146,-0.22312367,0.07549049,0.092765,-0.11451937,0.1125453,-0.60078937,-0.1553679,0.025940128,-0.060516678,-2.5657184,-0.11209254,0.31744272,0.2963224,-0.26203427,-0.5918173,0.4453233,0.07586627,-0.047750447,-0.4585349,1.2645583,0.13137743,-0.03796258,-0.4087989,0.50202155,0.46074653,0.14093244,-0.061454564,-0.09966066,-1.1777704,-0.26348317,0.44183722,1.5368421,0.45257404,0.6872064,-0.10156348,0.5992447,-0.8719626,-1.3260235,0.30497563,0.078349546,0.07532402,0.77004844,-0.22868092,-0.46949363,0.3051346,0.57809156,-0.18283334,0.18894577,-0.3259446,1.8274235,-0.27973792,0.029147565,-0.14131984,0.48764548,0.30642632,0.29185295,0.2848627,-0.28834787,0.30376548,0.074424624,0.03185706,-0.31963587,0.25162914,0.28058636,0.26975834,-0.10027331,0.34390748,0.36988953,0.56457365,0.0732829,-0.15864633,-0.16150531,-0.8488016,0.18952903],"result":{"type":"object","properties":{"featured":{"properties":{"image":{"properties":{"description":{"type":"string"},"title":{"type":"string"},"url":{"type":"string"}},"type":"object"},"news":{"items":{"properties":{"links":{"items":{"properties":{"title":{"type":"string"},"url":{"type":"string"}},"type":"object"},"type":"array"},"story":{"type":"string"}},"type":"object"},"type":"array"},"tfa":{"properties":{"extract":{"type":"string"},"title":{"type":"string"},"url":{"type":"string"}},"type":"object"}},"required":["tfa","image","news"],"type":"object"}},"required":["featured"]},"sql_tables":null,"sql_queries":null,"file_inbox":null,"oauth":null,"assets":null,"runner":"any","operating_system":["linux","macos","windows"],"tool_set":""},false]}