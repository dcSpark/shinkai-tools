{"type":"Python","content":[{"version":"1.0.0","name":"iterm-write","homepage":null,"author":"@@official.shinkai","py_code":"# /// script\n# dependencies = [\n#   \"requests\",\n# ]\n# ///\n\nfrom typing import Dict, Any, Optional, List\nimport subprocess\nimport os\n\nclass CONFIG:\n    use_applescript: bool = True  # Whether to use AppleScript to write text to iTerm\n\nclass INPUTS:\n    command: str  # The command or text to write into the active iTerm session\n\nclass OUTPUT:\n    lines_output: int  # Number of new lines that appeared in iTerm after the command\n    success: bool  # Whether the command was successfully written\n    message: str  # Success or error message\n\ndef escape_for_applescript(text: str) -> str:\n    \"\"\"Escape special characters for AppleScript.\"\"\"\n    return text.replace('\\\\', '\\\\\\\\').replace('\"', '\\\\\"').replace(\"'\", \"'\\\\''\")\n\nasync def run(config: CONFIG, inputs: INPUTS) -> OUTPUT:\n    output = OUTPUT()\n    output.lines_output = 0\n    output.success = False\n    output.message = \"\"\n\n    if not inputs.command:\n        output.message = \"No command specified to write to the iTerm terminal\"\n        return output\n\n    try:\n        # Construct AppleScript command\n        script_cmd = f'''\n            tell application \"iTerm2\"\n                tell current session of current window\n                    write text \"{escape_for_applescript(inputs.command)}\"\n                end tell\n            end tell\n        '''\n\n        # Execute AppleScript\n        process = subprocess.Popen(\n            ['/usr/bin/osascript', '-e', script_cmd],\n            stdout=subprocess.PIPE,\n            stderr=subprocess.PIPE\n        )\n        stdout, stderr = process.communicate()\n\n        if process.returncode == 0:\n            output.success = True\n            output.message = \"Command successfully written to iTerm\"\n            output.lines_output = len(inputs.command.split('\\n'))  # Basic estimation\n        else:\n            output.message = f\"Failed to execute AppleScript: {stderr.decode()}\"\n    except Exception as e:\n        output.message = f\"Error writing to iTerm: {str(e)}\"\n\n    return output ","tools":[],"config":[{"BasicConfig":{"key_name":"use_applescript","description":"Whether to use AppleScript to write text to iTerm","required":false,"type":null,"key_value":null}}],"description":"Writes a command (or text) to the active iTerm terminal.","keywords":["iterm","terminal","automation","shinkai"],"input_args":{"type":"object","properties":{"command":{"type":"string","description":"The command or text to write into the active iTerm session"}},"required":["command"]},"output_arg":{"json":""},"activated":false,"embedding":[-0.34393415,0.37095886,-0.01037458,0.7234693,0.014391165,0.43267182,-1.0061393,0.3407537,0.33073586,0.14189878,0.17365836,0.39511886,-0.27130732,0.13688652,0.15928383,-0.6192955,-0.7785784,-0.9567094,-1.255872,-0.2742488,0.061003458,0.3906004,-0.071126215,-0.25237256,0.033497594,-0.240939,0.3729414,0.37308282,-1.4022464,-2.2783186,-0.5357852,0.33919838,-0.05959461,0.06452951,-0.18005002,-0.59950364,0.20707619,0.19907418,-0.6013253,-0.6380983,0.33278582,0.24466968,-0.045243237,-0.06265372,0.40105376,0.32802525,0.022126138,-0.5796913,0.71896493,0.8483908,-0.24087049,-0.3149037,-0.3253326,0.13175705,0.08371643,-0.55339175,0.3752107,0.30166224,-0.19991381,0.27513647,0.10544737,0.9338942,-4.341695,-0.46022505,0.70756125,-0.5067897,0.6076358,0.35059452,-0.3117009,0.030683607,-0.36647645,0.36999637,-0.27616948,0.071499035,0.52087927,-0.97342485,-0.12713422,0.34318438,0.7477211,-0.38433444,0.26024887,0.6364098,-0.30517036,0.08107438,-0.5567151,0.9086637,-0.5927023,-0.3178776,0.11146738,0.08698246,-0.31550667,-0.35298055,-0.002646491,-0.03356468,-0.43917984,0.5230583,-0.0099445265,0.7539852,-0.009543404,3.1382418,0.71918243,0.734133,0.10020157,-0.38597432,0.027202833,-0.51096934,-0.41223338,-0.73507994,-0.64481306,-0.18718788,0.44673777,0.04404022,0.3716408,0.24557984,0.8017126,0.23023106,-0.838785,-0.11336121,0.085175216,0.9920437,-0.41693285,0.010565709,-1.0656613,-0.109591745,-0.3121117,0.7112912,0.095783636,0.28102452,-0.022148397,-0.27116358,0.34581998,-0.021434927,-0.118539125,0.27972776,-0.17966788,0.6396617,0.18861717,-0.5107555,0.048478913,-0.31396952,0.6449355,-1.6558098,1.6554927,0.306185,0.5585604,-0.2349821,0.13073799,0.1656445,0.106701925,-0.35713416,-0.35825872,-0.13708849,-0.07539196,0.451697,0.6031666,-0.13128142,-0.2702861,0.1352727,-0.13694423,0.37702474,-0.3817428,-0.5485153,0.6119511,0.6013497,0.51366365,-0.28408214,-0.009605482,-0.31666422,-0.28439218,-0.12252641,0.0836472,-0.73649955,-0.02657437,0.27594137,-0.83921415,0.33610323,0.31383947,-0.14389497,0.26300794,-0.1024618,-0.08498656,0.6209091,-0.5800358,-0.15088415,0.10997069,-0.28302628,0.54425997,0.37273657,0.2603713,0.8336102,-0.8567538,1.9183263,-0.23857321,0.27374953,-0.25486988,-0.21425666,0.05408147,0.713165,0.08131671,-0.4716599,-0.5703851,0.32381463,-0.70127356,0.43470708,0.29918697,-0.44856185,0.4376021,0.6850241,-0.054657735,0.02213119,0.18287468,-0.7233006,0.6211764,0.6312741,0.82521904,-0.23093532,-0.21138775,-0.11017384,0.08111446,0.4618082,0.29987472,0.3911146,-0.5268363,-0.4607462,-0.25959098,-0.13377813,0.28389764,0.30954623,-0.4915854,-0.6357898,0.37052065,0.8039486,0.67597616,0.46177188,0.1759085,0.11199484,-0.19147286,0.23103179,0.38216725,-0.34090042,0.078369305,0.1537461,0.31558335,-0.20559084,-0.0918846,-0.4902782,-0.49892643,0.13746709,0.022882508,0.953954,0.18618435,0.07499248,0.56951714,-0.19498505,-0.2825597,0.1727897,-1.6733093,-0.37152782,-0.6698324,0.5945351,0.577007,0.18822032,0.37010652,0.69680774,-0.45211074,-0.5815526,-0.18029556,-0.17616284,-0.12501796,-0.021596096,-0.74397457,0.6284508,0.13788295,-0.18221253,0.2345373,-0.5562469,-0.20351985,-0.11731971,0.2595836,-0.44867206,-0.3281336,-0.23749417,0.33187383,-0.20695423,-0.434564,-0.25600576,-0.5871712,-0.6226479,0.17226768,-0.10869729,0.52525234,-0.5767882,-0.15651083,0.5750085,2.6521707,0.7626594,-0.17814441,-0.0063814335,0.021912733,-0.06851588,0.72877955,-0.21822089,-0.5464562,0.22513057,-0.9888418,-0.5951911,0.01017854,-0.09684415,-0.21962008,0.68372476,-0.37308443,0.27969623,0.33184245,-0.21273157,0.80928284,0.2186032,-0.013446897,0.39254382,-0.20187825,-1.7239431,-0.3138396,-0.3197604,0.048393257,0.23251116,-0.2873281,0.4428512,-0.3302785,0.07706033,-0.12057393,0.3914187,0.9106842,-0.29917955,0.75525355,-0.10954515,0.73904586,0.16649134,0.4397129,0.09707348,0.04435987,-0.42873073,0.11326079,1.6698015,-0.11227339,0.033381887,0.50054836,0.17637327,-0.9936249,-1.7252719,-0.047807872,-0.19606525,-0.66187066,0.7034319,-0.24656418,-0.6245512,0.10687864,1.0971597,0.18719055,-0.38158858,-0.7894926,1.6228588,0.21149543,0.14929958,-0.16838051,0.3116264,-0.15110222,-0.07988998,0.5707295,-0.92384183,0.09650962,0.29453966,0.15400462,0.044670053,0.17770101,0.7339174,0.58735055,-0.12891178,-0.4259205,0.30564767,0.28911453,0.0741536,0.48399848,0.05396692,-0.8473539,-0.11260016],"result":{"type":"object","properties":{"lines_output":{"description":"Number of new lines that appeared in iTerm after the command","type":"number"},"message":{"description":"Success or error message","type":"string"},"success":{"description":"Whether the command was successfully written","type":"boolean"}},"required":["lines_output","success","message"]},"sql_tables":[],"sql_queries":[],"file_inbox":null,"oauth":null,"assets":null,"runner":"any","operating_system":["linux","macos","windows"],"tool_set":""},false]}